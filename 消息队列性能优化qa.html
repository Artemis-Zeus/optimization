<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-06-10T01:18:27.2273406"><title>æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA | æŠ€æœ¯çŸ¥è¯†åº“</title><script type="application/json" id="virtual-toc-data">[{"id":"ly8a1z_4","level":0,"title":"ğŸ“‹ çŸ¥è¯†ç»“æ„","anchor":"#ly8a1z_4"},{"id":"ly8a1z_5","level":0,"title":"ğŸš€ ååé‡ä¼˜åŒ–","anchor":"#ly8a1z_5"},{"id":"ly8a1z_6","level":0,"title":"âš™ï¸ ç³»ç»Ÿçº§ä¼˜åŒ–","anchor":"#ly8a1z_6"},{"id":"ly8a1z_7","level":0,"title":"ğŸ’¡ é¢è¯•æŠ€å·§","anchor":"#ly8a1z_7"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA | æŠ€æœ¯çŸ¥è¯†åº“"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="æŠ€æœ¯çŸ¥è¯†åº“ Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–qa.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA | æŠ€æœ¯çŸ¥è¯†åº“"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–qa.html#webpage",
    "url": "writerside-documentation/æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–qa.html",
    "name": "æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA | æŠ€æœ¯çŸ¥è¯†åº“",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "æŠ€æœ¯çŸ¥è¯†åº“ Help"
}</script><!-- End Schema.org --></head><body data-id="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA" data-main-title="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="æ¶ˆæ¯é˜Ÿåˆ—é¢è¯•å¤§çº².md|æ¶ˆæ¯é˜Ÿåˆ—é¢è¯•å¤§çº²"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>æŠ€æœ¯çŸ¥è¯†åº“  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA" id="æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA.md">æ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–QA</h1><p id="ly8a1z_3">æ¶ˆæ¯é˜Ÿåˆ—çš„æ€§èƒ½ä¼˜åŒ–æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„é‡è¦ç¯èŠ‚ã€‚æœ¬æ–‡æ¡£æ·±å…¥åˆ†ææ¶ˆæ¯é˜Ÿåˆ—æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•è®ºï¼Œæ¶µç›–ååé‡ä¼˜åŒ–ã€å»¶è¿Ÿä¼˜åŒ–ã€èµ„æºè°ƒä¼˜ç­‰å¤šä¸ªç»´åº¦ã€‚</p><section class="chapter"><h2 id="ly8a1z_4" data-toc="ly8a1z_4">ğŸ“‹ çŸ¥è¯†ç»“æ„</h2><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="5 5 724.98681640625 448.8218688964844" style="max-width: 724.98681640625px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 522.0225589464337,232.76820883315256 L 520.8130435727761,261.8991142251978 L519.6035281991185,291.0300196172431"></path><path class="edge section-edge-0 edge-depth-1" d="M 533.5598068732545,207.49214071513887 L 562.7373507166233,179.98800620816942 L591.914894559992,152.48387170119997"></path><path class="edge section-edge-0 edge-depth-1" d="M 537.5888174903641,216.48612112563953 L 599.7978167227008,211.095281673706 L662.0068159550374,205.7044422217725"></path><path class="edge section-edge-0 edge-depth-1" d="M 535.8285133498747,224.93586160109166 L 583.3966142239408,250.7508943231901 L630.9647150980069,276.56592704528856"></path><path class="edge section-edge-0 edge-depth-0" d="M 375.30942376854125,228.4834703434746 L 441.49683216368726,223.67565945981752 L507.68424055883327,218.86784857616044"></path><path class="edge section-edge-1 edge-depth-1" d="M 404.4581511558537,336.78554736469374 L 460.59637548242915,361.7744392286728 L516.7345998090046,386.76333109265187"></path><path class="edge section-edge-1 edge-depth-1" d="M 375.7596154562267,330.2929219529488 L 320.2017452145565,328.83796534504313 L264.64387497288635,327.38300873713746"></path><path class="edge section-edge-1 edge-depth-1" d="M 393.73909858943983,345.3856779052297 L 400.32109283642797,377.8037524671237 L406.9030870834161,410.2218270290176"></path><path class="edge section-edge-1 edge-depth-1" d="M 378.6042953011802,339.48180991073656 L 340.818718058811,366.8369225797845 L303.0331408164418,394.1920352488325"></path><path class="edge section-edge-1 edge-depth-0" d="M 364.66831360091095,243.9348123075149 L 375.55165794265736,280.1279033424303 L386.43500228440377,316.32099437734564"></path><path class="edge section-edge-2 edge-depth-1" d="M 355.2048421268261,110.85813477603793 L 374.8912750070565,78.77174897205984 L394.57770788728686,46.68536316808175"></path><path class="edge section-edge-2 edge-depth-1" d="M 337.42204423696876,112.40837035564456 L 311.03723622985547,82.58098224269334 L284.6524282227422,52.753594129742126"></path><path class="edge section-edge-2 edge-depth-1" d="M 361.96622742466275,120.2271747315349 L 415.72481789860524,107.65292315188535 L469.48340837254773,95.07867157223579"></path><path class="edge section-edge-2 edge-depth-1" d="M 332.55673557575886,121.22481218640058 L 275.25206157419325,111.86216201792527 L217.94738757262763,102.49951184944996"></path><path class="edge section-edge-2 edge-depth-0" d="M 358.523262106521,214.68170322635484 L 353.8546456839374,176.60684769574956 L349.18602926135384,138.5319921651443"></path><path class="edge section-edge-3 edge-depth-1" d="M 206.50173242554987,243.7727204675644 L 215.16915215267767,216.8588266505038 L223.83657187980546,189.94493283344318"></path><path class="edge section-edge-3 edge-depth-1" d="M 189.5610420101071,249.52650701810822 L 150.80212634550003,222.758718023283 L112.04321068089298,195.9909290284578"></path><path class="edge section-edge-3 edge-depth-1" d="M 186.92389426113067,258.8296486085878 L 129.71982447986852,261.8046751392459 L72.51575469860637,264.779701669904"></path><path class="edge section-edge-3 edge-depth-1" d="M 190.94460823988283,268.29263403429 L 160.00896648584995,297.2042979282834 L129.07332473181708,326.11596182227674"></path><path class="edge section-edge-3 edge-depth-0" d="M 345.5854464137942,232.22390577441297 L 281.1262455409184,243.81039506336765 L216.66704466804256,255.3968843523224"></path></g><g class="mindmap-nodes"><g transform="translate(317.3128421220997, 210.67019744737945)" class="mindmap-node section--1 section-root"><g transform="translate(43.0359992980957, 18.9)"><circle r="43.0359992980957" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">æ€§èƒ½ä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(471.59682257148575, 198.8811214722556)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-1"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ååé‡ä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(348.2184751670236, 311.78560923748114)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-6"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">å»¶è¿Ÿä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(305.3057624476794, 104.74349794411967)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h74.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-11"></path><line y2="37.8" x2="84.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.0546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">èµ„æºè°ƒä¼˜</tspan></tspan></text></g></g></g><g transform="translate(159.36765036354564, 239.15059267935587)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-16"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">æ•…éšœå¤„ç†</tspan></tspan></text></g></g></g><g transform="translate(475.9452649402774, 287.1171069781401)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-2"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">æ‰¹é‡å¤„ç†</tspan></tspan></text></g></g></g><g transform="translate(560.2751910260674, 123.29489094408325)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-3"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">å¹¶å‘æ§åˆ¶</tspan></tspan></text></g></g></g><g transform="translate(633.9148112401267, 185.50944187515643)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-4"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">åˆ†åŒºç­–ç•¥</tspan></tspan></text></g></g></g><g transform="translate(602.0937180407025, 264.82066717412465)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h74.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-5"></path><line y2="37.8" x2="84.109375" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(42.0546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">å‹ç¼©ç®—æ³•</tspan></tspan></text></g></g></g><g transform="translate(487.9022772016433, 373.9632692198645)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-7"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ç½‘ç»œä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(198.6010156283004, 308.09032145260517)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-8"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">åºåˆ—åŒ–ä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(367.3517119096409, 406.02189569676625)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-9"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ç¼“å­˜ç­–ç•¥</tspan></tspan></text></g></g></g><g transform="translate(248.32827415250267, 384.08823592208796)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-10"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">é¢„å–æœºåˆ¶</tspan></tspan></text></g></g></g><g transform="translate(362.1721000664336, 15)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h70.5 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-12"></path><line y2="37.8" x2="80.5" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(40.25, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">JVMè°ƒä¼˜</tspan></tspan></text></g></g></g><g transform="translate(216.13589751203153, 22.618466541267026)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h107.15625 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-13"></path><line y2="37.8" x2="117.15625" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(58.578125, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">æ“ä½œç³»ç»Ÿè°ƒä¼˜</tspan></tspan></text></g></g></g><g transform="translate(441.0531865514354, 72.76234835965101)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-14"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ç£ç›˜ä¼˜åŒ–</tspan></tspan></text></g></g></g><g transform="translate(161.0889857007071, 81.18082609173086)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h74.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-15"></path><line y2="37.8" x2="84.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.0546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ç½‘ç»œè°ƒä¼˜</tspan></tspan></text></g></g></g><g transform="translate(185.879967143714, 156.7670606216517)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-17"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">æ€§èƒ½ç›‘æ§</tspan></tspan></text></g></g></g><g transform="translate(57.14591552935872, 168.56684336721014)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-18"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ç“¶é¢ˆè¯†åˆ«</tspan></tspan></text></g></g></g><g transform="translate(15, 246.6587575991359)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-19"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">é—®é¢˜è¯Šæ–­</tspan></tspan></text></g></g></g><g transform="translate(75.07828401196286, 317.4580031772109)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-20"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">å®¹é‡é¢„è­¦</tspan></tspan></text></g></g></g></g></svg></section><section class="chapter"><h2 id="ly8a1z_5" data-toc="ly8a1z_5">ğŸš€ ååé‡ä¼˜åŒ–</h2><section class="chapter"><h3 id="q1" data-toc="q1">Q1: å¦‚ä½•æå‡æ¶ˆæ¯é˜Ÿåˆ—çš„ååé‡ï¼Ÿæœ‰å“ªäº›ä¼˜åŒ–ç­–ç•¥ï¼Ÿ</h3><p id="ly8a1z_11"><span class="control" id="ly8a1z_18">ç­”æ¡ˆï¼š</span></p><p id="ly8a1z_12"><span class="control" id="ly8a1z_19">ååé‡ä¼˜åŒ–ç­–ç•¥ï¼š</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 430.234375 740"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="430.234375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="ååé‡ä¼˜åŒ–æŠ€æœ¯æ ˆ" class="cluster"><rect height="724" width="414.234375" y="8" x="8" style=""></rect><g transform="translate(151.015625, 8)" class="cluster-label"><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ååé‡ä¼˜åŒ–æŠ€æœ¯æ ˆ</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_A1_0" d="M185.625,106L191.875,106C198.125,106,210.625,106,220,106C229.375,106,235.625,106,241.208,106C246.792,106,251.708,106,254.167,106L256.625,106"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_B1_1" d="M185.102,282L191.439,282C197.776,282,210.451,282,219.913,282C229.375,282,235.625,282,241.208,282C246.792,282,251.708,282,254.167,282L256.625,282"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_C1_2" d="M185.625,458L191.875,458C198.125,458,210.625,458,220,458C229.375,458,235.625,458,241.208,458C246.792,458,251.708,458,254.167,458L256.625,458"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_D1_3" d="M177.617,634L185.202,634C192.786,634,207.956,634,218.665,634C229.375,634,235.625,634,241.208,634C246.792,634,251.708,634,254.167,634L256.625,634"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(115.5625, 106)" id="flowchart-A-10465" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ç”Ÿäº§è€…ä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(322.6796875, 106)" id="flowchart-A1-10466" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>æ‰¹é‡å‘é€<br>å¼‚æ­¥å‘é€<br>è¿æ¥å¤ç”¨<br>å‹ç¼©ç®—æ³•</p></span></div></foreignObject></g></g><g transform="translate(115.5625, 282)" id="flowchart-B-10467" class="node default"><rect height="54" width="139.078125" y="-27" x="-69.5390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-39.5390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="79.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Brokerä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(322.6796875, 282)" id="flowchart-B1-10468" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>åˆ†åŒºç­–ç•¥<br>å‰¯æœ¬é…ç½®<br>åˆ·ç›˜ç­–ç•¥<br>å†…å­˜ç®¡ç†</p></span></div></foreignObject></g></g><g transform="translate(115.5625, 458)" id="flowchart-C-10469" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>æ¶ˆè´¹è€…ä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(322.6796875, 458)" id="flowchart-C1-10470" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å¹¶å‘æ¶ˆè´¹<br>æ‰¹é‡æ‹‰å–<br>é¢„å–ç¼“å†²<br>ç¡®è®¤ç­–ç•¥</p></span></div></foreignObject></g></g><g transform="translate(115.5625, 634)" id="flowchart-D-10471" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ç½‘ç»œä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(322.6796875, 634)" id="flowchart-D1-10472" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>é›¶æ‹·è´<br>æ‰¹é‡ä¼ è¾“<br>è¿æ¥æ± <br>åè®®ä¼˜åŒ–</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="ly8a1z_14"><span class="control" id="ly8a1z_20">ç”Ÿäº§è€…ååé‡ä¼˜åŒ–ï¼š</span></p><div class="code-block" data-lang="java">
// é«˜ååé‡ç”Ÿäº§è€…é…ç½®
public class HighThroughputProducer {
    
    public Properties getOptimizedProducerConfig() {
        Properties props = new Properties();
        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        
        // æ‰¹é‡å‘é€ä¼˜åŒ–
        props.put(ProducerConfig.BATCH_SIZE_CONFIG, 65536);        // 64KBæ‰¹é‡å¤§å°
        props.put(ProducerConfig.LINGER_MS_CONFIG, 50);            // 50msç­‰å¾…æ—¶é—´
        props.put(ProducerConfig.BUFFER_MEMORY_CONFIG, 67108864);  // 64MBç¼“å†²åŒº
        
        // å¹¶å‘ä¼˜åŒ–
        props.put(ProducerConfig.MAX_IN_FLIGHT_REQUESTS_PER_CONNECTION, 5);
        
        // å‹ç¼©ä¼˜åŒ–
        props.put(ProducerConfig.COMPRESSION_TYPE_CONFIG, &quot;lz4&quot;);  // LZ4å‹ç¼©
        
        // é‡è¯•ä¼˜åŒ–
        props.put(ProducerConfig.RETRIES_CONFIG, Integer.MAX_VALUE);
        props.put(ProducerConfig.RETRY_BACKOFF_MS_CONFIG, 1000);
        
        // è¶…æ—¶é…ç½®
        props.put(ProducerConfig.REQUEST_TIMEOUT_MS_CONFIG, 30000);
        props.put(ProducerConfig.DELIVERY_TIMEOUT_MS_CONFIG, 300000);
        
        return props;
    }
    
    // æ‰¹é‡å¼‚æ­¥å‘é€å®ç°
    public void batchAsyncSend() throws Exception {
        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(getOptimizedProducerConfig());
        
        // ä½¿ç”¨çº¿ç¨‹æ± è¿›è¡Œå¹¶å‘å‘é€
        ExecutorService executor = Executors.newFixedThreadPool(10);
        CountDownLatch latch = new CountDownLatch(100000);
        
        long startTime = System.currentTimeMillis();
        
        for (int i = 0; i &lt; 100000; i++) {
            final int messageId = i;
            executor.submit(() -&gt; {
                try {
                    ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(
                        &quot;high-throughput-topic&quot;,
                        &quot;key-&quot; + messageId,
                        &quot;message-&quot; + messageId
                    );
                    
                    producer.send(record, (metadata, exception) -&gt; {
                        if (exception != null) {
                            System.err.println(&quot;å‘é€å¤±è´¥: &quot; + exception.getMessage());
                        }
                        latch.countDown();
                    });
                    
                } catch (Exception e) {
                    System.err.println(&quot;å‘é€å¼‚å¸¸: &quot; + e.getMessage());
                    latch.countDown();
                }
            });
        }
        
        latch.await();
        long endTime = System.currentTimeMillis();
        
        System.out.printf(&quot;å‘é€10ä¸‡æ¡æ¶ˆæ¯è€—æ—¶: %d ms, TPS: %.2f%n&quot;, 
                        endTime - startTime, 100000.0 / ((endTime - startTime) / 1000.0));
        
        executor.shutdown();
        producer.close();
    }
}
</div><p id="ly8a1z_16"><span class="control" id="ly8a1z_21">æ¶ˆè´¹è€…ååé‡ä¼˜åŒ–ï¼š</span></p><div class="code-block" data-lang="java">
// é«˜ååé‡æ¶ˆè´¹è€…é…ç½®
public class HighThroughputConsumer {
    
    public Properties getOptimizedConsumerConfig() {
        Properties props = new Properties();
        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;high-throughput-group&quot;);
        
        // æ‰¹é‡æ‹‰å–ä¼˜åŒ–
        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 1000);      // å•æ¬¡æ‹‰å–1000æ¡
        props.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, 50000);      // æœ€å°æ‹‰å–50KB
        props.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, 500);      // æœ€å¤§ç­‰å¾…500ms
        
        // å†…å­˜ä¼˜åŒ–
        props.put(ConsumerConfig.RECEIVE_BUFFER_BYTES_CONFIG, 262144); // 256KBæ¥æ”¶ç¼“å†²åŒº
        props.put(ConsumerConfig.SEND_BUFFER_BYTES_CONFIG, 131072);    // 128KBå‘é€ç¼“å†²åŒº
        
        // ä¼šè¯ä¼˜åŒ–
        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 30000);
        props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG, 10000);
        
        // è‡ªåŠ¨æäº¤ä¼˜åŒ–
        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, true);
        props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, 1000);
        
        return props;
    }
    
    // å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹
    public void multiThreadConsume() throws Exception {
        // åˆ›å»ºå¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹
        int consumerThreads = Runtime.getRuntime().availableProcessors();
        ExecutorService executor = Executors.newFixedThreadPool(consumerThreads);
        
        for (int i = 0; i &lt; consumerThreads; i++) {
            executor.submit(() -&gt; {
                KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(getOptimizedConsumerConfig());
                consumer.subscribe(Arrays.asList(&quot;high-throughput-topic&quot;));
                
                try {
                    while (true) {
                        ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(1000));
                        
                        if (!records.isEmpty()) {
                            // æ‰¹é‡å¤„ç†æ¶ˆæ¯
                            List&lt;String&gt; batch = new ArrayList&lt;&gt;();
                            for (ConsumerRecord&lt;String, String&gt; record : records) {
                                batch.add(record.value());
                            }
                            
                            // æ‰¹é‡ä¸šåŠ¡å¤„ç†
                            processBatch(batch);
                            
                            System.out.printf(&quot;çº¿ç¨‹ %s å¤„ç†äº† %d æ¡æ¶ˆæ¯%n&quot;, 
                                            Thread.currentThread().getName(), records.count());
                        }
                    }
                } catch (Exception e) {
                    System.err.println(&quot;æ¶ˆè´¹å¼‚å¸¸: &quot; + e.getMessage());
                } finally {
                    consumer.close();
                }
            });
        }
    }
    
    // æ‰¹é‡å¤„ç†ä¸šåŠ¡é€»è¾‘
    private void processBatch(List&lt;String&gt; messages) {
        // æ‰¹é‡æ•°æ®åº“æ’å…¥
        try (Connection conn = getConnection()) {
            conn.setAutoCommit(false);
            
            String sql = &quot;INSERT INTO message_log (content, created_time) VALUES (?, ?)&quot;;
            try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
                
                for (String message : messages) {
                    pstmt.setString(1, message);
                    pstmt.setTimestamp(2, new Timestamp(System.currentTimeMillis()));
                    pstmt.addBatch();
                }
                
                pstmt.executeBatch();
                conn.commit();
            }
        } catch (SQLException e) {
            System.err.println(&quot;æ‰¹é‡æ’å…¥å¤±è´¥: &quot; + e.getMessage());
        }
    }
}
</div></section><section class="chapter"><h3 id="q2" data-toc="q2">Q2: å¦‚ä½•ä¼˜åŒ–æ¶ˆæ¯é˜Ÿåˆ—çš„å»¶è¿Ÿï¼Ÿæœ‰å“ªäº›å…³é”®æŠ€æœ¯ï¼Ÿ</h3><p id="ly8a1z_22"><span class="control" id="ly8a1z_27">ç­”æ¡ˆï¼š</span></p><p id="ly8a1z_23"><span class="control" id="ly8a1z_28">å»¶è¿Ÿä¼˜åŒ–æŠ€æœ¯æ ˆï¼š</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 469.125 740"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="469.125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="å»¶è¿Ÿä¼˜åŒ–æŠ€æœ¯" class="cluster"><rect height="724" width="453.125" y="8" x="8" style=""></rect><g transform="translate(186.484375, 8)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å»¶è¿Ÿä¼˜åŒ–æŠ€æœ¯</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_A1_0" d="M201.656,106L207.906,106C214.156,106,226.656,106,236.316,106C245.977,106,252.797,106,258.951,106C265.104,106,270.591,106,273.335,106L276.078,106"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_B1_1" d="M193.641,282L201.227,282C208.813,282,223.984,282,234.695,282C245.406,282,251.656,282,257.24,282C262.823,282,267.74,282,270.198,282L272.656,282"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_C1_2" d="M201.656,458L207.906,458C214.156,458,226.656,458,236.984,458C247.311,458,255.466,458,262.954,458C270.443,458,277.264,458,280.675,458L284.086,458"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_D1_3" d="M201.656,634L207.906,634C214.156,634,226.656,634,236.984,634C247.311,634,255.466,634,262.954,634C270.443,634,277.264,634,280.675,634L284.086,634"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(123.578125, 106)" id="flowchart-A-10588" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ç½‘ç»œå»¶è¿Ÿä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(350.140625, 106)" id="flowchart-A1-10589" class="node default"><rect height="126" width="140.125" y="-63" x="-70.0625" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-40.0625, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>é›¶æ‹·è´æŠ€æœ¯<br>å†…æ ¸æ—è·¯<br>ä¸“ç”¨ç½‘ç»œ<br>å°±è¿‘éƒ¨ç½²</p></span></div></foreignObject></g></g><g transform="translate(123.578125, 282)" id="flowchart-B-10590" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>åºåˆ—åŒ–ä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(350.140625, 282)" id="flowchart-B1-10591" class="node default"><rect height="126" width="146.96875" y="-63" x="-73.484375" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-43.484375, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="86.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>äºŒè¿›åˆ¶åè®®<br>å‹ç¼©ç®—æ³•<br>Schemaä¼˜åŒ–<br>ç¼“å­˜å¤ç”¨</p></span></div></foreignObject></g></g><g transform="translate(123.578125, 458)" id="flowchart-C-10592" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å­˜å‚¨å»¶è¿Ÿä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(350.140625, 458)" id="flowchart-C1-10593" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å†…å­˜å­˜å‚¨<br>SSDç£ç›˜<br>é¢„å†™æ—¥å¿—<br>å¼‚æ­¥åˆ·ç›˜</p></span></div></foreignObject></g></g><g transform="translate(123.578125, 634)" id="flowchart-D-10594" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å¤„ç†å»¶è¿Ÿä¼˜åŒ–</p></span></div></foreignObject></g></g><g transform="translate(350.140625, 634)" id="flowchart-D1-10595" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>é¢„å–æœºåˆ¶<br>æ‰¹é‡å¤„ç†<br>æµæ°´çº¿<br>ç¼“å­˜é¢„çƒ­</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="ly8a1z_25"><span class="control" id="ly8a1z_29">ä½å»¶è¿Ÿé…ç½®ä¼˜åŒ–ï¼š</span></p><div class="code-block" data-lang="java">
// ä½å»¶è¿Ÿç”Ÿäº§è€…é…ç½®
public class LowLatencyProducer {
    
    public Properties getLowLatencyConfig() {
        Properties props = new Properties();
        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        
        // å»¶è¿Ÿä¼˜åŒ–é…ç½®
        props.put(ProducerConfig.LINGER_MS_CONFIG, 0);                  // ç«‹å³å‘é€
        props.put(ProducerConfig.BATCH_SIZE_CONFIG, 1024);              // å°æ‰¹é‡
        props.put(ProducerConfig.BUFFER_MEMORY_CONFIG, 8388608);        // 8MBç¼“å†²åŒº
        
        // ç½‘ç»œä¼˜åŒ–
        props.put(ProducerConfig.SEND_BUFFER_BYTES_CONFIG, 131072);     // 128KB
        props.put(ProducerConfig.RECEIVE_BUFFER_BYTES_CONFIG, 65536);   // 64KB
        
        // ç¡®è®¤ä¼˜åŒ–
        props.put(ProducerConfig.ACKS_CONFIG, &quot;1&quot;);                     // åªç­‰å¾…Leaderç¡®è®¤
        props.put(ProducerConfig.REQUEST_TIMEOUT_MS_CONFIG, 5000);      // 5ç§’è¶…æ—¶
        
        // ç¦ç”¨å‹ç¼©ï¼ˆå‡å°‘CPUå¼€é”€ï¼‰
        props.put(ProducerConfig.COMPRESSION_TYPE_CONFIG, &quot;none&quot;);
        
        return props;
    }
    
    // åŒæ­¥å‘é€å®ç°
    public void synchronousSend() throws Exception {
        Producer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(getLowLatencyConfig());
        
        String topic = &quot;low-latency-topic&quot;;
        
        for (int i = 0; i &lt; 1000; i++) {
            long startTime = System.nanoTime();
            
            ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(
                topic, &quot;key-&quot; + i, &quot;message-&quot; + i
            );
            
            try {
                RecordMetadata metadata = producer.send(record).get(); // åŒæ­¥ç­‰å¾…
                long endTime = System.nanoTime();
                
                long latencyMicros = (endTime - startTime) / 1000;
                System.out.printf(&quot;æ¶ˆæ¯ %d å»¶è¿Ÿ: %d å¾®ç§’%n&quot;, i, latencyMicros);
                
            } catch (Exception e) {
                System.err.println(&quot;å‘é€å¤±è´¥: &quot; + e.getMessage());
            }
        }
        
        producer.close();
    }
}

// ä½å»¶è¿Ÿæ¶ˆè´¹è€…é…ç½®
public class LowLatencyConsumer {
    
    public Properties getLowLatencyConfig() {
        Properties props = new Properties();
        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;low-latency-group&quot;);
        
        // å»¶è¿Ÿä¼˜åŒ–é…ç½®
        props.put(ConsumerConfig.FETCH_MIN_BYTES_CONFIG, 1);           // æœ€å°1å­—èŠ‚å°±è¿”å›
        props.put(ConsumerConfig.FETCH_MAX_WAIT_MS_CONFIG, 1);         // æœ€å¤§ç­‰å¾…1ms
        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 1);          // å•æ¬¡æ‹‰å–1æ¡
        
        // ç½‘ç»œä¼˜åŒ–
        props.put(ConsumerConfig.RECEIVE_BUFFER_BYTES_CONFIG, 65536);
        props.put(ConsumerConfig.SEND_BUFFER_BYTES_CONFIG, 131072);
        
        // ä¼šè¯ä¼˜åŒ–
        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 6000);
        props.put(ConsumerConfig.HEARTBEAT_INTERVAL_MS_CONFIG, 2000);
        
        return props;
    }
    
    // å®æ—¶æ¶ˆè´¹å¤„ç†
    public void realTimeConsume() throws Exception {
        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(getLowLatencyConfig());
        consumer.subscribe(Arrays.asList(&quot;low-latency-topic&quot;));
        
        while (true) {
            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(1));
            
            for (ConsumerRecord&lt;String, String&gt; record : records) {
                long receiveTime = System.nanoTime();
                
                // å¤„ç†æ¶ˆæ¯
                processMessage(record.value());
                
                long processTime = System.nanoTime();
                long latencyMicros = (processTime - receiveTime) / 1000;
                
                System.out.printf(&quot;æ¶ˆæ¯å¤„ç†å»¶è¿Ÿ: %d å¾®ç§’%n&quot;, latencyMicros);
            }
        }
    }
}
</div></section></section><section class="chapter"><h2 id="ly8a1z_6" data-toc="ly8a1z_6">âš™ï¸ ç³»ç»Ÿçº§ä¼˜åŒ–</h2><section class="chapter"><h3 id="q3-jvm" data-toc="q3-jvm">Q3: å¦‚ä½•è¿›è¡ŒJVMå’Œæ“ä½œç³»ç»Ÿçº§åˆ«çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h3><p id="ly8a1z_32"><span class="control" id="ly8a1z_37">ç­”æ¡ˆï¼š</span></p><p id="ly8a1z_33"><span class="control" id="ly8a1z_38">JVMä¼˜åŒ–é…ç½®ï¼š</span></p><div class="code-block" data-lang="java">
// JVMä¼˜åŒ–é…ç½®
public class JVMOptimization {
    
    // Kafka Broker JVMä¼˜åŒ–å‚æ•°
    public String getBrokerJVMOptions() {
        StringBuilder jvmOpts = new StringBuilder();
        
        // å †å†…å­˜é…ç½®
        jvmOpts.append(&quot;-Xmx6g &quot;);                    // æœ€å¤§å †å†…å­˜6GB
        jvmOpts.append(&quot;-Xms6g &quot;);                    // åˆå§‹å †å†…å­˜6GB
        jvmOpts.append(&quot;-XX:MetaspaceSize=256m &quot;);    // å…ƒç©ºé—´å¤§å°
        
        // GCä¼˜åŒ–é…ç½®
        jvmOpts.append(&quot;-XX:+UseG1GC &quot;);              // ä½¿ç”¨G1åƒåœ¾æ”¶é›†å™¨
        jvmOpts.append(&quot;-XX:MaxGCPauseMillis=20 &quot;);   // æœ€å¤§GCåœé¡¿20ms
        jvmOpts.append(&quot;-XX:InitiatingHeapOccupancyPercent=35 &quot;); // GCè§¦å‘é˜ˆå€¼
        jvmOpts.append(&quot;-XX:G1HeapRegionSize=16m &quot;);  // G1åŒºåŸŸå¤§å°
        
        // GCæ—¥å¿—é…ç½®
        jvmOpts.append(&quot;-Xloggc:/var/log/kafka/gc.log &quot;);
        jvmOpts.append(&quot;-XX:+UseGCLogFileRotation &quot;);
        jvmOpts.append(&quot;-XX:NumberOfGCLogFiles=10 &quot;);
        jvmOpts.append(&quot;-XX:GCLogFileSize=100M &quot;);
        
        // JITä¼˜åŒ–
        jvmOpts.append(&quot;-XX:+TieredCompilation &quot;);
        jvmOpts.append(&quot;-XX:TieredStopAtLevel=1 &quot;);
        
        // å†…å­˜ç®¡ç†ä¼˜åŒ–
        jvmOpts.append(&quot;-XX:+AlwaysPreTouch &quot;);       // é¢„åˆ†é…å†…å­˜
        jvmOpts.append(&quot;-XX:+DisableExplicitGC &quot;);    // ç¦ç”¨æ˜¾å¼GC
        
        return jvmOpts.toString();
    }
    
    // Producer/Consumer JVMä¼˜åŒ–
    public String getClientJVMOptions() {
        StringBuilder jvmOpts = new StringBuilder();
        
        // è¾ƒå°çš„å †å†…å­˜é…ç½®
        jvmOpts.append(&quot;-Xmx2g -Xms2g &quot;);
        
        // ä½¿ç”¨ZGCæˆ–Parallel GC
        jvmOpts.append(&quot;-XX:+UseZGC &quot;);               // è¶…ä½å»¶è¿Ÿåœºæ™¯
        // æˆ–è€…
        // jvmOpts.append(&quot;-XX:+UseParallelGC &quot;);     // é«˜ååé‡åœºæ™¯
        
        // ç½‘ç»œæ€§èƒ½ä¼˜åŒ–
        jvmOpts.append(&quot;-Djava.net.preferIPv4Stack=true &quot;);
        jvmOpts.append(&quot;-Dsun.net.useExclusiveBind=false &quot;);
        
        return jvmOpts.toString();
    }
}
</div><p id="ly8a1z_35"><span class="control" id="ly8a1z_39">æ“ä½œç³»ç»Ÿä¼˜åŒ–ï¼š</span></p><div class="code-block" data-lang="bash">
#!/bin/bash
# æ“ä½œç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–è„šæœ¬

# 1. å†…æ ¸å‚æ•°ä¼˜åŒ–
echo &quot;# Kafkaä¼˜åŒ–å‚æ•°&quot; &gt;&gt; /etc/sysctl.conf
echo &quot;vm.swappiness=1&quot; &gt;&gt; /etc/sysctl.conf                    # å‡å°‘swapä½¿ç”¨
echo &quot;vm.dirty_background_ratio=5&quot; &gt;&gt; /etc/sysctl.conf        # åå°å†™å…¥æ¯”ä¾‹
echo &quot;vm.dirty_ratio=10&quot; &gt;&gt; /etc/sysctl.conf                  # åŒæ­¥å†™å…¥æ¯”ä¾‹
echo &quot;vm.dirty_expire_centisecs=12000&quot; &gt;&gt; /etc/sysctl.conf     # è„é¡µè¿‡æœŸæ—¶é—´
echo &quot;vm.dirty_writeback_centisecs=1500&quot; &gt;&gt; /etc/sysctl.conf   # å†™å›é—´éš”

# ç½‘ç»œå‚æ•°ä¼˜åŒ–
echo &quot;net.core.rmem_default=262144&quot; &gt;&gt; /etc/sysctl.conf       # é»˜è®¤æ¥æ”¶ç¼“å†²åŒº
echo &quot;net.core.rmem_max=16777216&quot; &gt;&gt; /etc/sysctl.conf         # æœ€å¤§æ¥æ”¶ç¼“å†²åŒº
echo &quot;net.core.wmem_default=262144&quot; &gt;&gt; /etc/sysctl.conf       # é»˜è®¤å‘é€ç¼“å†²åŒº
echo &quot;net.core.wmem_max=16777216&quot; &gt;&gt; /etc/sysctl.conf         # æœ€å¤§å‘é€ç¼“å†²åŒº
echo &quot;net.core.netdev_max_backlog=5000&quot; &gt;&gt; /etc/sysctl.conf   # ç½‘ç»œè®¾å¤‡é˜Ÿåˆ—é•¿åº¦

# TCPå‚æ•°ä¼˜åŒ–
echo &quot;net.ipv4.tcp_window_scaling=1&quot; &gt;&gt; /etc/sysctl.conf      # å¯ç”¨çª—å£ç¼©æ”¾
echo &quot;net.ipv4.tcp_rmem=4096 65536 16777216&quot; &gt;&gt; /etc/sysctl.conf
echo &quot;net.ipv4.tcp_wmem=4096 65536 16777216&quot; &gt;&gt; /etc/sysctl.conf
echo &quot;net.ipv4.tcp_max_syn_backlog=8192&quot; &gt;&gt; /etc/sysctl.conf  # SYNé˜Ÿåˆ—é•¿åº¦

# åº”ç”¨å†…æ ¸å‚æ•°
sysctl -p

# 2. æ–‡ä»¶ç³»ç»Ÿä¼˜åŒ–
# è®¾ç½®æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
echo &quot;kafka soft nofile 100000&quot; &gt;&gt; /etc/security/limits.conf
echo &quot;kafka hard nofile 100000&quot; &gt;&gt; /etc/security/limits.conf

# 3. ç£ç›˜è°ƒåº¦å™¨ä¼˜åŒ–
# å¯¹äºSSDä½¿ç”¨noopè°ƒåº¦å™¨
echo noop &gt; /sys/block/sda/queue/scheduler

# 4. CPUè°ƒåº¦ä¼˜åŒ–
# è®¾ç½®CPUäº²å’Œæ€§
taskset -cp 0-3 $(pgrep -f kafka)  # å°†Kafkaè¿›ç¨‹ç»‘å®šåˆ°CPU 0-3
</div></section><section class="chapter"><h3 id="q4" data-toc="q4">Q4: å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­æ¶ˆæ¯é˜Ÿåˆ—çš„æ€§èƒ½é—®é¢˜ï¼Ÿ</h3><p id="ly8a1z_40"><span class="control" id="ly8a1z_45">ç­”æ¡ˆï¼š</span></p><p id="ly8a1z_41"><span class="control" id="ly8a1z_46">æ€§èƒ½ç›‘æ§ä½“ç³»ï¼š</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1052.46875 474"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1052.46875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="æ€§èƒ½ç›‘æ§ä½“ç³»" class="cluster"><rect height="458" width="1036.46875" y="8" x="8" style=""></rect><g transform="translate(478.15625, 8)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>æ€§èƒ½ç›‘æ§ä½“ç³»</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_A1_0" d="M169.609,368L175.859,368C182.109,368,194.609,368,203.984,368C213.359,368,219.609,368,225.193,368C230.776,368,235.693,368,238.151,368L240.609,368"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_B1_1" d="M368.719,228L374.969,228C381.219,228,393.719,228,403.094,229.823C412.469,231.645,418.719,235.291,424.393,238.6C430.067,241.91,435.165,244.883,437.714,246.37L440.264,247.857"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_C1_2" d="M588.289,158L597.949,158C607.609,158,626.93,158,639.715,160.197C652.5,162.395,658.75,166.789,664.455,170.8C670.159,174.811,675.319,178.439,677.898,180.253L680.478,182.067"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_D1_3" d="M807.859,88L814.109,88C820.359,88,832.859,88,842.234,90.197C851.609,92.395,857.859,96.789,863.564,100.8C869.269,104.811,874.428,108.439,877.008,110.253L879.587,112.067"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A1_B1_4" d="M368.719,368L374.969,368C381.219,368,393.719,368,403.094,366.177C412.469,364.355,418.719,360.709,424.393,357.4C430.067,354.09,435.165,351.117,437.714,349.63L440.264,348.143"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B1_C1_5" d="M608.75,298L615,298C621.25,298,633.75,298,643.125,295.803C652.5,293.605,658.75,289.211,664.455,285.2C670.159,281.189,675.319,277.561,677.898,275.747L680.478,273.933"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C1_D1_6" d="M807.859,228L814.109,228C820.359,228,832.859,228,842.234,225.803C851.609,223.605,857.859,219.211,863.564,215.2C869.269,211.189,874.428,207.561,877.008,205.747L879.587,203.933"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(107.5546875, 368)" id="flowchart-A-10669" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>æŒ‡æ ‡æ”¶é›†</p></span></div></foreignObject></g></g><g transform="translate(306.6640625, 368)" id="flowchart-A1-10670" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JVMæŒ‡æ ‡<br>ç³»ç»ŸæŒ‡æ ‡<br>ä¸šåŠ¡æŒ‡æ ‡<br>ç½‘ç»œæŒ‡æ ‡</p></span></div></foreignObject></g></g><g transform="translate(306.6640625, 228)" id="flowchart-B-10671" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ç›‘æ§å·¥å…·</p></span></div></foreignObject></g></g><g transform="translate(526.234375, 298)" id="flowchart-B1-10672" class="node default"><rect height="126" width="165.03125" y="-63" x="-82.515625" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-52.515625, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="105.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Prometheus<br>Grafana<br>JMX Exporter<br>Kafka Manager</p></span></div></foreignObject></g></g><g transform="translate(526.234375, 158)" id="flowchart-C-10673" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>å‘Šè­¦è§„åˆ™</p></span></div></foreignObject></g></g><g transform="translate(745.8046875, 228)" id="flowchart-C1-10674" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>é˜ˆå€¼å‘Šè­¦<br>è¶‹åŠ¿å‘Šè­¦<br>å¼‚å¸¸æ£€æµ‹<br>æ™ºèƒ½å‘Šè­¦</p></span></div></foreignObject></g></g><g transform="translate(745.8046875, 88)" id="flowchart-D-10675" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>é—®é¢˜è¯Šæ–­</p></span></div></foreignObject></g></g><g transform="translate(944.9140625, 158)" id="flowchart-D1-10676" class="node default"><rect height="126" width="124.109375" y="-63" x="-62.0546875" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>æ€§èƒ½åˆ†æ<br>ç“¶é¢ˆè¯†åˆ«<br>æ ¹å› åˆ†æ<br>ä¼˜åŒ–å»ºè®®</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="ly8a1z_43"><span class="control" id="ly8a1z_47">æ€§èƒ½ç›‘æ§å®ç°ï¼š</span></p><div class="code-block" data-lang="java">
// æ€§èƒ½ç›‘æ§å™¨
public class MessageQueuePerformanceMonitor {
    
    private final MeterRegistry meterRegistry;
    private final Timer sendLatencyTimer;
    private final Timer processLatencyTimer;
    private final Counter successCounter;
    private final Counter errorCounter;
    private final Gauge queueSizeGauge;
    
    public MessageQueuePerformanceMonitor(MeterRegistry meterRegistry) {
        this.meterRegistry = meterRegistry;
        
        // åˆ›å»ºæŒ‡æ ‡
        this.sendLatencyTimer = Timer.builder(&quot;mq.send.latency&quot;)
            .description(&quot;æ¶ˆæ¯å‘é€å»¶è¿Ÿ&quot;)
            .register(meterRegistry);
            
        this.processLatencyTimer = Timer.builder(&quot;mq.process.latency&quot;)
            .description(&quot;æ¶ˆæ¯å¤„ç†å»¶è¿Ÿ&quot;)
            .register(meterRegistry);
            
        this.successCounter = Counter.builder(&quot;mq.messages.success&quot;)
            .description(&quot;æˆåŠŸå¤„ç†çš„æ¶ˆæ¯æ•°&quot;)
            .register(meterRegistry);
            
        this.errorCounter = Counter.builder(&quot;mq.messages.error&quot;)
            .description(&quot;å¤„ç†å¤±è´¥çš„æ¶ˆæ¯æ•°&quot;)
            .register(meterRegistry);
            
        this.queueSizeGauge = Gauge.builder(&quot;mq.queue.size&quot;)
            .description(&quot;é˜Ÿåˆ—å¤§å°&quot;)
            .register(meterRegistry, this, MessageQueuePerformanceMonitor::getQueueSize);
    }
    
    // ç›‘æ§ç”Ÿäº§è€…æ€§èƒ½
    public void monitorProducer(Producer&lt;String, String&gt; producer) {
        ProducerInterceptor&lt;String, String&gt; interceptor = new ProducerInterceptor&lt;String, String&gt;() {
            @Override
            public ProducerRecord&lt;String, String&gt; onSend(ProducerRecord&lt;String, String&gt; record) {
                // è®°å½•å‘é€å¼€å§‹æ—¶é—´
                record.headers().add(&quot;send.start.time&quot;, 
                    String.valueOf(System.nanoTime()).getBytes());
                return record;
            }
            
            @Override
            public void onAcknowledgement(RecordMetadata metadata, Exception exception) {
                if (exception == null) {
                    successCounter.increment();
                    
                    // è®¡ç®—å‘é€å»¶è¿Ÿ
                    // æ³¨æ„ï¼šè¿™é‡Œéœ€è¦ä»æ¶ˆæ¯å¤´ä¸­è·å–å¼€å§‹æ—¶é—´
                    // å®é™…å®ç°ä¸­éœ€è¦ç»´æŠ¤ä¸€ä¸ªå‘é€æ—¶é—´æ˜ å°„
                    
                } else {
                    errorCounter.increment();
                }
            }
            
            @Override
            public void close() {}
            
            @Override
            public void configure(Map&lt;String, ?&gt; configs) {}
        };
        
        // æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆæ³¨æ„ï¼šè¿™é‡Œæ˜¯ç¤ºä¾‹ï¼Œå®é™…å®ç°éœ€è¦åœ¨é…ç½®ä¸­æ·»åŠ ï¼‰
    }
    
    // ç›‘æ§æ¶ˆè´¹è€…æ€§èƒ½
    public void monitorConsumer() {
        // ä½¿ç”¨AOPæˆ–è£…é¥°å™¨æ¨¡å¼ç›‘æ§æ¶ˆè´¹è€…
        Timer.Sample sample = Timer.start(meterRegistry);
        
        try {
            // æ¶ˆè´¹è€…å¤„ç†é€»è¾‘
            processMessage();
            
            successCounter.increment();
            
        } catch (Exception e) {
            errorCounter.increment();
            
        } finally {
            sample.stop(processLatencyTimer);
        }
    }
    
    // è·å–é˜Ÿåˆ—å¤§å°ï¼ˆç¤ºä¾‹å®ç°ï¼‰
    private double getQueueSize() {
        // å®é™…å®ç°ä¸­ä»ç®¡ç†APIè·å–é˜Ÿåˆ—å¤§å°
        return getCurrentQueueSize();
    }
    
    // æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ
    public PerformanceReport generateReport() {
        double avgSendLatency = sendLatencyTimer.mean(TimeUnit.MILLISECONDS);
        double avgProcessLatency = processLatencyTimer.mean(TimeUnit.MILLISECONDS);
        double successRate = successCounter.count() / (successCounter.count() + errorCounter.count());
        double throughput = sendLatencyTimer.count() / 60.0; // æ¯åˆ†é’Ÿæ¶ˆæ¯æ•°
        
        return PerformanceReport.builder()
            .avgSendLatencyMs(avgSendLatency)
            .avgProcessLatencyMs(avgProcessLatency)
            .successRate(successRate)
            .throughputPerMinute(throughput)
            .queueSize(getQueueSize())
            .timestamp(System.currentTimeMillis())
            .build();
    }
    
    // æ€§èƒ½å¼‚å¸¸æ£€æµ‹
    public List&lt;PerformanceIssue&gt; detectIssues() {
        List&lt;PerformanceIssue&gt; issues = new ArrayList&lt;&gt;();
        
        // æ£€æµ‹é«˜å»¶è¿Ÿ
        if (sendLatencyTimer.max(TimeUnit.MILLISECONDS) &gt; 1000) {
            issues.add(new PerformanceIssue(
                IssueType.HIGH_LATENCY,
                &quot;å‘é€å»¶è¿Ÿè¿‡é«˜: &quot; + sendLatencyTimer.max(TimeUnit.MILLISECONDS) + &quot;ms&quot;,
                IssueSeverity.WARNING
            ));
        }
        
        // æ£€æµ‹ä½æˆåŠŸç‡
        double successRate = successCounter.count() / (successCounter.count() + errorCounter.count());
        if (successRate &lt; 0.95) {
            issues.add(new PerformanceIssue(
                IssueType.LOW_SUCCESS_RATE,
                &quot;æˆåŠŸç‡è¿‡ä½: &quot; + String.format(&quot;%.2f%%&quot;, successRate * 100),
                IssueSeverity.CRITICAL
            ));
        }
        
        // æ£€æµ‹é˜Ÿåˆ—å †ç§¯
        if (getQueueSize() &gt; 10000) {
            issues.add(new PerformanceIssue(
                IssueType.QUEUE_BACKLOG,
                &quot;é˜Ÿåˆ—å †ç§¯: &quot; + getQueueSize() + &quot; æ¡æ¶ˆæ¯&quot;,
                IssueSeverity.WARNING
            ));
        }
        
        return issues;
    }
}

// è‡ªåŠ¨åŒ–æ€§èƒ½è°ƒä¼˜
public class AutoPerformanceTuner {
    
    private final MessageQueuePerformanceMonitor monitor;
    private final ConfigurationManager configManager;
    
    // æ ¹æ®æ€§èƒ½æŒ‡æ ‡è‡ªåŠ¨è°ƒä¼˜
    public void autoTune() {
        PerformanceReport report = monitor.generateReport();
        
        // ååé‡ä¼˜åŒ–
        if (report.getThroughputPerMinute() &lt; getTargetThroughput()) {
            optimizeForThroughput();
        }
        
        // å»¶è¿Ÿä¼˜åŒ–
        if (report.getAvgSendLatencyMs() &gt; getTargetLatency()) {
            optimizeForLatency();
        }
        
        // é˜Ÿåˆ—å †ç§¯å¤„ç†
        if (report.getQueueSize() &gt; getMaxQueueSize()) {
            handleQueueBacklog();
        }
    }
    
    private void optimizeForThroughput() {
        // å¢åŠ æ‰¹é‡å¤§å°
        configManager.updateConfig(&quot;batch.size&quot;, 32768);
        // å¢åŠ ç¼“å†²åŒºå¤§å°
        configManager.updateConfig(&quot;buffer.memory&quot;, 134217728);
        // å¢åŠ æ¶ˆè´¹è€…çº¿ç¨‹æ•°
        configManager.updateConfig(&quot;consumer.threads&quot;, 
                                 Runtime.getRuntime().availableProcessors() * 2);
    }
    
    private void optimizeForLatency() {
        // å‡å°‘æ‰¹é‡ç­‰å¾…æ—¶é—´
        configManager.updateConfig(&quot;linger.ms&quot;, 0);
        // å‡å°‘æ‰¹é‡å¤§å°
        configManager.updateConfig(&quot;batch.size&quot;, 1024);
        // å¢åŠ ç½‘ç»œç¼“å†²åŒº
        configManager.updateConfig(&quot;send.buffer.bytes&quot;, 131072);
    }
    
    private void handleQueueBacklog() {
        // å¢åŠ æ¶ˆè´¹è€…å®ä¾‹
        configManager.scaleConsumers(getOptimalConsumerCount());
        // å¢åŠ åˆ†åŒºæ•°
        configManager.increasePartitions();
        // ä¸´æ—¶é™ä½æ¶ˆæ¯æŒä¹…åŒ–çº§åˆ«
        configManager.updateConfig(&quot;acks&quot;, &quot;1&quot;);
    }
}
</div></section></section><section class="chapter"><h2 id="ly8a1z_7" data-toc="ly8a1z_7">ğŸ’¡ é¢è¯•æŠ€å·§</h2><section class="chapter"><h3 id="ly8a1z_48" data-toc="ly8a1z_48">é«˜é¢‘è€ƒç‚¹</h3><ol class="list _decimal" id="ly8a1z_50" type="1"><li class="list__item" id="ly8a1z_51"><p id="ly8a1z_56"><span class="control" id="ly8a1z_57">ååé‡ä¼˜åŒ–</span>: æ‰¹é‡å¤„ç†ã€å¹¶å‘æ§åˆ¶ã€å‹ç¼©ç®—æ³•</p></li><li class="list__item" id="ly8a1z_52"><p id="ly8a1z_58"><span class="control" id="ly8a1z_59">å»¶è¿Ÿä¼˜åŒ–</span>: ç½‘ç»œä¼˜åŒ–ã€åºåˆ—åŒ–ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥</p></li><li class="list__item" id="ly8a1z_53"><p id="ly8a1z_60"><span class="control" id="ly8a1z_61">ç³»ç»Ÿè°ƒä¼˜</span>: JVMè°ƒä¼˜ã€æ“ä½œç³»ç»Ÿè°ƒä¼˜ã€èµ„æºé…ç½®</p></li><li class="list__item" id="ly8a1z_54"><p id="ly8a1z_62"><span class="control" id="ly8a1z_63">æ€§èƒ½ç›‘æ§</span>: å…³é”®æŒ‡æ ‡ã€ç›‘æ§å·¥å…·ã€é—®é¢˜è¯Šæ–­</p></li><li class="list__item" id="ly8a1z_55"><p id="ly8a1z_64"><span class="control" id="ly8a1z_65">æ•…éšœå¤„ç†</span>: æ€§èƒ½ç“¶é¢ˆè¯†åˆ«ã€æ ¹å› åˆ†æã€è§£å†³æ–¹æ¡ˆ</p></li></ol></section><section class="chapter"><h3 id="ly8a1z_49" data-toc="ly8a1z_49">å›ç­”ç­–ç•¥</h3><ol class="list _decimal" id="ly8a1z_66" type="1"><li class="list__item" id="ly8a1z_69"><p id="ly8a1z_73"><span class="control" id="ly8a1z_74">åˆ†å±‚ä¼˜åŒ–</span>: ä»åº”ç”¨ã€ä¸­é—´ä»¶ã€ç³»ç»Ÿå¤šå±‚é¢åˆ†æ</p></li><li class="list__item" id="ly8a1z_70"><p id="ly8a1z_75"><span class="control" id="ly8a1z_76">é‡åŒ–æŒ‡æ ‡</span>: ç”¨å…·ä½“æ•°æ®è¯´æ˜ä¼˜åŒ–æ•ˆæœ</p></li><li class="list__item" id="ly8a1z_71"><p id="ly8a1z_77"><span class="control" id="ly8a1z_78">æƒè¡¡åˆ†æ</span>: è¯´æ˜æ€§èƒ½å’Œå¯é æ€§çš„æƒè¡¡</p></li><li class="list__item" id="ly8a1z_72"><p id="ly8a1z_79"><span class="control" id="ly8a1z_80">å®è·µç»éªŒ</span>: åˆ†äº«å®é™…ä¼˜åŒ–æ¡ˆä¾‹å’Œç»éªŒæ•™è®­</p></li></ol><p id="ly8a1z_68"><span class="control" id="ly8a1z_81">å­¦ä¹ å»ºè®®</span>: æ€§èƒ½ä¼˜åŒ–éœ€è¦æ·±å…¥ç†è§£æ¶ˆæ¯é˜Ÿåˆ—çš„å·¥ä½œåŸç†å’Œç³»ç»Ÿåº•å±‚æœºåˆ¶ã€‚å»ºè®®é€šè¿‡å‹åŠ›æµ‹è¯•å’Œæ€§èƒ½åˆ†æå·¥å…·æ¥éªŒè¯ä¼˜åŒ–æ•ˆæœï¼Œç§¯ç´¯å®æˆ˜ç»éªŒã€‚</p></section></section><div class="last-modified">09 å…­æœˆ 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡ä¸é€‰å‹qa.html" class="navigation-links__prev">æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡ä¸é€‰å‹QA</a><a href="mysqlé¢è¯•å¤§çº².html" class="navigation-links__next">MySQLé¢è¯•å¤§çº²</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>