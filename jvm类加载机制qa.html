<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-06-10T01:07:32.154058"><title>JVM类加载机制QA | 技术知识库</title><script type="application/json" id="virtual-toc-data">[{"id":"mro3af_4","level":0,"title":"📋 知识结构","anchor":"#mro3af_4"},{"id":"mro3af_5","level":0,"title":"🔄 类加载过程详解","anchor":"#mro3af_5"},{"id":"mro3af_6","level":0,"title":"🏗️ 类加载器体系","anchor":"#mro3af_6"},{"id":"mro3af_7","level":0,"title":"🔥 类的生命周期","anchor":"#mro3af_7"},{"id":"mro3af_8","level":0,"title":"💡 面试技巧","anchor":"#mro3af_8"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="JVM类加载机制QA | 技术知识库"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="技术知识库 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/jvm类加载机制qa.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="JVM类加载机制QA | 技术知识库"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/jvm类加载机制qa.html#webpage",
    "url": "writerside-documentation/jvm类加载机制qa.html",
    "name": "JVM类加载机制QA | 技术知识库",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "技术知识库 Help"
}</script><!-- End Schema.org --></head><body data-id="JVM类加载机制QA" data-main-title="JVM类加载机制QA" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="JVM面试大纲.md|JVM面试大纲"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>技术知识库  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="JVM类加载机制QA" id="JVM类加载机制QA.md">JVM类加载机制QA</h1><p id="mro3af_3">本文档深入解析JVM类加载机制，涵盖类加载过程、类加载器、双亲委派模型、热部署等内容。</p><section class="chapter"><h2 id="mro3af_4" data-toc="mro3af_4">📋 知识结构</h2><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="5 5 897.306884765625 450.8711242675781" style="max-width: 897.306884765625px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 627.0229652773164,237.1811902301611 L 647.2179926680587,267.26931848137855 L667.4130200588011,297.35744673259603"></path><path class="edge section-edge-0 edge-depth-1" d="M 633.2285914115046,221.14091336045632 L 708.6979177074936,202.56201800327867 L784.1672440034829,183.983122646101"></path><path class="edge section-edge-0 edge-depth-1" d="M 606.0248123688101,232.80519746014843 L 569.0825698797328,256.4188191618539 L532.1403273906553,280.0324408635594"></path><path class="edge section-edge-0 edge-depth-1" d="M 623.8408452617016,210.64837244393124 L 635.4973386654458,178.95251489857216 L647.15383206919,147.2566573532131"></path><path class="edge section-edge-0 edge-depth-1" d="M 633.4025283246607,227.51213380842705 L 715.4282104828628,243.01451971087124 L797.453892641065,258.51690561331543"></path><path class="edge section-edge-0 edge-depth-0" d="M 429.7959305785323,229.8626611389278 L 516.7324621090779,227.4984788749155 L603.6689936396234,225.1342966109032"></path><path class="edge section-edge-1 edge-depth-1" d="M 406.86622027790287,349.3427059447613 L 422.1218922554141,381.38525233920905 L437.3775642329253,413.4277987336569"></path><path class="edge section-edge-1 edge-depth-1" d="M 385.42037744260364,335.54035221071945 L 324.69855749882436,334.49170930018795 L263.9767375550451,333.44306638965645"></path><path class="edge section-edge-1 edge-depth-1" d="M 415.0214577493696,339.226185050015 L 488.2976014367697,356.4212293887202 L561.5737451241697,373.6162737274254"></path><path class="edge section-edge-1 edge-depth-1" d="M 387.68234132310977,343.7239653592519 L 344.1589550865757,370.8055585707091 L300.63556885004164,397.88715178216614"></path><path class="edge section-edge-1 edge-depth-0" d="M 412.77574050166317,245.1330096260263 L 407.60980757099674,283.03489176659025 L402.4438746403303,320.93677390715425"></path><path class="edge section-edge-2 edge-depth-1" d="M 205.9967645337056,263.19574520816656 L 163.06608450892037,289.3938320872935 L120.13540448413514,315.5919189664205"></path><path class="edge section-edge-2 edge-depth-1" d="M 203.8265950174183,254.50523523469644 L 138.17781534835223,250.66097568139418 L72.52903567928615,246.81671612809197"></path><path class="edge section-edge-2 edge-depth-1" d="M 207.56184681206395,245.44818545415765 L 176.9026265703754,218.34937366179744 L146.24340632868683,191.25056186943723"></path><path class="edge section-edge-2 edge-depth-1" d="M 228.41396164595133,243.86733498250234 L 249.3559311484899,218.7824028891895 L270.2979006510285,193.69747079587668"></path><path class="edge section-edge-2 edge-depth-0" d="M 399.92309017782827,232.17665090451237 L 316.80120859743124,242.82626416751782 L233.67932701703413,253.4758774305232"></path><path class="edge section-edge-3 edge-depth-1" d="M 384.9971549840626,120.46019292809946 L 449.403940192629,100.08315845065184 L513.8107254011954,79.70612397320421"></path><path class="edge section-edge-3 edge-depth-1" d="M 384.9402412616545,129.6856031813625 L 441.46263636628925,148.33841557584324 L497.985031470924,166.991227970324"></path><path class="edge section-edge-3 edge-depth-1" d="M 359.7474222172092,114.73145194770166 L 329.0089111684116,85.94428245543727 L298.270400119614,57.15711296317289"></path><path class="edge section-edge-3 edge-depth-1" d="M 376.76649734994965,111.26817101350875 L 390.851770892817,79.4424227303135 L404.93704443568436,47.61667444711824"></path><path class="edge section-edge-3 edge-depth-1" d="M 355.7915976592741,123.29266769017319 L 290.5128181823379,115.8811352246997 L225.23403870540173,108.46960275922622"></path><path class="edge section-edge-3 edge-depth-0" d="M 409.00575809547325,216.4353369824736 L 392.7486585865814,177.62763553249198 L376.4915590776896,138.81993408251043"></path></g><g class="mindmap-nodes"><g transform="translate(350.5124114981579, 211.37042560435702)" class="mindmap-node section--1 section-root"><g transform="translate(64.2890625, 18.9)"><circle r="64.2890625" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(64.2890625, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">JVM类加载机制</tspan></tspan></text></g></g></g><g transform="translate(567.6154498843044, 205.82653214547395)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-1"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">类加载过程</tspan></tspan></text></g></g></g><g transform="translate(357.38214184573985, 316.8993579288235)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-7"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">类加载器</tspan></tspan></text></g></g></g><g transform="translate(160.22281819670445, 236.48210273067855)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h107.15625 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-12"></path><line y2="37.8" x2="117.15625" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(58.578125, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">双亲委派模型</tspan></tspan></text></g></g></g><g transform="translate(312.11771817500494, 106.08484546062698)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h107.15625 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-17"></path><line y2="37.8" x2="117.15625" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(58.578125, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">类的生命周期</tspan></tspan></text></g></g></g><g transform="translate(621.4912851161197, 290.9121048172832)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h98.5625 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-2"></path><line y2="37.8" x2="108.5625" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(54.28125, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">加载Loading</tspan></tspan></text></g></g></g><g transform="translate(730.4904342062201, 161.49750386108337)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h126.48390197753906 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-3"></path><line y2="37.8" x2="136.48390197753906" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(68.24195098876953, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">验证Verification</tspan></tspan></text></g></g></g><g transform="translate(451.58033333829576, 269.2111061782339)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h125.84271240234375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-4"></path><line y2="37.8" x2="135.84271240234375" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(67.92135620117188, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">准备Preparation</tspan></tspan></text></g></g></g><g transform="translate(588.4960906973196, 114.27849765167036)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h117.67027282714844 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-5"></path><line y2="37.8" x2="127.67027282714844" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(63.83513641357422, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">解析Resolution</tspan></tspan></text></g></g></g><g transform="translate(732.0790867735599, 242.40250727626855)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h150.22776794433594 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-6"></path><line y2="37.8" x2="160.22776794433594" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(80.11388397216797, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">初始化Initialization</tspan></tspan></text></g></g></g><g transform="translate(384.7656419937016, 408.07114674959473)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h108.12000274658203 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-8"></path><line y2="37.8" x2="118.12000274658203" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(59.060001373291016, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">启动类加载器</tspan></tspan></text></g></g></g><g transform="translate(189.91897248052214, 314.2840606715524)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h108.12000274658203 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-9"></path><line y2="37.8" x2="118.12000274658203" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(59.060001373291016, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">扩展类加载器</tspan></tspan></text></g></g></g><g transform="translate(501.09306209591466, 358.1431008486169)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h140.16799926757812 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-10"></path><line y2="37.8" x2="150.16799926757812" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(75.08399963378906, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">应用程序类加载器</tspan></tspan></text></g></g></g><g transform="translate(221.32776661842718, 386.9117592125946)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h123.14400482177734 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-11"></path><line y2="37.8" x2="133.14400482177734" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(66.57200241088867, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">自定义类加载器</tspan></tspan></text></g></g></g><g transform="translate(64.77653832113629, 304.5055614439085)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-13"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">委派机制</tspan></tspan></text></g></g></g><g transform="translate(15, 227.03984863210985)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-14"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">优势特点</tspan></tspan></text></g></g></g><g transform="translate(92.44962244404633, 162.41664459291633)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-15"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">破坏场景</tspan></tspan></text></g></g></g><g transform="translate(243.30935660027535, 163.28270304770047)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h63.203125 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-16"></path><line y2="37.8" x2="73.203125" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(36.6015625, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">SPI机制</tspan></tspan></text></g></g></g><g transform="translate(485.0760379121574, 56.28147144067669)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-18"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">加载阶段</tspan></tspan></text></g></g></g><g transform="translate(469.19343025947785, 152.7919856910595)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-19"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">连接阶段</tspan></tspan></text></g></g></g><g transform="translate(236.2739788261249, 28.00371945024756)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-20"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">初始化阶段</tspan></tspan></text></g></g></g><g transform="translate(367.97169931253336, 15)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-21"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">使用阶段</tspan></tspan></text></g></g></g><g transform="translate(167.2937938915752, 87.87742498877242)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-22"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">卸载阶段</tspan></tspan></text></g></g></g></g></svg></section><section class="chapter"><h2 id="mro3af_5" data-toc="mro3af_5">🔄 类加载过程详解</h2><section class="chapter"><h3 id="q1" data-toc="q1">Q1: 类加载的完整过程是怎样的？各个阶段做了什么？</h3><p id="mro3af_15"><span class="control" id="mro3af_19">答案：</span></p><p id="mro3af_16"><span class="control" id="mro3af_20">类加载完整流程：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 266.46875 848"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="266.46875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph0" class="cluster"><rect height="312" width="250.46875" y="216" x="8" style=""></rect><g transform="translate(73.2734375, 216)" class="cluster-label"><foreignObject height="24" width="119.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>连接阶段 Linking</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M133.234,62L133.234,66.167C133.234,70.333,133.234,78.667,133.234,84.917C133.234,91.167,133.234,95.333,133.234,98.833C133.234,102.333,133.234,105.167,133.234,106.583L133.234,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M133.234,166L133.234,170.167C133.234,174.333,133.234,182.667,133.234,191C133.234,199.333,133.234,207.667,133.234,213.917C133.234,220.167,133.234,224.333,133.234,227.833C133.234,231.333,133.234,234.167,133.234,235.583L133.234,237"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M133.234,295L133.234,299.167C133.234,303.333,133.234,311.667,133.234,317.917C133.234,324.167,133.234,328.333,133.234,331.833C133.234,335.333,133.234,338.167,133.234,339.583L133.234,341"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M133.234,399L133.234,403.167C133.234,407.333,133.234,415.667,133.234,421.917C133.234,428.167,133.234,432.333,133.234,435.833C133.234,439.333,133.234,442.167,133.234,443.583L133.234,445"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_4" d="M133.234,503L133.234,507.167C133.234,511.333,133.234,519.667,133.234,528C133.234,536.333,133.234,544.667,133.234,550.917C133.234,557.167,133.234,561.333,133.234,564.833C133.234,568.333,133.234,571.167,133.234,572.583L133.234,574"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_5" d="M133.234,632L133.234,636.167C133.234,640.333,133.234,648.667,133.234,654.917C133.234,661.167,133.234,665.333,133.234,668.833C133.234,672.333,133.234,675.167,133.234,676.583L133.234,678"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_6" d="M133.234,736L133.234,740.167C133.234,744.333,133.234,752.667,133.234,758.917C133.234,765.167,133.234,769.333,133.234,772.833C133.234,776.333,133.234,779.167,133.234,780.583L133.234,782"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(133.234375, 35)" id="flowchart-A-5841" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类加载开始</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 139)" id="flowchart-B-5842" class="node default"><rect height="54" width="152.40625" y="-27" x="-76.203125" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-46.203125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="92.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>加载 Loading</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 268)" id="flowchart-C-5844" class="node default"><rect height="54" width="180.109375" y="-27" x="-90.0546875" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-60.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>验证 Verification</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 372)" id="flowchart-D-5846" class="node default"><rect height="54" width="180.46875" y="-27" x="-90.234375" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-60.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>准备 Preparation</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 476)" id="flowchart-E-5848" class="node default"><rect height="54" width="171.28125" y="-27" x="-85.640625" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-55.640625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="111.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>解析 Resolution</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 605)" id="flowchart-F-5850" class="node default"><rect height="54" width="203.84375" y="-27" x="-101.921875" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-71.921875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="143.84375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>初始化 Initialization</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 709)" id="flowchart-G-5852" class="node default"><rect height="54" width="92.0625" y="-27" x="-46.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>使用</p></span></div></foreignObject></g></g><g transform="translate(133.234375, 813)" id="flowchart-H-5854" class="node default"><rect height="54" width="92.0625" y="-27" x="-46.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>卸载</p></span></div></foreignObject></g></g></g></g></g></svg><p id="mro3af_18"><span class="control" id="mro3af_21">各阶段详细说明：</span></p></section><section class="chapter"><h3 id="q2-loading" data-toc="q2-loading">Q2: 加载（Loading）阶段具体做了什么工作？</h3><p id="mro3af_22"><span class="control" id="mro3af_29">答案：</span></p><p id="mro3af_23"><span class="control" id="mro3af_30">加载阶段的工作内容：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1653.171875 676"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1653.171875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="字节流来源" class="cluster"><rect height="660" width="247.171875" y="8" x="8" style=""></rect><g transform="translate(91.5234375, 8)" class="cluster-label"><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>字节流来源</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(131.5859375, 82)" id="flowchart-E-5885" class="node default"><rect height="78" width="165.578125" y="-39" x="-82.7890625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-52.7890625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="105.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从ZIP包中读取<br>JAR、WAR文件</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 210)" id="flowchart-F-5886" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从网络中获取<br>Web Applet</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 338)" id="flowchart-G-5887" class="node default"><rect height="78" width="172.171875" y="-39" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>运行时计算生成<br>动态代理</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 466)" id="flowchart-H-5888" class="node default"><rect height="78" width="172.171875" y="-39" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从数据库中读取<br>特殊存储</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 594)" id="flowchart-I-5889" class="node default"><rect height="78" width="172.171875" y="-39" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从其他文件生成<br>JSP转换</p></span></div></foreignObject></g></g></g></g><g transform="translate(297.171875, 244)" class="root"><g class="clusters"><g data-look="classic" id="加载阶段工作" class="cluster"><rect height="172" width="1340" y="8" x="8" style=""></rect><g transform="translate(629.921875, 8)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>加载阶段工作</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M305.5,94L311.75,94C318,94,330.5,94,339.875,94C349.25,94,355.5,94,361.083,94C366.667,94,371.583,94,374.042,94L376.5,94"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M640.5,94L646.75,94C653,94,665.5,94,674.875,94C684.25,94,690.5,94,696.083,94C701.667,94,706.583,94,709.042,94L711.5,94"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M975.5,94L981.75,94C988,94,1000.5,94,1009.875,94C1019.25,94,1025.5,94,1031.083,94C1036.667,94,1041.583,94,1044.042,94L1046.5,94"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(175.5, 94)" id="flowchart-A-5879" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>通过类全限定名获取二进制字节流</p></span></div></foreignObject></g></g><g transform="translate(510.5, 94)" id="flowchart-B-5880" class="node default"><rect height="102" width="260" y="-51" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>将字节流代表的静态存储结构转化为方法区的运行时数据结构</p></span></div></foreignObject></g></g><g transform="translate(845.5, 94)" id="flowchart-C-5882" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>在内存中生成代表该类的Class对象</p></span></div></foreignObject></g></g><g transform="translate(1180.5, 94)" id="flowchart-D-5884" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>作为方法区这个类的各种数据的访问入口</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_25"><span class="control" id="mro3af_31">加载阶段特点：</span></p><ol class="list _decimal" id="mro3af_26" type="1"><li class="list__item" id="mro3af_32"><p id="mro3af_35"><span class="control" id="mro3af_36">非数组类加载</span> ：由类加载器完成</p></li><li class="list__item" id="mro3af_33"><p id="mro3af_37"><span class="control" id="mro3af_38">数组类加载</span> ：由JVM直接创建</p></li><li class="list__item" id="mro3af_34"><p id="mro3af_39"><span class="control" id="mro3af_40">加载与连接交叉进行</span> ：不是严格按顺序</p></li></ol><p id="mro3af_27"><span class="control" id="mro3af_41">数组类加载规则：</span></p><div class="code-block" data-lang="java">
// 数组类加载示例
String[] strArray;    // 由启动类加载器加载
MyClass[] myArray;    // 由加载MyClass的类加载器加载
int[] intArray;       // 由JVM直接创建，没有对应的类加载器
</div></section><section class="chapter"><h3 id="q3-verification" data-toc="q3-verification">Q3: 验证（Verification）阶段为什么重要？包含哪些验证？</h3><p id="mro3af_42"><span class="control" id="mro3af_48">答案：</span></p><p id="mro3af_43"><span class="control" id="mro3af_49">验证阶段的重要性：</span> 确保Class文件的字节流中包含的信息符合JVM规范，不会危害虚拟机自身的安全。</p><p id="mro3af_44"><span class="control" id="mro3af_50">四种验证类型：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 2607.8984375 345"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="2607.8984375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="验证内容详解" class="cluster"><rect height="152" width="901.296875" y="185" x="1698.6015625" style=""></rect><g transform="translate(2101.171875, 185)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>验证内容详解</p></span></div></foreignObject></g></g><g data-look="classic" id="验证阶段" class="cluster"><rect height="329" width="1670.6015625" y="8" x="8" style=""></rect><g transform="translate(811.24609375, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>验证阶段</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M526.676,102.696L467.73,112.247C408.784,121.797,290.892,140.899,231.946,154.616C173,168.333,173,176.667,173,183.917C173,191.167,173,197.333,173,202.833C173,208.333,173,213.167,173,215.583L173,218"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M825.977,102.145L768.814,111.788C711.651,121.43,597.326,140.715,540.163,154.524C483,168.333,483,176.667,483,183.917C483,191.167,483,197.333,483,202.833C483,208.333,483,213.167,483,215.583L483,218"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M1113.73,103.039L1060.275,112.533C1006.82,122.026,899.91,141.013,846.455,154.673C793,168.333,793,176.667,793,183.917C793,191.167,793,197.333,793,202.833C793,208.333,793,213.167,793,215.583L793,218"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M1383.602,107.386L1334.857,116.155C1286.112,124.924,1188.622,142.462,1139.878,155.398C1091.133,168.333,1091.133,176.667,1091.133,184.917C1091.133,193.167,1091.133,201.333,1091.133,208.833C1091.133,216.333,1091.133,223.167,1091.133,226.583L1091.133,230"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_I_4" d="M757.457,101.485L821.82,111.237C886.182,120.99,1014.908,140.495,1079.27,154.414C1143.633,168.333,1143.633,176.667,1192.797,186.325C1241.961,195.984,1340.289,206.967,1437.955,217.877C1535.62,228.787,1632.623,239.622,1681.125,245.04L1729.626,250.458"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_J_5" d="M1041.117,106.928L1082.617,115.773C1124.116,124.619,1207.115,142.309,1248.614,155.321C1290.113,168.333,1290.113,176.667,1346.304,186.45C1402.494,196.233,1514.875,207.465,1626.592,218.632C1738.31,229.798,1849.364,240.898,1904.891,246.448L1960.418,251.998"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_K_6" d="M1328.137,122.51L1345.531,128.758C1362.924,135.007,1397.712,147.503,1415.106,157.918C1432.5,168.333,1432.5,176.667,1495.339,186.572C1558.178,196.478,1683.857,207.956,1808.871,219.374C1933.886,230.791,2058.236,242.148,2120.412,247.827L2182.587,253.505"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_L_7" d="M1562.253,135L1566.228,139.167C1570.202,143.333,1578.152,151.667,1582.127,160C1586.102,168.333,1586.102,176.667,1653.32,186.556C1720.539,196.445,1854.977,207.89,1988.75,219.279C2122.523,230.668,2255.632,242,2322.186,247.666L2388.741,253.332"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(642.06640625, 84)" id="flowchart-A-5890" class="node default"><rect height="78" width="230.78125" y="-39" x="-115.390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-85.390625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="170.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>文件格式验证<br>File Format Verification</p></span></div></foreignObject></g></g><g transform="translate(173, 261)" id="flowchart-B-5891" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>验证字节流是否符合Class文件格式规范</p></span></div></foreignObject></g></g><g transform="translate(933.546875, 84)" id="flowchart-C-5892" class="node default"><rect height="78" width="215.140625" y="-39" x="-107.5703125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-77.5703125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="155.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>元数据验证<br>Metadata Verification</p></span></div></foreignObject></g></g><g transform="translate(483, 261)" id="flowchart-D-5893" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对字节码描述的信息进行语义分析</p></span></div></foreignObject></g></g><g transform="translate(1220.93359375, 84)" id="flowchart-E-5894" class="node default"><rect height="78" width="214.40625" y="-39" x="-107.203125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-77.203125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="154.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>字节码验证<br>Bytecode Verification</p></span></div></foreignObject></g></g><g transform="translate(793, 261)" id="flowchart-F-5895" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>通过数据流和控制流分析，确定程序语义合法性</p></span></div></foreignObject></g></g><g transform="translate(1513.6015625, 84)" id="flowchart-G-5896" class="node default"><rect height="102" width="260" y="-51" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>符号引用验证<br>Symbolic Reference Verification</p></span></div></foreignObject></g></g><g transform="translate(1091.1328125, 261)" id="flowchart-H-5897" class="node default"><rect height="54" width="236.265625" y="-27" x="-118.1328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-88.1328125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>确保解析动作能正确执行</p></span></div></foreignObject></g></g><g transform="translate(1824, 261)" id="flowchart-I-5898" class="node default"><rect height="102" width="180.796875" y="-51" x="-90.3984375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.3984375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="120.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>魔数0xCAFEBABE<br>主次版本号<br>常量池合法性</p></span></div></foreignObject></g></g><g transform="translate(2050.484375, 261)" id="flowchart-J-5899" class="node default"><rect height="102" width="172.171875" y="-51" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类的父类检查<br>接口实现检查<br>字段方法合法性</p></span></div></foreignObject></g></g><g transform="translate(2264.6484375, 261)" id="flowchart-K-5900" class="node default"><rect height="102" width="156.15625" y="-51" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类型转换安全<br>跳转指令合法<br>操作数栈验证</p></span></div></foreignObject></g></g><g transform="translate(2478.8125, 261)" id="flowchart-L-5901" class="node default"><rect height="102" width="172.171875" y="-51" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>符号引用存在性<br>访问权限检查<br>字段方法匹配</p></span></div></foreignObject></g></g></g></g></g></svg><p id="mro3af_46"><span class="control" id="mro3af_51">验证失败的常见异常：</span></p><div class="table-wrapper"><table class="wide" id="mro3af_47"><thead><tr class="ijRowHead" id="mro3af_52"><th id="mro3af_57"><p>验证类型</p></th><th id="mro3af_58"><p>可能异常</p></th><th id="mro3af_59"><p>原因</p></th></tr></thead><tbody><tr id="mro3af_53"><td id="mro3af_60"><p><span class="control" id="mro3af_63">文件格式</span></p></td><td id="mro3af_61"><p><code class="code" id="mro3af_64">ClassFormatError</code></p></td><td id="mro3af_62"><p>字节码文件损坏</p></td></tr><tr id="mro3af_54"><td id="mro3af_65"><p><span class="control" id="mro3af_68">元数据</span></p></td><td id="mro3af_66"><p><code class="code" id="mro3af_69">VerifyError</code></p></td><td id="mro3af_67"><p>继承关系错误</p></td></tr><tr id="mro3af_55"><td id="mro3af_70"><p><span class="control" id="mro3af_73">字节码</span></p></td><td id="mro3af_71"><p><code class="code" id="mro3af_74">VerifyError</code></p></td><td id="mro3af_72"><p>方法体验证失败</p></td></tr><tr id="mro3af_56"><td id="mro3af_75"><p><span class="control" id="mro3af_78">符号引用</span></p></td><td id="mro3af_76"><p><code class="code" id="mro3af_79">NoSuchMethodError</code></p></td><td id="mro3af_77"><p>方法不存在</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="q4-preparation" data-toc="q4-preparation">Q4: 准备（Preparation）和初始化阶段有什么区别？</h3><p id="mro3af_80"><span class="control" id="mro3af_87">答案：</span></p><p id="mro3af_81"><span class="control" id="mro3af_88">准备阶段和初始化阶段对比：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 2376.34375 268"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="2376.34375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="subGraph1" class="cluster"><rect height="252" width="1194.03125" y="8" x="8" style=""></rect><g transform="translate(517.0703125, 8)" class="cluster-label"><foreignObject height="24" width="175.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>初始化阶段 Initialization</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_3" d="M287.531,70L293.781,70C300.031,70,312.531,70,321.906,70C331.281,70,337.531,70,343.115,70C348.698,70,353.615,70,356.073,70L358.531,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_4" d="M582.781,70L589.031,70C595.281,70,607.781,70,617.156,70C626.531,70,632.781,70,638.365,70C643.948,70,648.865,70,651.323,70L653.781,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_I_5" d="M829.953,70L836.203,70C842.453,70,854.953,70,867.97,70C880.987,70,894.521,70,907.388,70C920.255,70,932.456,70,938.556,70L944.656,70"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(166.515625, 70)" id="flowchart-F-5931" class="node default"><rect height="54" width="242.03125" y="-27" x="-121.015625" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-91.015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="182.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>执行类构造器&lt;clinit&gt;方法</p></span></div></foreignObject></g></g><g transform="translate(472.65625, 70)" id="flowchart-G-5932" class="node default"><rect height="54" width="220.25" y="-27" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>为类变量赋予正确初值</p></span></div></foreignObject></g></g><g transform="translate(743.8671875, 70)" id="flowchart-H-5934" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>执行静态代码块</p></span></div></foreignObject></g></g><g transform="translate(1034.7421875, 70)" id="flowchart-I-5936" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>按代码顺序执行</p></span></div></foreignObject></g></g><g transform="translate(1034.7421875, 186)" id="flowchart-J-5937" class="node default"><rect height="78" width="259.578125" y="-39" x="-129.7890625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-99.7890625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="199.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>示例：static int value = 123<br>初始化阶段：value = 123</p></span></div></foreignObject></g></g></g></g><g transform="translate(1244.03125, 0)" class="root"><g class="clusters"><g data-look="classic" id="subGraph0" class="cluster"><rect height="252" width="1116.3125" y="8" x="8" style=""></rect><g transform="translate(489.8984375, 8)" class="cluster-label"><foreignObject height="24" width="152.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>准备阶段 Preparation</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M233.703,70L239.953,70C246.203,70,258.703,70,268.078,70C277.453,70,283.703,70,289.286,70C294.87,70,299.786,70,302.245,70L304.703,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M496.906,70L503.156,70C509.406,70,521.906,70,531.281,70C540.656,70,546.906,70,552.49,70C558.073,70,562.99,70,565.448,70L567.906,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M752.234,70L758.484,70C764.734,70,777.234,70,788.248,70C799.262,70,808.789,70,817.65,70C826.51,70,834.704,70,838.801,70L842.898,70"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(139.6015625, 70)" id="flowchart-A-5924" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>为类变量分配内存</p></span></div></foreignObject></g></g><g transform="translate(402.8046875, 70)" id="flowchart-B-5925" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>设置类变量初始值</p></span></div></foreignObject></g></g><g transform="translate(662.0703125, 70)" id="flowchart-C-5927" class="node default"><rect height="54" width="180.328125" y="-27" x="-90.1640625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.1640625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>仅处理static变量</p></span></div></foreignObject></g></g><g transform="translate(957.0234375, 70)" id="flowchart-D-5929" class="node default"><rect height="54" width="220.25" y="-27" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>初始值为数据类型零值</p></span></div></foreignObject></g></g><g transform="translate(957.0234375, 186)" id="flowchart-E-5930" class="node default"><rect height="78" width="259.578125" y="-39" x="-129.7890625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-99.7890625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="199.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>示例：static int value = 123<br>准备阶段：value = 0</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_83"><span class="control" id="mro3af_89">数据类型零值表：</span></p><div class="table-wrapper"><table class="wide" id="mro3af_84"><thead><tr class="ijRowHead" id="mro3af_90"><th id="mro3af_95"><p>数据类型</p></th><th id="mro3af_96"><p>零值</p></th><th id="mro3af_97"><p>数据类型</p></th><th id="mro3af_98"><p>零值</p></th></tr></thead><tbody><tr id="mro3af_91"><td id="mro3af_99"><p><code class="code" id="mro3af_103">int</code></p></td><td id="mro3af_100"><p>0</p></td><td id="mro3af_101"><p><code class="code" id="mro3af_104">boolean</code></p></td><td id="mro3af_102"><p>false</p></td></tr><tr id="mro3af_92"><td id="mro3af_105"><p><code class="code" id="mro3af_109">long</code></p></td><td id="mro3af_106"><p>0L</p></td><td id="mro3af_107"><p><code class="code" id="mro3af_110">char</code></p></td><td id="mro3af_108"><p>'\u0000'</p></td></tr><tr id="mro3af_93"><td id="mro3af_111"><p><code class="code" id="mro3af_115">float</code></p></td><td id="mro3af_112"><p>0.0f</p></td><td id="mro3af_113"><p><code class="code" id="mro3af_116">reference</code></p></td><td id="mro3af_114"><p>null</p></td></tr><tr id="mro3af_94"><td id="mro3af_117"><p><code class="code" id="mro3af_121">double</code></p></td><td id="mro3af_118"><p>0.0d</p></td><td id="mro3af_119"></td><td id="mro3af_120"></td></tr></tbody></table></div><p id="mro3af_85"><span class="control" id="mro3af_122">特殊情况：</span></p><div class="code-block" data-lang="java">
// 编译时常量，准备阶段就会被赋予正确的值
static final int CONSTANT = 123;  // 准备阶段就是123

// 运行时常量，初始化阶段才赋值
static final int RUNTIME_CONSTANT = new Random().nextInt();
</div></section><section class="chapter"><h3 id="q5" data-toc="q5">Q5: 什么时候会触发类的初始化？有哪些主动引用场景？</h3><p id="mro3af_123"><span class="control" id="mro3af_130">答案：</span></p><p id="mro3af_124"><span class="control" id="mro3af_131">类初始化触发条件（主动引用）：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1708.703125 198"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1708.703125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M819.648,41.266L705.181,48.888C590.714,56.511,361.779,71.755,247.311,82.461C132.844,93.167,132.844,99.333,132.844,104.833C132.844,110.333,132.844,115.167,132.844,117.583L132.844,120"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_1" d="M819.648,45.029L754.01,52.024C688.372,59.019,557.096,73.01,491.458,82.088C425.82,91.167,425.82,95.333,425.82,98.833C425.82,102.333,425.82,105.167,425.82,106.583L425.82,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_2" d="M819.648,56.681L797.716,61.734C775.784,66.787,731.919,76.894,709.987,85.03C688.055,93.167,688.055,99.333,688.055,104.833C688.055,110.333,688.055,115.167,688.055,117.583L688.055,120"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_E_3" d="M913.75,62L913.75,66.167C913.75,70.333,913.75,78.667,913.75,84.917C913.75,91.167,913.75,95.333,913.75,98.833C913.75,102.333,913.75,105.167,913.75,106.583L913.75,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_F_4" d="M1007.852,58.338L1027.113,63.115C1046.375,67.892,1084.898,77.446,1104.16,84.306C1123.422,91.167,1123.422,95.333,1123.422,98.833C1123.422,102.333,1123.422,105.167,1123.422,106.583L1123.422,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_G_5" d="M1007.852,46.125L1065.478,52.937C1123.104,59.75,1238.357,73.375,1295.983,82.271C1353.609,91.167,1353.609,95.333,1353.609,98.833C1353.609,102.333,1353.609,105.167,1353.609,106.583L1353.609,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_H_6" d="M1007.852,42.097L1107.078,49.581C1206.305,57.065,1404.758,72.032,1503.984,81.6C1603.211,91.167,1603.211,95.333,1603.211,98.833C1603.211,102.333,1603.211,105.167,1603.211,106.583L1603.211,108"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(913.75, 35)" id="flowchart-A-5968" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类初始化触发条件</p></span></div></foreignObject></g></g><g transform="translate(132.84375, 151)" id="flowchart-B-5969" class="node default"><rect height="54" width="249.6875" y="-27" x="-124.84375" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-94.84375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="189.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>使用new关键字实例化对象</p></span></div></foreignObject></g></g><g transform="translate(425.8203125, 151)" id="flowchart-C-5971" class="node default"><rect height="78" width="236.265625" y="-39" x="-118.1328125" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-88.1328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>读取或设置类的静态字段<br>final常量除外</p></span></div></foreignObject></g></g><g transform="translate(688.0546875, 151)" id="flowchart-D-5973" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>调用类的静态方法</p></span></div></foreignObject></g></g><g transform="translate(913.75, 151)" id="flowchart-E-5975" class="node default"><rect height="78" width="163.1875" y="-39" x="-81.59375" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-51.59375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="103.1875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>反射调用类<br>Class.forName</p></span></div></foreignObject></g></g><g transform="translate(1123.421875, 151)" id="flowchart-F-5977" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>初始化子类时<br>父类未初始化</p></span></div></foreignObject></g></g><g transform="translate(1353.609375, 151)" id="flowchart-G-5979" class="node default"><rect height="78" width="204.21875" y="-39" x="-102.109375" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-72.109375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>虚拟机启动时的主类<br>包含main方法的类</p></span></div></foreignObject></g></g><g transform="translate(1603.2109375, 151)" id="flowchart-H-5981" class="node default"><rect height="78" width="194.984375" y="-39" x="-97.4921875" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-67.4921875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="134.984375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>动态语言支持<br>MethodHandle解析</p></span></div></foreignObject></g></g></g></g></g></svg><p id="mro3af_126"><span class="control" id="mro3af_132">被动引用场景（不会触发初始化）：</span></p><div class="code-block" data-lang="java">
// 1. 通过子类引用父类静态字段
class Parent {
    static int parentField = 1;
}
class Child extends Parent {}

// 不会初始化Child类
System.out.println(Child.parentField);

// 2. 通过数组定义引用类
Parent[] parents = new Parent[10];  // 不会初始化Parent类

// 3. 引用编译时常量
class Constants {
    static final String HELLO = &quot;hello&quot;;  // 编译时常量
}
// 不会初始化Constants类
System.out.println(Constants.HELLO);
</div><p id="mro3af_128"><span class="control" id="mro3af_133">类初始化顺序：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-70 -10 670 835" style="max-width: 670px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Instance" height="65" width="150" stroke="#666" fill="#eaeaea" y="749" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="781.5" x="475"><tspan dy="0" x="475">实例</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Child" height="65" width="150" stroke="#666" fill="#eaeaea" y="749" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="781.5" x="275"><tspan dy="0" x="275">子类</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Parent" height="65" width="150" stroke="#666" fill="#eaeaea" y="749" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="781.5" x="75"><tspan dy="0" x="75">父类</tspan></text></g><g><line name="Instance" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="749" x2="475" y1="5" x1="475" id="actor246"></line><g id="root-246"><rect class="actor actor-top" ry="3" rx="3" name="Instance" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="475"><tspan dy="0" x="475">实例</tspan></text></g></g><g><line name="Child" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="749" x2="275" y1="5" x1="275" id="actor245"></line><g id="root-245"><rect class="actor actor-top" ry="3" rx="3" name="Child" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="275"><tspan dy="0" x="275">子类</tspan></text></g></g><g><line name="Parent" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="749" x2="75" y1="5" x1="75" id="actor244"></line><g id="root-244"><rect class="actor actor-top" ry="3" rx="3" name="Parent" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">父类</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="39" width="450" stroke="#666" fill="#EDF2AE" y="75" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="275"><tspan x="275">类初始化顺序</tspan></text></g><g><rect class="note" height="39" width="150" stroke="#666" fill="#EDF2AE" y="202" x="100"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="207" x="175"><tspan x="175">按代码顺序执行</tspan></text></g><g><rect class="note" height="39" width="150" stroke="#666" fill="#EDF2AE" y="329" x="300"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="334" x="375"><tspan x="375">按代码顺序执行</tspan></text></g><g><rect class="note" height="39" width="450" stroke="#666" fill="#EDF2AE" y="378" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="383" x="275"><tspan x="275">实例创建时</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="129" x="76">父类静态变量和静态代码块</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,162 C 136,152 136,192 76,182"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="256" x="276">子类静态变量和静态代码块</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,289 C 336,279 336,319 276,309"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="432" x="76">父类实例变量和实例代码块</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,465 C 136,455 136,495 76,485"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="510" x="76">父类构造方法</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,543 C 136,533 136,573 76,563"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="588" x="276">子类实例变量和实例代码块</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,621 C 336,611 336,651 276,641"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="666" x="276">子类构造方法</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,699 C 336,689 336,729 276,719"></path></svg></section></section><section class="chapter"><h2 id="mro3af_6" data-toc="mro3af_6">🏗️ 类加载器体系</h2><section class="chapter"><h3 id="q6-jvm" data-toc="q6-jvm">Q6: JVM中有哪些类加载器？它们的层次结构是怎样的？</h3><p id="mro3af_137"><span class="control" id="mro3af_144">答案：</span></p><p id="mro3af_138"><span class="control" id="mro3af_145">类加载器层次结构：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1415.0625 420"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1415.0625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="加载内容" class="cluster"><rect height="404" width="1399.0625" y="8" x="8" style=""></rect><g transform="translate(675.4765625, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>加载内容</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M491.906,82L498.156,82C504.406,82,516.906,82,527.937,84.083C538.967,86.167,548.528,90.333,557.477,94.234C566.427,98.134,574.765,101.768,578.934,103.585L583.103,105.402"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M785.609,146L791.859,146C798.109,146,810.609,146,821.841,148.083C833.073,150.167,843.037,154.333,852.386,158.243C861.735,162.152,870.469,165.805,874.836,167.631L879.203,169.457"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M1091.703,210L1097.953,210C1104.203,210,1116.703,210,1127.476,212.083C1138.248,214.167,1147.293,218.333,1155.732,222.221C1164.172,226.109,1172.006,229.718,1175.923,231.522L1179.839,233.326"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_A_3" d="M198.047,82L204.297,82C210.547,82,223.047,82,232.422,82C241.797,82,248.047,82,253.63,82C259.214,82,264.13,82,266.589,82L269.047,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_B_4" d="M466.391,210L476.893,210C487.396,210,508.401,210,523.684,207.917C538.967,205.833,548.528,201.667,557.477,197.766C566.427,193.866,574.765,190.232,578.934,188.415L583.103,186.598"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_C_5" d="M763.609,274L773.526,274C783.443,274,803.276,274,818.175,271.917C833.073,269.833,843.037,265.667,852.386,261.757C861.735,257.848,870.469,254.195,874.836,252.369L879.203,250.543"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_D_6" d="M1054.234,338L1066.729,338C1079.224,338,1104.214,338,1121.231,335.917C1138.248,333.833,1147.293,329.667,1155.732,325.779C1164.172,321.891,1172.006,318.282,1175.923,316.478L1179.839,314.674"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(382.4765625, 82)" id="flowchart-A-6005" class="node default"><rect height="78" width="218.859375" y="-39" x="-109.4296875" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-79.4296875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="158.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>启动类加载器<br>Bootstrap ClassLoader</p></span></div></foreignObject></g></g><g transform="translate(676.2578125, 146)" id="flowchart-B-6006" class="node default"><rect height="78" width="218.703125" y="-39" x="-109.3515625" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-79.3515625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="158.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>扩展类加载器<br>Extension ClassLoader</p></span></div></foreignObject></g></g><g transform="translate(976.15625, 210)" id="flowchart-C-6008" class="node default"><rect height="78" width="231.09375" y="-39" x="-115.546875" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-85.546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="171.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>应用程序类加载器<br>Application ClassLoader</p></span></div></foreignObject></g></g><g transform="translate(1268.1328125, 274)" id="flowchart-D-6010" class="node default"><rect height="78" width="202.859375" y="-39" x="-101.4296875" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-71.4296875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="142.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>自定义类加载器<br>Custom ClassLoader</p></span></div></foreignObject></g></g><g transform="translate(121.7734375, 82)" id="flowchart-E-6011" class="node default"><rect height="78" width="152.546875" y="-39" x="-76.2734375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-46.2734375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="92.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JVM核心类库<br>rt.jar等</p></span></div></foreignObject></g></g><g transform="translate(382.4765625, 210)" id="flowchart-F-6013" class="node default"><rect height="78" width="167.828125" y="-39" x="-83.9140625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-53.9140625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="107.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>扩展类库<br>ext目录下的jar</p></span></div></foreignObject></g></g><g transform="translate(676.2578125, 274)" id="flowchart-G-6015" class="node default"><rect height="78" width="174.703125" y="-39" x="-87.3515625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-57.3515625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="114.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>应用程序类<br>classpath下的类</p></span></div></foreignObject></g></g><g transform="translate(976.15625, 338)" id="flowchart-H-6017" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>用户自定义<br>特殊需求的类</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_140"><span class="control" id="mro3af_146">各类加载器详细信息：</span></p><div class="table-wrapper"><table class="wide" id="mro3af_141"><thead><tr class="ijRowHead" id="mro3af_147"><th id="mro3af_152"><p>类加载器</p></th><th id="mro3af_153"><p>实现语言</p></th><th id="mro3af_154"><p>加载路径</p></th><th id="mro3af_155"><p>典型类库</p></th></tr></thead><tbody><tr id="mro3af_148"><td id="mro3af_156"><p><span class="control" id="mro3af_160">Bootstrap</span></p></td><td id="mro3af_157"><p>C/C++</p></td><td id="mro3af_158"><p><code class="code" id="mro3af_161">$JAVA_HOME/lib</code></p></td><td id="mro3af_159"><p><code class="code" id="mro3af_162">Object</code>, <code class="code" id="mro3af_163">String</code></p></td></tr><tr id="mro3af_149"><td id="mro3af_164"><p><span class="control" id="mro3af_168">Extension</span></p></td><td id="mro3af_165"><p>Java</p></td><td id="mro3af_166"><p><code class="code" id="mro3af_169">$JAVA_HOME/lib/ext</code></p></td><td id="mro3af_167"><p><code class="code" id="mro3af_170">javax.*</code></p></td></tr><tr id="mro3af_150"><td id="mro3af_171"><p><span class="control" id="mro3af_175">Application</span></p></td><td id="mro3af_172"><p>Java</p></td><td id="mro3af_173"><p><code class="code" id="mro3af_176">classpath</code></p></td><td id="mro3af_174"><p>用户应用程序类</p></td></tr><tr id="mro3af_151"><td id="mro3af_177"><p><span class="control" id="mro3af_181">Custom</span></p></td><td id="mro3af_178"><p>Java</p></td><td id="mro3af_179"><p>自定义</p></td><td id="mro3af_180"><p>特殊需求类</p></td></tr></tbody></table></div><p id="mro3af_142"><span class="control" id="mro3af_182">查看类加载器示例：</span></p><div class="code-block" data-lang="java">
public class ClassLoaderTest {
    public static void main(String[] args) {
        // 查看当前类的类加载器
        ClassLoader loader = ClassLoaderTest.class.getClassLoader();
        System.out.println(&quot;当前类加载器: &quot; + loader);
        
        // 查看父类加载器
        System.out.println(&quot;父类加载器: &quot; + loader.getParent());
        
        // 查看启动类加载器（返回null）
        System.out.println(&quot;启动类加载器: &quot; + loader.getParent().getParent());
        
        // 查看String类的类加载器（null表示启动类加载器）
        System.out.println(&quot;String类加载器: &quot; + String.class.getClassLoader());
    }
}
</div></section><section class="chapter"><h3 id="q7" data-toc="q7">Q7: 什么是双亲委派模型？它有什么优势？</h3><p id="mro3af_183"><span class="control" id="mro3af_190">答案：</span></p><p id="mro3af_184"><span class="control" id="mro3af_191">双亲委派模型工作流程：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-69 -10 670 1134" style="max-width: 670px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Boot" height="65" width="150" stroke="#666" fill="#eaeaea" y="1048" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1080.5" x="475"><tspan dy="0" x="475">启动类加载器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Ext" height="65" width="150" stroke="#666" fill="#eaeaea" y="1048" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1080.5" x="275"><tspan dy="0" x="275">扩展类加载器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="1048" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1080.5" x="75"><tspan dy="0" x="75">应用程序类加载器</tspan></text></g><g><line name="Boot" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1048" x2="475" y1="5" x1="475" id="actor249"></line><g id="root-249"><rect class="actor actor-top" ry="3" rx="3" name="Boot" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="475"><tspan dy="0" x="475">启动类加载器</tspan></text></g></g><g><line name="Ext" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1048" x2="275" y1="5" x1="275" id="actor248"></line><g id="root-248"><rect class="actor actor-top" ry="3" rx="3" name="Ext" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="275"><tspan dy="0" x="275">扩展类加载器</tspan></text></g></g><g><line name="App" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1048" x2="75" y1="5" x1="75" id="actor247"></line><g id="root-247"><rect class="actor actor-top" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">应用程序类加载器</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="39" width="450" stroke="#666" fill="#EDF2AE" y="75" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="275"><tspan x="275">类加载请求流程</tspan></text></g><g><line class="loopLine" y2="688" x2="286" y1="688" x1="-9"></line><line class="loopLine" y2="1018" x2="286" y1="688" x1="286"></line><line class="loopLine" y2="1018" x2="286" y1="1018" x1="-9"></line><line class="loopLine" y2="1018" x2="-9" y1="688" x1="-9"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="804" x2="286" y1="804" x1="-9"></line><polygon class="labelBox" points="-9,688 41,688 41,701 32.6,708 -9,708"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="701" x="16">alt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="706" x="163.5"><tspan x="163.5">[扩展类加载器-</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="725" x="163.5"><tspan x="163.5">能加载]</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="822" x="138.5">[扩展类加载器-</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="841" x="138.5">无法加载]</text></g><g><line class="loopLine" y2="376" x2="486" y1="376" x1="-19"></line><line class="loopLine" y2="1028" x2="486" y1="376" x1="486"></line><line class="loopLine" y2="1028" x2="486" y1="1028" x1="-19"></line><line class="loopLine" y2="1028" x2="-19" y1="376" x1="-19"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="522" x2="486" y1="522" x1="-19"></line><polygon class="labelBox" points="-19,376 31,376 31,389 22.6,396 -19,396"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="389" x="6">alt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="394" x="258.5"><tspan x="258.5">[启动类加载器能加载]</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="540" x="233.5">[启动类加载器无法加载]</text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="129" x="76">收到类加载请求</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,162 C 136,152 136,192 76,182"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="207" x="174">委托给父类加载器</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="240" x2="271" y1="240" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="255" x="374">委托给父类加载器</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="288" x2="471" y1="288" x1="276"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="303" x="476">尝试加载类</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 476,336 C 536,326 536,366 476,356"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="426" x="377">返回加载结果</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="459" x2="279" y1="459" x1="474"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="474" x="177">返回加载结果</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="507" x2="79" y1="507" x1="274"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="567" x="377">返回null</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="600" x2="279" y1="600" x1="474"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="615" x="276">尝试自己加载</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,648 C 336,638 336,678 276,668"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="756" x="177">返回加载结果</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="789" x2="79" y1="789" x1="274"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="867" x="177">返回null</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="900" x2="79" y1="900" x1="274"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="915" x="76">自己尝试加载</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,948 C 136,938 136,978 76,968"></path></svg><p id="mro3af_186"><span class="control" id="mro3af_192">双亲委派模型的优势：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 661.75 548"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="661.75" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="双亲委派优势" class="cluster"><rect height="532" width="645.75" y="8" x="8" style=""></rect><g transform="translate(282.796875, 8)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>双亲委派优势</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M261.328,82L272.182,82C283.036,82,304.745,82,319.392,82C334.039,82,341.625,82,348.544,82C355.464,82,361.716,82,364.842,82L367.969,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M288.953,210L295.203,210C301.453,210,313.953,210,323.328,210C332.703,210,338.953,210,344.536,210C350.12,210,355.036,210,357.495,210L359.953,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M253.313,338L265.503,338C277.693,338,302.073,338,318.056,338C334.039,338,341.625,338,348.544,338C355.464,338,361.716,338,364.842,338L367.969,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M261.328,466L272.182,466C283.036,466,304.745,466,320.059,466C335.374,466,344.294,466,352.548,466C360.802,466,368.389,466,372.183,466L375.977,466"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(167.2265625, 82)" id="flowchart-A-6023" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>避免类的重复加载</p></span></div></foreignObject></g></g><g transform="translate(490.1015625, 82)" id="flowchart-B-6024" class="node default"><rect height="78" width="236.265625" y="-39" x="-118.1328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-88.1328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>父类加载器已加载<br>子类加载器不会重复加载</p></span></div></foreignObject></g></g><g transform="translate(167.2265625, 210)" id="flowchart-C-6025" class="node default"><rect height="54" width="243.453125" y="-27" x="-121.7265625" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-91.7265625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="183.453125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>保证Java核心API不被篡改</p></span></div></foreignObject></g></g><g transform="translate(490.1015625, 210)" id="flowchart-D-6026" class="node default"><rect height="78" width="252.296875" y="-39" x="-126.1484375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-96.1484375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>核心类由启动类加载器加载<br>确保安全性</p></span></div></foreignObject></g></g><g transform="translate(167.2265625, 338)" id="flowchart-E-6027" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>提供类的唯一性</p></span></div></foreignObject></g></g><g transform="translate(490.1015625, 338)" id="flowchart-F-6028" class="node default"><rect height="78" width="236.265625" y="-39" x="-118.1328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-88.1328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>同一个类只会被<br>同一个类加载器加载一次</p></span></div></foreignObject></g></g><g transform="translate(167.2265625, 466)" id="flowchart-G-6029" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>维护类的层次关系</p></span></div></foreignObject></g></g><g transform="translate(490.1015625, 466)" id="flowchart-H-6030" class="node default"><rect height="78" width="220.25" y="-39" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>保证类型安全<br>类加载器命名空间隔离</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_188"><span class="control" id="mro3af_193">双亲委派的实现代码：</span></p><div class="code-block" data-lang="java">
protected Class&lt;?&gt; loadClass(String name, boolean resolve) 
    throws ClassNotFoundException {
    synchronized (getClassLoadingLock(name)) {
        // 首先检查类是否已经被加载
        Class&lt;?&gt; c = findLoadedClass(name);
        if (c == null) {
            try {
                if (parent != null) {
                    // 委托给父类加载器
                    c = parent.loadClass(name, false);
                } else {
                    // 委托给启动类加载器
                    c = findBootstrapClassOrNull(name);
                }
            } catch (ClassNotFoundException e) {
                // 父类加载器无法加载
            }
            
            if (c == null) {
                // 父类加载器无法加载，自己尝试加载
                c = findClass(name);
            }
        }
        if (resolve) {
            resolveClass(c);
        }
        return c;
    }
}
</div></section><section class="chapter"><h3 id="q8" data-toc="q8">Q8: 在什么情况下需要破坏双亲委派模型？如何实现？</h3><p id="mro3af_194"><span class="control" id="mro3af_203">答案：</span></p><p id="mro3af_195"><span class="control" id="mro3af_204">破坏双亲委派的典型场景：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 883.96875 520.5750122070312" height="520.5750122070312" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="883.96875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="破坏双亲委派的场景" class="cluster"><rect height="504.5750000011176" width="867.96875" y="8" x="8" style=""></rect><g transform="translate(369.875, 8)" class="cluster-label"><foreignObject height="24" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>破坏双亲委派的场景</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M527.203,82L533.453,82C539.703,82,552.203,82,561.578,82C570.953,82,577.203,82,582.786,82C588.37,82,593.286,82,595.745,82L598.203,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M474.898,210L489.866,210C504.833,210,534.768,210,556.199,210C577.629,210,590.555,210,602.814,210C615.073,210,626.665,210,632.462,210L638.258,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M473.945,338L489.072,338C504.198,338,534.451,338,556.04,338C577.629,338,590.555,338,602.814,338C615.073,338,626.665,338,632.462,338L638.258,338"></path><path style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="G-cyclic-special-1" d="M205.563,426.642L211.813,425.71C218.063,424.778,230.563,422.914,250.21,421.982C269.858,421.05,296.653,421.05,323.448,421.05C350.243,421.05,377.038,421.05,390.435,421.05L403.833,421.05"></path><path style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="G-cyclic-special-mid" d="M403.933,421.05L430.728,421.05C457.523,421.05,511.113,421.05,550.873,422.51C590.634,423.97,616.564,426.89,642.495,429.81C668.425,432.73,694.355,435.649,707.321,437.109L720.286,438.569"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="G-cyclic-special-2" d="M720.286,438.584L694.355,443.082C668.425,447.581,616.564,456.578,563.83,461.076C511.096,465.575,457.49,465.575,403.883,465.575C350.276,465.575,296.669,465.575,266.741,464.857C236.813,464.139,230.563,462.703,224.962,461.417C219.362,460.13,214.411,458.993,211.936,458.424L209.461,457.856"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(403.8828125, 82)" id="flowchart-A-6035" class="node default"><rect height="78" width="246.640625" y="-39" x="-123.3203125" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-93.3203125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="186.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SPI机制<br>Service Provider Interface</p></span></div></foreignObject></g></g><g transform="translate(720.3359375, 82)" id="flowchart-B-6036" class="node default"><rect height="78" width="236.265625" y="-39" x="-118.1328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-88.1328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>核心类需要调用用户代码<br>JDBC驱动加载</p></span></div></foreignObject></g></g><g transform="translate(403.8828125, 210)" id="flowchart-C-6037" class="node default"><rect height="54" width="142.03125" y="-27" x="-71.015625" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-41.015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="82.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>OSGi热部署</p></span></div></foreignObject></g></g><g transform="translate(720.3359375, 210)" id="flowchart-D-6038" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>模块化类加载<br>平级委托</p></span></div></foreignObject></g></g><g transform="translate(403.8828125, 338)" id="flowchart-E-6039" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>代码热替换</p></span></div></foreignObject></g></g><g transform="translate(720.3359375, 338)" id="flowchart-F-6040" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>运行时更新类<br>热部署框架</p></span></div></foreignObject></g></g><g transform="translate(125.53125, 438.5750000011176)" id="flowchart-G-6041" class="node default"><rect height="78" width="160.0625" y="-39" x="-80.03125" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-50.03125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="100.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Tomcat等容器<br>应用间类隔离</p></span></div></foreignObject></g></g><g transform="translate(403.8828125, 421.05000000074506)" id="G---G---1" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 10px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g transform="translate(720.3359375, 438.5750000011176)" id="G---G---2" class="label edgeLabel"><rect height="0.1" width="0.1"></rect><g transform="translate(0, 0)" style="" class="label"><rect></rect><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 10px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_197"><span class="control" id="mro3af_205">SPI机制破坏双亲委派：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 1156 411" style="max-width: 1156px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Impl" height="65" width="150" stroke="#666" fill="#eaeaea" y="325" x="906"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="357.5" x="981"><tspan dy="0" x="981">服务实现类</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="325" x="706"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="357.5" x="781"><tspan dy="0" x="781">应用程序类加载器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Thread" height="65" width="166" stroke="#666" fill="#eaeaea" y="325" x="466"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="357.5" x="549"><tspan dy="0" x="549">线程上下文类加载器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="SPI" height="65" width="150" stroke="#666" fill="#eaeaea" y="325" x="258"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="357.5" x="333"><tspan dy="0" x="333">SPI接口</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Core" height="65" width="150" stroke="#666" fill="#eaeaea" y="325" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="357.5" x="75"><tspan dy="0" x="75">核心类(rt.jar)</tspan></text></g><g><line name="Impl" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="325" x2="981" y1="5" x1="981" id="actor254"></line><g id="root-254"><rect class="actor actor-top" ry="3" rx="3" name="Impl" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="906"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="981"><tspan dy="0" x="981">服务实现类</tspan></text></g></g><g><line name="App" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="325" x2="781" y1="5" x1="781" id="actor253"></line><g id="root-253"><rect class="actor actor-top" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="706"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="781"><tspan dy="0" x="781">应用程序类加载器</tspan></text></g></g><g><line name="Thread" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="325" x2="549" y1="5" x1="549" id="actor252"></line><g id="root-252"><rect class="actor actor-top" ry="3" rx="3" name="Thread" height="65" width="166" stroke="#666" fill="#eaeaea" y="0" x="466"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="549"><tspan dy="0" x="549">线程上下文类加载器</tspan></text></g></g><g><line name="SPI" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="325" x2="333" y1="5" x1="333" id="actor251"></line><g id="root-251"><rect class="actor actor-top" ry="3" rx="3" name="SPI" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="258"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="333"><tspan dy="0" x="333">SPI接口</tspan></text></g></g><g><line name="Core" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="325" x2="75" y1="5" x1="75" id="actor250"></line><g id="root-250"><rect class="actor actor-top" ry="3" rx="3" name="Core" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">核心类(rt.jar)</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="203">调用ServiceLoader.load()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="113" x2="329" y1="113" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="128" x="440">获取上下文类加载器</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="161" x2="545" y1="161" x1="334"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="176" x="664">返回应用程序类加载器</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="209" x2="777" y1="209" x1="550"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="224" x="880">加载服务实现类</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="257" x2="977" y1="257" x1="782"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="272" x="659">返回实现类实例</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="305" x2="337" y1="305" x1="980"></line></svg><p id="mro3af_199"><span class="control" id="mro3af_206">JDBC驱动加载示例：</span></p><div class="code-block" data-lang="java">
// JDBC SPI机制示例
public class JDBCExample {
    public static void main(String[] args) throws Exception {
        // DriverManager由启动类加载器加载
        // 但需要加载用户classpath下的数据库驱动
        
        // 通过线程上下文类加载器加载驱动
        ClassLoader contextClassLoader = Thread.currentThread()
            .getContextClassLoader();
        
        // ServiceLoader使用上下文类加载器
        ServiceLoader&lt;Driver&gt; drivers = ServiceLoader.load(Driver.class);
        for (Driver driver : drivers) {
            System.out.println(&quot;加载驱动: &quot; + driver.getClass().getName());
        }
        
        // 获取连接
        Connection conn = DriverManager.getConnection(
            &quot;jdbc:mysql://localhost:3306/test&quot;, &quot;user&quot;, &quot;password&quot;);
    }
}
</div><p id="mro3af_201"><span class="control" id="mro3af_207">自定义类加载器破坏双亲委派：</span></p><div class="code-block" data-lang="java">
public class CustomClassLoader extends ClassLoader {
    private String classPath;
    
    public CustomClassLoader(String classPath) {
        this.classPath = classPath;
    }
    
    @Override
    protected Class&lt;?&gt; loadClass(String name, boolean resolve) 
        throws ClassNotFoundException {
        
        synchronized (getClassLoadingLock(name)) {
            Class&lt;?&gt; c = findLoadedClass(name);
            
            if (c == null) {
                // 破坏双亲委派：优先自己加载特定包的类
                if (name.startsWith(&quot;com.mycompany.hotswap&quot;)) {
                    c = findClass(name);
                } else {
                    // 其他类仍然委托给父类加载器
                    c = super.loadClass(name, resolve);
                }
            }
            
            if (resolve) {
                resolveClass(c);
            }
            return c;
        }
    }
    
    @Override
    protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {
        try {
            byte[] classData = loadClassData(name);
            return defineClass(name, classData, 0, classData.length);
        } catch (IOException e) {
            throw new ClassNotFoundException(name);
        }
    }
    
    private byte[] loadClassData(String className) throws IOException {
        String fileName = classPath + &quot;/&quot; + className.replace('.', '/') + &quot;.class&quot;;
        return Files.readAllBytes(Paths.get(fileName));
    }
}
</div></section></section><section class="chapter"><h2 id="mro3af_7" data-toc="mro3af_7">🔥 类的生命周期</h2><section class="chapter"><h3 id="q9" data-toc="q9">Q9: 类的完整生命周期包含哪些阶段？什么时候类会被卸载？</h3><p id="mro3af_210"><span class="control" id="mro3af_218">答案：</span></p><p id="mro3af_211"><span class="control" id="mro3af_219">类的完整生命周期：</span></p><svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 1534.14453125 1191" style="max-width: 1534.14453125px;" class="statediagram" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="mermaid_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"><g id="加载----parent" class="note-cluster"><rect fill="none" height="113" width="285" y="162" x="8"></rect></g><g id="验证----parent" class="note-cluster"><rect fill="none" height="113" width="285" y="325" x="190.015625"></rect></g><g id="准备----parent" class="note-cluster"><rect fill="none" height="113" width="285" y="488" x="372.03125"></rect></g><g id="解析----parent" class="note-cluster"><rect fill="none" height="90" width="277.296875" y="651" x="557.8984375"></rect></g><g id="初始化----parent" class="note-cluster"><rect fill="none" height="90" width="213.203125" y="791" x="772.11328125"></rect></g><g id="使用----parent" class="note-cluster"><rect fill="none" height="113" width="285" y="931" x="882.33203125"></rect></g><g id="卸载----parent" class="note-cluster"><rect fill="none" height="89" width="277.296875" y="1094" x="1248.84765625"></rect></g></g><g class="edgePaths"><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M708.449,22L708.449,26.167C708.449,30.333,708.449,38.667,708.449,44.917C708.449,51.167,708.449,55.333,708.449,59.5C708.449,63.667,708.449,67.833,708.449,69.917L708.449,72"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M732.48,102.732L745.27,108.443C758.059,114.155,783.637,125.577,796.426,135.455C809.215,145.333,809.215,153.667,809.215,160.875C809.215,168.083,809.215,174.167,809.215,180.25C809.215,186.333,809.215,192.417,809.215,195.458L809.215,198.5"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge2" d="M833.246,231.974L846.035,239.145C858.824,246.316,884.402,260.658,897.191,271.996C909.98,283.333,909.98,291.667,909.98,300C909.98,308.333,909.98,316.667,909.98,323.875C909.98,331.083,909.98,337.167,909.98,343.25C909.98,349.333,909.98,355.417,909.98,358.458L909.98,361.5"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge3" d="M934.012,394.974L946.801,402.145C959.59,409.316,985.168,423.658,997.957,434.996C1010.746,446.333,1010.746,454.667,1010.746,463C1010.746,471.333,1010.746,479.667,1010.746,486.875C1010.746,494.083,1010.746,500.167,1010.746,506.25C1010.746,512.333,1010.746,518.417,1010.746,521.458L1010.746,524.5"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge4" d="M1034.777,557.702L1047.913,564.919C1061.048,572.135,1087.319,586.567,1100.454,597.95C1113.59,609.333,1113.59,617.667,1113.59,626C1113.59,634.333,1113.59,642.667,1113.59,648.917C1113.59,655.167,1113.59,659.333,1113.59,663.5C1113.59,667.667,1113.59,671.833,1113.59,673.917L1113.59,676"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge5" d="M1145.629,713.409L1154.092,718.008C1162.555,722.606,1179.48,731.803,1187.943,740.568C1196.406,749.333,1196.406,757.667,1196.406,766C1196.406,774.333,1196.406,782.667,1196.406,788.917C1196.406,795.167,1196.406,799.333,1196.406,803.5C1196.406,807.667,1196.406,811.833,1196.406,813.917L1196.406,816"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge6" d="M1220.438,846.732L1233.227,852.443C1246.016,858.155,1271.594,869.577,1284.383,879.455C1297.172,889.333,1297.172,897.667,1297.172,906C1297.172,914.333,1297.172,922.667,1297.172,929.875C1297.172,937.083,1297.172,943.167,1297.172,949.25C1297.172,955.333,1297.172,961.417,1297.172,964.458L1297.172,967.5"></path><path marker-end="url(#mermaid_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge7" d="M1273.141,1002.532L1262.092,1009.443C1251.043,1016.355,1228.945,1030.177,1217.896,1041.255C1206.848,1052.333,1206.848,1060.667,1206.848,1069C1206.848,1077.333,1206.848,1085.667,1206.848,1092.958C1206.848,1100.25,1206.848,1106.5,1206.848,1112.75C1206.848,1119,1206.848,1125.25,1206.848,1128.375L1206.848,1131.5"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="加载-加载----note-8" d="M684.418,93.938L595.432,101.115C506.445,108.292,328.473,122.646,239.486,133.99C150.5,145.333,150.5,153.667,150.5,159.917C150.5,166.167,150.5,170.333,150.5,174.5C150.5,178.667,150.5,182.833,150.5,184.917L150.5,187"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="验证-验证----note-9" d="M785.184,221.348L709.739,230.29C634.294,239.232,483.405,257.116,407.96,270.225C332.516,283.333,332.516,291.667,332.516,300C332.516,308.333,332.516,316.667,332.516,322.917C332.516,329.167,332.516,333.333,332.516,337.5C332.516,341.667,332.516,345.833,332.516,347.917L332.516,350"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="准备-准备----note-10" d="M885.949,384.933L824.046,393.778C762.143,402.622,638.337,420.311,576.434,433.322C514.531,446.333,514.531,454.667,514.531,463C514.531,471.333,514.531,479.667,514.531,485.917C514.531,492.167,514.531,496.333,514.531,500.5C514.531,504.667,514.531,508.833,514.531,510.917L514.531,513"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="解析-解析----note-11" d="M986.715,548.821L938.354,557.518C889.992,566.214,793.27,583.607,744.908,596.47C696.547,609.333,696.547,617.667,696.547,626C696.547,634.333,696.547,642.667,696.547,648.958C696.547,655.25,696.547,659.5,696.547,663.75C696.547,668,696.547,672.25,696.547,674.375L696.547,676.5"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="初始化-初始化----note-12" d="M1081.551,702.138L1047.745,708.615C1013.939,715.092,946.327,728.046,912.521,738.69C878.715,749.333,878.715,757.667,878.715,766C878.715,774.333,878.715,782.667,878.715,788.958C878.715,795.25,878.715,799.5,878.715,803.75C878.715,808,878.715,812.25,878.715,814.375L878.715,816.5"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="使用-使用----note-13" d="M1172.375,842.303L1147.785,848.752C1123.194,855.202,1074.013,868.101,1049.423,878.717C1024.832,889.333,1024.832,897.667,1024.832,906C1024.832,914.333,1024.832,922.667,1024.832,928.917C1024.832,935.167,1024.832,939.333,1024.832,943.5C1024.832,947.667,1024.832,951.833,1024.832,953.917L1024.832,956"></path><path style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition note-edge" id="卸载-卸载----note-14" d="M1321.203,1002.532L1332.252,1009.443C1343.301,1016.355,1365.398,1030.177,1376.447,1041.255C1387.496,1052.333,1387.496,1060.667,1387.496,1069C1387.496,1077.333,1387.496,1085.667,1387.496,1091.917C1387.496,1098.167,1387.496,1102.333,1387.496,1106.5C1387.496,1110.667,1387.496,1114.833,1387.496,1116.917L1387.496,1119"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(708.44921875, 15)" id="state-root_start-0" class="node default"><circle height="14" width="14" r="7" class="state-start"></circle></g><g transform="translate(708.44921875, 92)" id="state-加载-8" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>加载</p></span></div></foreignObject></g></g><g transform="translate(809.21484375, 218.5)" id="state-验证-9" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>验证</p></span></div></foreignObject></g></g><g transform="translate(909.98046875, 381.5)" id="state-准备-10" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>准备</p></span></div></foreignObject></g></g><g transform="translate(1010.74609375, 544.5)" id="state-解析-11" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>解析</p></span></div></foreignObject></g></g><g transform="translate(1113.58984375, 696)" id="state-初始化-12" class="node  statediagram-state"><rect height="40" width="64.078125" y="-20" x="-32.0390625" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-24.0390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="48.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>初始化</p></span></div></foreignObject></g></g><g transform="translate(1196.40625, 836)" id="state-使用-13" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>使用</p></span></div></foreignObject></g></g><g transform="translate(1297.171875, 987.5)" id="state-卸载-14" class="node  statediagram-state"><rect height="40" width="48.0625" y="-20" x="-24.03125" ry="5" data-et="node" data-id="abc" rx="5" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>卸载</p></span></div></foreignObject></g></g><g transform="translate(1206.84765625, 1138.5)" id="state-root_end-7" class="node default"><circle height="14" width="14" r="7" class="state-start"></circle><circle height="10" width="10" r="5" class="state-end"></circle></g><g transform="translate(150.5, 218.5)" id="state-加载----note-8" class="node statediagram-note"><rect height="63" width="215" y="-31.5" x="-107.5"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>通过类加载器将类文件加载到内存</p></span></div></foreignObject></g></g><g transform="translate(332.515625, 381.5)" id="state-验证----note-9" class="node statediagram-note"><rect height="63" width="215" y="-31.5" x="-107.5"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>确保类文件字节流符合JVM规范</p></span></div></foreignObject></g></g><g transform="translate(514.53125, 544.5)" id="state-准备----note-10" class="node statediagram-note"><rect height="63" width="215" y="-31.5" x="-107.5"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>为类变量分配内存并设置初始值</p></span></div></foreignObject></g></g><g transform="translate(696.546875, 696)" id="state-解析----note-11" class="node statediagram-note"><rect height="39" width="207.296875" y="-19.5" x="-103.6484375"></rect><g transform="translate(-96.1484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>将符号引用转换为直接引用</p></span></div></foreignObject></g></g><g transform="translate(878.71484375, 836)" id="state-初始化----note-12" class="node statediagram-note"><rect height="39" width="143.203125" y="-19.5" x="-71.6015625"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>执行类构造器方法</p></span></div></foreignObject></g></g><g transform="translate(1024.83203125, 987.5)" id="state-使用----note-13" class="node statediagram-note"><rect height="63" width="215" y="-31.5" x="-107.5"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>正常使用类进行对象创建等操作</p></span></div></foreignObject></g></g><g transform="translate(1387.49609375, 1138.5)" id="state-卸载----note-14" class="node statediagram-note"><rect height="39" width="207.296875" y="-19.5" x="-103.6484375"></rect><g transform="translate(-96.1484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从内存中移除类的相关信息</p></span></div></foreignObject></g></g></g></g></g></svg><p id="mro3af_213"><span class="control" id="mro3af_220">类卸载的条件：</span></p><p id="mro3af_214">类卸载需要同时满足以下三个条件：</p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 678.296875 500"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="678.296875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="类卸载条件" class="cluster"><rect height="484" width="662.296875" y="8" x="8" style=""></rect><g transform="translate(299.0859375, 8)" class="cluster-label"><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类卸载条件</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_0" d="M287.828,70L297.023,70C306.219,70,324.609,70,344.268,77.417C363.926,84.833,384.853,99.667,405.235,114.114C425.617,128.562,445.456,142.625,455.375,149.656L465.295,156.687"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_D_1" d="M305.5,186L311.75,186C318,186,330.5,186,345.216,186C359.932,186,376.865,186,393.13,186C409.396,186,424.995,186,432.794,186L440.594,186"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M303.508,302L310.09,302C316.672,302,329.836,302,346.881,294.583C363.926,287.167,384.853,272.333,405.235,257.886C425.617,243.438,445.456,229.375,455.375,222.344L465.295,215.313"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_3" d="M253.578,418L268.482,418C283.385,418,313.193,418,331.221,418C349.25,418,355.5,418,361.083,418C366.667,418,371.583,418,374.042,418L376.5,418"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(175.5, 70)" id="flowchart-A-6047" class="node default"><rect height="54" width="224.65625" y="-27" x="-112.328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-82.328125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="164.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>该类所有实例都已被GC</p></span></div></foreignObject></g></g><g transform="translate(506.6484375, 186)" id="flowchart-D-6048" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可以卸载</p></span></div></foreignObject></g></g><g transform="translate(175.5, 186)" id="flowchart-B-6049" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>加载该类的ClassLoader已被GC</p></span></div></foreignObject></g></g><g transform="translate(175.5, 302)" id="flowchart-C-6051" class="node default"><rect height="54" width="256.015625" y="-27" x="-128.0078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-98.0078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="196.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>该类的Class对象没有被引用</p></span></div></foreignObject></g></g><g transform="translate(175.5, 418)" id="flowchart-E-6053" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>条件严苛<br>很难同时满足</p></span></div></foreignObject></g></g><g transform="translate(506.6484375, 418)" id="flowchart-F-6054" class="node default"><rect height="54" width="252.296875" y="-27" x="-126.1484375" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-96.1484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>大部分情况下类不会被卸载</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_216"><span class="control" id="mro3af_221">类卸载示例：</span></p><div class="code-block" data-lang="java">
public class ClassUnloadingExample {
    public static void main(String[] args) throws Exception {
        while (true) {
            // 创建自定义类加载器
            CustomClassLoader loader = new CustomClassLoader(&quot;./classes&quot;);
            
            // 加载类
            Class&lt;?&gt; clazz = loader.loadClass(&quot;com.example.TestClass&quot;);
            
            // 创建实例
            Object instance = clazz.newInstance();
            
            // 使用完毕后置空引用
            loader = null;
            clazz = null;
            instance = null;
            
            // 触发GC，可能卸载类
            System.gc();
            
            Thread.sleep(1000);
        }
    }
}
</div></section><section class="chapter"><h3 id="q10" data-toc="q10">Q10: 如何实现类的热部署？有哪些技术方案？</h3><p id="mro3af_222"><span class="control" id="mro3af_231">答案：</span></p><p id="mro3af_223"><span class="control" id="mro3af_232">热部署技术方案：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 591.59375 548"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="591.59375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="热部署技术方案" class="cluster"><rect height="532" width="575.59375" y="8" x="8" style=""></rect><g transform="translate(239.7109375, 8)" class="cluster-label"><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>热部署技术方案</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M249.719,82L255.969,82C262.219,82,274.719,82,285.476,82C296.233,82,305.247,82,313.595,82C321.943,82,329.624,82,333.464,82L337.305,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M233.695,210L242.616,210C251.536,210,269.378,210,282.805,210C296.233,210,305.247,210,313.595,210C321.943,210,329.624,210,333.464,210L337.305,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M223.883,338L234.439,338C244.995,338,266.107,338,281.206,338C296.305,338,305.391,338,313.81,338C322.229,338,329.982,338,333.858,338L337.734,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M217.672,466L229.263,466C240.854,466,264.036,466,278.753,466C293.469,466,299.719,466,305.302,466C310.885,466,315.802,466,318.26,466L320.719,466"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(147.609375, 82)" id="flowchart-A-6057" class="node default"><rect height="54" width="204.21875" y="-27" x="-102.109375" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-72.109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>自定义类加载器方案</p></span></div></foreignObject></g></g><g transform="translate(435.40625, 82)" id="flowchart-B-6058" class="node default"><rect height="78" width="188.203125" y="-39" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>每次重新加载时<br>创建新的类加载器</p></span></div></foreignObject></g></g><g transform="translate(147.609375, 210)" id="flowchart-C-6059" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>字节码增强技术</p></span></div></foreignObject></g></g><g transform="translate(435.40625, 210)" id="flowchart-D-6060" class="node default"><rect height="78" width="188.203125" y="-39" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>运行时修改字节码<br>ASM、Javassist</p></span></div></foreignObject></g></g><g transform="translate(147.609375, 338)" id="flowchart-E-6061" class="node default"><rect height="54" width="152.546875" y="-27" x="-76.2734375" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-46.2734375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="92.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JVM原生支持</p></span></div></foreignObject></g></g><g transform="translate(435.40625, 338)" id="flowchart-F-6062" class="node default"><rect height="78" width="187.34375" y="-39" x="-93.671875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-63.671875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="127.34375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>HotSwap、DCEVM<br>JRebel等工具</p></span></div></foreignObject></g></g><g transform="translate(147.609375, 466)" id="flowchart-G-6063" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>容器化方案</p></span></div></foreignObject></g></g><g transform="translate(435.40625, 466)" id="flowchart-H-6064" class="node default"><rect height="78" width="221.375" y="-39" x="-110.6875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.6875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="161.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>OSGi、Spring DevTools<br>应用服务器支持</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="mro3af_225"><span class="control" id="mro3af_233">自定义类加载器实现热部署：</span></p><div class="code-block" data-lang="java">
public class HotDeployClassLoader extends ClassLoader {
    private String classPath;
    private Map&lt;String, Long&gt; classTimeStamps = new HashMap&lt;&gt;();
    
    public HotDeployClassLoader(String classPath) {
        this.classPath = classPath;
    }
    
    @Override
    protected Class&lt;?&gt; loadClass(String name, boolean resolve) 
        throws ClassNotFoundException {
        
        // 检查是否需要重新加载
        if (needReload(name)) {
            // 创建新的类加载器实例来加载更新的类
            HotDeployClassLoader newLoader = new HotDeployClassLoader(classPath);
            return newLoader.findClass(name);
        }
        
        return super.loadClass(name, resolve);
    }
    
    private boolean needReload(String className) {
        String fileName = classPath + &quot;/&quot; + className.replace('.', '/') + &quot;.class&quot;;
        File file = new File(fileName);
        
        if (!file.exists()) {
            return false;
        }
        
        long currentTime = file.lastModified();
        Long cachedTime = classTimeStamps.get(className);
        
        if (cachedTime == null || currentTime &gt; cachedTime) {
            classTimeStamps.put(className, currentTime);
            return true;
        }
        
        return false;
    }
    
    @Override
    protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException {
        try {
            byte[] classData = loadClassFile(name);
            Class&lt;?&gt; clazz = defineClass(name, classData, 0, classData.length);
            
            // 记录加载时间
            String fileName = classPath + &quot;/&quot; + name.replace('.', '/') + &quot;.class&quot;;
            File file = new File(fileName);
            classTimeStamps.put(name, file.lastModified());
            
            return clazz;
        } catch (IOException e) {
            throw new ClassNotFoundException(name, e);
        }
    }
}
</div><p id="mro3af_227"><span class="control" id="mro3af_234">热部署管理器：</span></p><div class="code-block" data-lang="java">
public class HotDeployManager {
    private Map&lt;String, Object&gt; instances = new ConcurrentHashMap&lt;&gt;();
    private HotDeployClassLoader classLoader;
    
    public HotDeployManager(String classPath) {
        this.classLoader = new HotDeployClassLoader(classPath);
    }
    
    public Object getInstance(String className) throws Exception {
        Object instance = instances.get(className);
        
        if (instance == null || needReload(className)) {
            // 重新加载类并创建实例
            Class&lt;?&gt; clazz = classLoader.loadClass(className);
            instance = clazz.newInstance();
            instances.put(className, instance);
            
            System.out.println(&quot;重新加载类: &quot; + className);
        }
        
        return instance;
    }
    
    private boolean needReload(String className) {
        // 检查类文件是否有更新
        return classLoader.needReload(className);
    }
    
    public void clearCache() {
        instances.clear();
    }
}
</div><p id="mro3af_229"><span class="control" id="mro3af_235">使用示例：</span></p><div class="code-block" data-lang="java">
public class HotDeployExample {
    public static void main(String[] args) throws Exception {
        HotDeployManager manager = new HotDeployManager(&quot;./classes&quot;);
        
        while (true) {
            try {
                // 获取实例（如果类文件有更新会重新加载）
                Object service = manager.getInstance(&quot;com.example.BusinessService&quot;);
                
                // 通过反射调用方法
                Method method = service.getClass().getMethod(&quot;process&quot;, String.class);
                Object result = method.invoke(service, &quot;test data&quot;);
                
                System.out.println(&quot;处理结果: &quot; + result);
                
                Thread.sleep(5000); // 每5秒检查一次
            } catch (Exception e) {
                e.printStackTrace();
                Thread.sleep(1000);
            }
        }
    }
}
</div></section></section><section class="chapter"><h2 id="mro3af_8" data-toc="mro3af_8">💡 面试技巧</h2><section class="chapter"><h3 id="mro3af_236" data-toc="mro3af_236">高频考点</h3><ol class="list _decimal" id="mro3af_238" type="1"><li class="list__item" id="mro3af_239"><p id="mro3af_244"><span class="control" id="mro3af_245">类加载过程</span> ：加载、验证、准备、解析、初始化各阶段的作用</p></li><li class="list__item" id="mro3af_240"><p id="mro3af_246"><span class="control" id="mro3af_247">类加载器层次</span> ：Bootstrap、Extension、Application、Custom的关系</p></li><li class="list__item" id="mro3af_241"><p id="mro3af_248"><span class="control" id="mro3af_249">双亲委派模型</span> ：工作原理、优势、破坏场景</p></li><li class="list__item" id="mro3af_242"><p id="mro3af_250"><span class="control" id="mro3af_251">类初始化时机</span> ：主动引用和被动引用的区别</p></li><li class="list__item" id="mro3af_243"><p id="mro3af_252"><span class="control" id="mro3af_253">热部署实现</span> ：自定义类加载器的应用</p></li></ol></section><section class="chapter"><h3 id="mro3af_237" data-toc="mro3af_237">回答策略</h3><ol class="list _decimal" id="mro3af_254" type="1"><li class="list__item" id="mro3af_257"><p id="mro3af_261"><span class="control" id="mro3af_262">流程图解</span> ：画出类加载的完整流程</p></li><li class="list__item" id="mro3af_258"><p id="mro3af_263"><span class="control" id="mro3af_264">代码示例</span> ：通过代码说明类加载器的使用</p></li><li class="list__item" id="mro3af_259"><p id="mro3af_265"><span class="control" id="mro3af_266">对比分析</span> ：比较不同类加载器的特点</p></li><li class="list__item" id="mro3af_260"><p id="mro3af_267"><span class="control" id="mro3af_268">实际应用</span> ：结合框架和工具说明类加载机制</p></li></ol><p id="mro3af_256"><span class="control" id="mro3af_269">学习建议</span> ：类加载机制是JVM的基础机制，建议通过编写自定义类加载器、观察类的加载过程、分析框架中的类加载策略来加深理解，特别要重视双亲委派模型和SPI机制的应用。</p></section></section><div class="last-modified">09 六月 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="jvm垃圾回收qa.html" class="navigation-links__prev">JVM垃圾回收QA</a><a href="jvm性能调优qa.html" class="navigation-links__next">JVM性能调优QA</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>