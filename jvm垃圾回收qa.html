<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-06-10T01:07:29.8010583"><title>JVM垃圾回收QA | 技术知识库</title><script type="application/json" id="virtual-toc-data">[{"id":"-54auas_4","level":0,"title":"📋 知识结构","anchor":"#-54auas_4"},{"id":"-54auas_5","level":0,"title":"🗑️ 垃圾回收基础","anchor":"#-54auas_5"},{"id":"gc","level":0,"title":"🔄 GC算法详解","anchor":"#gc"},{"id":"-54auas_7","level":0,"title":"🛠️ 垃圾收集器详解","anchor":"#-54auas_7"},{"id":"gc","level":0,"title":"🔧 GC调优实践","anchor":"#gc"},{"id":"-54auas_9","level":0,"title":"💧 内存泄漏分析","anchor":"#-54auas_9"},{"id":"-54auas_10","level":0,"title":"💡 面试技巧","anchor":"#-54auas_10"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="JVM垃圾回收QA | 技术知识库"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="技术知识库 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/jvm垃圾回收qa.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="JVM垃圾回收QA | 技术知识库"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/jvm垃圾回收qa.html#webpage",
    "url": "writerside-documentation/jvm垃圾回收qa.html",
    "name": "JVM垃圾回收QA | 技术知识库",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "技术知识库 Help"
}</script><!-- End Schema.org --></head><body data-id="JVM垃圾回收QA" data-main-title="JVM垃圾回收QA" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="JVM面试大纲.md|JVM面试大纲"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>技术知识库  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="JVM垃圾回收QA" id="JVM垃圾回收QA.md">JVM垃圾回收QA</h1><p id="-54auas_3">本文档深入解析JVM垃圾回收机制，涵盖GC算法原理、垃圾收集器特点、GC调优策略、内存泄漏分析等核心内容。</p><section class="chapter"><h2 id="-54auas_4" data-toc="-54auas_4">📋 知识结构</h2><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="5 5 790.384521484375 418.49298095703125" style="max-width: 790.384521484375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 434.3444007314453,126.19507454993294 L 386.09467969253524,132.28324682032533 L337.84495865362516,138.37141909071772"></path><path class="edge section-edge-0 edge-depth-1" d="M 463.8196526718663,120.84783684429257 L 517.4142076108174,108.10619447485195 L571.0087625497683,95.36455210541132"></path><path class="edge section-edge-0 edge-depth-1" d="M 438.82679108079446,113.507622601523 L 411.63158910154164,85.24018506524769 L384.4363871222888,56.97274752897236"></path><path class="edge section-edge-0 edge-depth-1" d="M 455.9314421890311,110.89927077455388 L 471.81740996758845,79.10862868693894 L487.7033777461458,47.317986599324"></path><path class="edge section-edge-0 edge-depth-0" d="M 384.83194850382256,202.59612900404395 L 412.26447745281223,169.24872913092693 L439.6970064018019,135.90132925780992"></path><path class="edge section-edge-1 edge-depth-1" d="M 540.0391414090523,266.69876083057886 L 492.8896973341306,288.9714278618141 L445.7402532592089,311.24409489304935"></path><path class="edge section-edge-1 edge-depth-1" d="M 568.1663229906774,256.7028401322816 L 638.6617640026832,239.33091236941004 L709.157205014689,221.95898460653842"></path><path class="edge section-edge-1 edge-depth-1" d="M 556.5575082222083,274.9978209889886 L 563.0201959347662,307.1549535822032 L569.4828836473241,339.31208617541773"></path><path class="edge section-edge-1 edge-depth-1" d="M 557.2557078808327,245.7436510955647 L 564.3740215078161,217.4000171886688 L571.4923351347995,189.05638328177295"></path><path class="edge section-edge-1 edge-depth-1" d="M 567.849363483654,264.98369297652505 L 631.632400165109,285.9882374764465 L695.4154368465639,306.99278197636795"></path><path class="edge section-edge-1 edge-depth-0" d="M 389.8247671452418,217.93592303373015 L 464.45228967903984,237.23603371984032 L539.0798122128379,256.5361444059505"></path><path class="edge section-edge-2 edge-depth-1" d="M 301.6015849385516,318.9933992250834 L 283.25100058999055,350.32167407488055 L264.9004162414295,381.6499489246777"></path><path class="edge section-edge-2 edge-depth-1" d="M 295.90069030888026,299.08038723206613 L 251.91316147506552,275.9976507895843 L207.92563264125076,252.91491434710258"></path><path class="edge section-edge-2 edge-depth-1" d="M 318.9044872249932,317.4736902603859 L 344.15168448281247,347.1406338493706 L369.39888174063174,376.8075774383553"></path><path class="edge section-edge-2 edge-depth-1" d="M 294.46914935139233,308.96632926858103 L 241.01219157986372,319.56036130669054 L187.55523380833512,330.15439334480004"></path><path class="edge section-edge-2 edge-depth-0" d="M 366.5403392736295,226.35490904013022 L 342.2427743019765,260.1152799116057 L317.9452093303235,293.87565078308114"></path><path class="edge section-edge-3 edge-depth-1" d="M 189.20374590717714,165.62415219105455 L 137.1701545626563,191.13097149639518 L85.13656321813548,216.6377908017358"></path><path class="edge section-edge-3 edge-depth-1" d="M 187.7601399273554,157.40302612036413 L 130.11361409925001,151.14551904947135 L72.46708827114463,144.88801197857856"></path><path class="edge section-edge-3 edge-depth-1" d="M 192.15393263842964,148.32788984334107 L 163.6813887177235,119.38093032226797 L135.20884479701738,90.43397080119487"></path><path class="edge section-edge-3 edge-depth-1" d="M 208.8772414577242,145.36519909109956 L 223.06647701543858,114.13465565063811 L237.25571257315295,82.90411221017666"></path><path class="edge section-edge-3 edge-depth-0" d="M 361.0141992846791,209.6148095525572 L 288.9875494748207,186.60098104131944 L216.9608996649623,163.58715253008168"></path></g><g class="mindmap-nodes"><g transform="translate(318.5430558402527, 195.28020088797598)" class="mindmap-node section--1 section-root"><g transform="translate(56.75950241088867, 18.9)"><circle r="56.75950241088867" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(56.75950241088867, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">JVM垃圾回收</tspan></tspan></text></g></g></g><g transform="translate(412.9763966544831, 105.41725737387787)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h62.5 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-1"></path><line y2="37.8" x2="72.5" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(36.25, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">GC算法</tspan></tspan></text></g></g></g><g transform="translate(502.55402077124495, 241.39186655170462)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-6"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">垃圾收集器</tspan></tspan></text></g></g></g><g transform="translate(272.93299035281166, 287.15035893523543)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h62.5 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-12"></path><line y2="37.8" x2="72.5" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(36.25, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">GC调优</tspan></tspan></text></g></g></g><g transform="translate(160.13654140040433, 140.1217611946629)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-17"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">内存泄漏</tspan></tspan></text></g></g></g><g transform="translate(279.9269634324917, 121.34923626677278)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-2"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">标记清除</tspan></tspan></text></g></g></g><g transform="translate(543.0473310671516, 72.99513157582601)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-3"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">复制算法</tspan></tspan></text></g></g></g><g transform="translate(331.00078225050447, 27.26311275661749)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-4"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">标记整理</tspan></tspan></text></g></g></g><g transform="translate(451.3724239825981, 15)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-5"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">分代收集</tspan></tspan></text></g></g></g><g transform="translate(377.4173103899361, 298.7509891719236)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h99.52012634277344 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-7"></path><line y2="37.8" x2="109.52012634277344" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(54.76006317138672, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Serial收集器</tspan></tspan></text></g></g></g><g transform="translate(662.058535401846, 199.46995818711537)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h113.32594299316406 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-8"></path><line y2="37.8" x2="123.32594299316406" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(61.66297149658203, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Parallel收集器</tspan></tspan></text></g></g></g><g transform="translate(523.5697756393031, 335.11804061270175)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h87.73719024658203 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-9"></path><line y2="37.8" x2="97.73719024658203" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(48.868595123291016, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">CMS收集器</tspan></tspan></text></g></g></g><g transform="translate(530.9925528230006, 155.60816782563302)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h78.30693817138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-10"></path><line y2="37.8" x2="88.30693817138672" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(44.15346908569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">G1收集器</tspan></tspan></text></g></g></g><g transform="translate(660.5051215999886, 292.7846084011884)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h88.31531524658203 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-11"></path><line y2="37.8" x2="98.31531524658203" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(49.157657623291016, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ZGC收集器</tspan></tspan></text></g></g></g><g transform="translate(214.78301152907375, 375.6929892145257)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-13"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">参数配置</tspan></tspan></text></g></g></g><g transform="translate(152.0886450973194, 227.04494264393327)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-14"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">性能监控</tspan></tspan></text></g></g></g><g transform="translate(336.5843793147176, 369.3309087635058)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-15"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">问题诊断</tspan></tspan></text></g></g></g><g transform="translate(129.8053935088201, 314.1703636781457)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-16"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">优化策略</tspan></tspan></text></g></g></g><g transform="translate(29.113080926812586, 204.34018179812745)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-18"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">泄漏原因</tspan></tspan></text></g></g></g><g transform="translate(15, 124.36927690427979)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-19"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">检测方法</tspan></tspan></text></g></g></g><g transform="translate(82.13554923694699, 60.840099449873044)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.109375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-20"></path><line y2="37.8" x2="85.109375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5546875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">分析工具</tspan></tspan></text></g></g></g><g transform="translate(200.42441403428143, 50.34755010661332)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-21"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">解决方案</tspan></tspan></text></g></g></g></g></svg></section><section class="chapter"><h2 id="-54auas_5" data-toc="-54auas_5">🗑️ 垃圾回收基础</h2><section class="chapter"><h3 id="q1" data-toc="q1">Q1: 什么是垃圾回收？哪些内存区域需要进行垃圾回收？</h3><p id="-54auas_14"><span class="control" id="-54auas_20">答案：</span></p><p id="-54auas_15"><span class="control" id="-54auas_21">垃圾回收定义：</span> 垃圾回收（Garbage Collection，GC）是JVM自动管理内存的机制，负责回收不再被引用的对象所占用的内存空间。</p><p id="-54auas_16"><span class="control" id="-54auas_22">需要GC的内存区域：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 518.765625 804"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="518.765625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="JVM内存区域" class="cluster"><rect height="788" width="502.765625" y="8" x="8" style=""></rect><g transform="translate(213.109375, 8)" class="cluster-label"><foreignObject height="24" width="92.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JVM内存区域</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M205.461,82L212.478,82C219.495,82,233.529,82,248.171,89.417C262.813,96.833,278.064,111.667,292.837,126.035C307.61,140.404,321.904,154.307,329.052,161.259L336.199,168.211"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_B_1" d="M205.461,210L212.478,210C219.495,210,233.529,210,245.674,210C257.819,210,268.076,210,277.665,210C287.255,210,296.178,210,300.64,210L305.102,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_B_2" d="M205.461,338L212.478,338C219.495,338,233.529,338,248.171,330.583C262.813,323.167,278.064,308.333,292.837,293.965C307.61,279.596,321.904,265.693,329.052,258.741L336.199,251.789"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_3" d="M197.445,466L205.798,466C214.151,466,230.857,466,242.335,466C253.813,466,260.063,466,265.646,466C271.229,466,276.146,466,278.604,466L281.063,466"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_4" d="M210.063,594L216.313,594C222.563,594,235.063,594,245.773,594C256.483,594,265.404,594,273.658,594C281.911,594,289.499,594,293.292,594L297.086,594"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_J_5" d="M203.25,722L210.635,722C218.021,722,232.792,722,245.121,722C257.451,722,267.339,722,276.56,722C285.781,722,294.336,722,298.613,722L302.891,722"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(127.78125, 82)" id="flowchart-A-3973" class="node default"><rect height="78" width="155.359375" y="-39" x="-77.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-47.6796875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="95.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>程序计数器<br>❌ 不需要GC</p></span></div></foreignObject></g></g><g transform="translate(379.1640625, 210)" id="flowchart-B-3974" class="node default"><rect height="78" width="140.125" y="-39" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>线程私有<br>生命周期短</p></span></div></foreignObject></g></g><g transform="translate(127.78125, 210)" id="flowchart-C-3975" class="node default"><rect height="78" width="155.359375" y="-39" x="-77.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-47.6796875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="95.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>虚拟机栈<br>❌ 不需要GC</p></span></div></foreignObject></g></g><g transform="translate(127.78125, 338)" id="flowchart-D-3977" class="node default"><rect height="78" width="155.359375" y="-39" x="-77.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-47.6796875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="95.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>本地方法栈<br>❌ 不需要GC</p></span></div></foreignObject></g></g><g transform="translate(127.78125, 466)" id="flowchart-E-3979" class="node default"><rect height="78" width="139.328125" y="-39" x="-69.6640625" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-39.6640625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="79.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>堆内存<br>✅ 需要GC</p></span></div></foreignObject></g></g><g transform="translate(379.1640625, 466)" id="flowchart-F-3980" class="node default"><rect height="78" width="188.203125" y="-39" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>线程共享<br>对象存储主要区域</p></span></div></foreignObject></g></g><g transform="translate(127.78125, 594)" id="flowchart-G-3981" class="node default"><rect height="78" width="164.5625" y="-39" x="-82.28125" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-52.28125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="104.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>方法区/元空间<br>✅ 需要GC</p></span></div></foreignObject></g></g><g transform="translate(379.1640625, 594)" id="flowchart-H-3982" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>类元数据回收<br>回收条件苛刻</p></span></div></foreignObject></g></g><g transform="translate(127.78125, 722)" id="flowchart-I-3983" class="node default"><rect height="78" width="150.9375" y="-39" x="-75.46875" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-45.46875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="90.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>直接内存<br>⚠️ 特殊处理</p></span></div></foreignObject></g></g><g transform="translate(379.1640625, 722)" id="flowchart-J-3984" class="node default"><rect height="78" width="144.546875" y="-39" x="-72.2734375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-42.2734375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="84.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>手动管理<br>但可触发GC</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_18"><span class="control" id="-54auas_23">垃圾回收的目标：</span></p><ol class="list _decimal" id="-54auas_19" type="1"><li class="list__item" id="-54auas_24"><p id="-54auas_28"><span class="control" id="-54auas_29">自动内存管理</span> ：无需手动释放内存</p></li><li class="list__item" id="-54auas_25"><p id="-54auas_30"><span class="control" id="-54auas_31">防止内存泄漏</span> ：回收不再使用的对象</p></li><li class="list__item" id="-54auas_26"><p id="-54auas_32"><span class="control" id="-54auas_33">提高内存利用率</span> ：减少内存碎片</p></li><li class="list__item" id="-54auas_27"><p id="-54auas_34"><span class="control" id="-54auas_35">保证程序稳定性</span> ：避免内存溢出</p></li></ol></section><section class="chapter"><h3 id="q2" data-toc="q2">Q2: 如何判断对象是否可以回收？引用计数法和可达性分析的区别？</h3><p id="-54auas_36"><span class="control" id="-54auas_43">答案：</span></p><p id="-54auas_37"><span class="control" id="-54auas_44">对象存活判定算法：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1243.625 560"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1243.625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 96)" class="root"><g class="clusters"><g data-look="classic" id="可达性分析" class="cluster"><rect height="352" width="678.25" y="8" x="8" style=""></rect><g transform="translate(307.0625, 8)" class="cluster-label"><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可达性分析</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_J_4" d="M177.81,95L186.766,90.833C195.722,86.667,213.634,78.333,226.384,74.167C239.133,70,246.719,70,253.638,70C260.557,70,266.81,70,269.936,70L273.063,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_K_5" d="M177.81,149L186.766,153.167C195.722,157.333,213.634,165.667,226.384,169.833C239.133,174,246.719,174,253.638,174C260.557,174,266.81,174,269.936,174L273.063,174"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_L_6" d="M409.578,70L417.164,70C424.75,70,439.922,70,450.633,70C461.344,70,467.594,70,473.177,70C478.76,70,483.677,70,486.135,70L488.594,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_N_7" d="M194.047,288L200.297,288C206.547,288,219.047,288,228.422,288.28C237.797,288.559,244.047,289.118,249.633,289.618C255.219,290.118,260.141,290.558,262.602,290.778L265.063,290.999"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_N_M_8" d="M269.047,311.954L262.797,313.129C256.547,314.303,244.047,316.651,234.672,316.959C225.297,317.267,219.047,315.533,213.439,313.978C207.832,312.423,202.867,311.046,200.384,310.357L197.901,309.669"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_O_9" d="M177.81,261L186.766,256.833C195.722,252.667,213.634,244.333,241.22,240.167C268.805,236,306.063,236,343.32,236C380.578,236,417.836,236,439.59,236.838C461.344,237.676,467.594,239.353,473.2,240.856C478.806,242.36,483.768,243.691,486.249,244.356L488.73,245.022"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_N_O_10" d="M417.594,298L423.844,298C430.094,298,442.594,298,451.969,297.162C461.344,296.324,467.594,294.647,473.2,293.144C478.806,291.64,483.768,290.309,486.249,289.644L488.73,288.978"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(119.7734375, 122)" id="flowchart-I-4129" class="node default"><rect height="54" width="124.0625" y="-27" x="-62.03125" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-32.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC Roots</p></span></div></foreignObject></g></g><g transform="translate(343.3203125, 70)" id="flowchart-J-4130" class="node default"><rect height="54" width="132.515625" y="-27" x="-66.2578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-36.2578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="72.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可达对象1</p></span></div></foreignObject></g></g><g transform="translate(343.3203125, 174)" id="flowchart-K-4132" class="node default"><rect height="54" width="132.515625" y="-27" x="-66.2578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-36.2578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="72.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可达对象2</p></span></div></foreignObject></g></g><g transform="translate(570.671875, 70)" id="flowchart-L-4134" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>间接可达对象</p></span></div></foreignObject></g></g><g transform="translate(119.7734375, 288)" id="flowchart-M-4135" class="node default"><rect height="54" width="148.546875" y="-27" x="-74.2734375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-44.2734375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="88.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>不可达对象1</p></span></div></foreignObject></g></g><g transform="translate(343.3203125, 298)" id="flowchart-N-4136" class="node default"><rect height="54" width="148.546875" y="-27" x="-74.2734375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-44.2734375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="88.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>不可达对象2</p></span></div></foreignObject></g></g><g transform="translate(570.671875, 267)" id="flowchart-O-4141" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记：可回收</p></span></div></foreignObject></g></g></g></g><g transform="translate(728.25, 0)" class="root"><g class="clusters"><g data-look="classic" id="引用计数法" class="cluster"><rect height="544" width="499.375" y="8" x="8" style=""></rect><g transform="translate(217.625, 8)" class="cluster-label"><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>引用计数法</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M203.219,82L211.878,82C220.536,82,237.854,82,249.848,82C261.841,82,268.51,82,274.513,82C280.516,82,285.852,82,288.52,82L291.188,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M203.219,210L211.878,210C220.536,210,237.854,210,249.848,210C261.841,210,268.51,210,274.513,210C280.516,210,285.852,210,288.52,210L291.188,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M203.219,338L211.878,338C220.536,338,237.854,338,251.85,338C265.846,338,276.521,338,286.529,338C296.536,338,305.878,338,310.548,338L315.219,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M217.672,466L223.922,466C230.172,466,242.672,466,252.047,466C261.422,466,267.672,466,273.255,466C278.839,466,283.755,466,286.214,466L288.672,466"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(131.5859375, 82)" id="flowchart-A-4121" class="node default"><rect height="78" width="143.265625" y="-39" x="-71.6328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-41.6328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="83.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象A<br>引用计数: 2</p></span></div></foreignObject></g></g><g transform="translate(381.2734375, 82)" id="flowchart-B-4122" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>被两个变量引用</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 210)" id="flowchart-C-4123" class="node default"><rect height="78" width="143.265625" y="-39" x="-71.6328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-41.6328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="83.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象B<br>引用计数: 1</p></span></div></foreignObject></g></g><g transform="translate(381.2734375, 210)" id="flowchart-D-4124" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>被一个变量引用</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 338)" id="flowchart-E-4125" class="node default"><rect height="78" width="143.265625" y="-39" x="-71.6328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-41.6328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="83.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象C<br>引用计数: 0</p></span></div></foreignObject></g></g><g transform="translate(381.2734375, 338)" id="flowchart-F-4126" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可以回收</p></span></div></foreignObject></g></g><g transform="translate(131.5859375, 466)" id="flowchart-G-4127" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题：循环引用</p></span></div></foreignObject></g></g><g transform="translate(381.2734375, 466)" id="flowchart-H-4128" class="node default"><rect height="102" width="177.203125" y="-51" x="-88.6015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-58.6015625, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="117.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>A引用B，B引用A<br>计数都不为0<br>但实际可回收</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_39"><span class="control" id="-54auas_45">GC Roots对象包括：</span></p><div class="table-wrapper"><table class="wide" id="-54auas_40"><thead><tr class="ijRowHead" id="-54auas_46"><th id="-54auas_52"><p>类型</p></th><th id="-54auas_53"><p>说明</p></th><th id="-54auas_54"><p>示例</p></th></tr></thead><tbody><tr id="-54auas_47"><td id="-54auas_55"><p><span class="control" id="-54auas_58">虚拟机栈引用</span></p></td><td id="-54auas_56"><p>栈帧中的局部变量</p></td><td id="-54auas_57"><p>方法中的局部变量</p></td></tr><tr id="-54auas_48"><td id="-54auas_59"><p><span class="control" id="-54auas_62">方法区静态引用</span></p></td><td id="-54auas_60"><p>类静态属性引用的对象</p></td><td id="-54auas_61"><p><code class="code" id="-54auas_63">static Object obj</code></p></td></tr><tr id="-54auas_49"><td id="-54auas_64"><p><span class="control" id="-54auas_67">方法区常量引用</span></p></td><td id="-54auas_65"><p>常量池中的引用</p></td><td id="-54auas_66"><p>字符串常量池</p></td></tr><tr id="-54auas_50"><td id="-54auas_68"><p><span class="control" id="-54auas_71">本地方法栈引用</span></p></td><td id="-54auas_69"><p>JNI引用的对象</p></td><td id="-54auas_70"><p>Native方法中的对象</p></td></tr><tr id="-54auas_51"><td id="-54auas_72"><p><span class="control" id="-54auas_75">活跃线程</span></p></td><td id="-54auas_73"><p>正在运行的线程对象</p></td><td id="-54auas_74"><p>Thread实例</p></td></tr></tbody></table></div><p id="-54auas_41"><span class="control" id="-54auas_76">引用类型层次：</span></p><div class="code-block" data-lang="java">
// 引用强度从强到弱
// 1. 强引用 (Strong Reference)
Object obj = new Object();  // 不会被GC回收

// 2. 软引用 (Soft Reference) 
SoftReference&lt;Object&gt; soft = new SoftReference&lt;&gt;(new Object());
// 内存不足时会被回收

// 3. 弱引用 (Weak Reference)
WeakReference&lt;Object&gt; weak = new WeakReference&lt;&gt;(new Object());
// 下次GC时会被回收

// 4. 虚引用 (Phantom Reference)
PhantomReference&lt;Object&gt; phantom = new PhantomReference&lt;&gt;(new Object(), queue);
// 无法通过引用获取对象，仅用于通知
</div></section></section><section class="chapter"><h2 id="gc" data-toc="gc">🔄 GC算法详解</h2><section class="chapter"><h3 id="q3" data-toc="q3">Q3: 标记-清除算法的原理是什么？有什么优缺点？</h3><p id="-54auas_80"><span class="control" id="-54auas_87">答案：</span></p><p id="-54auas_81"><span class="control" id="-54auas_88">标记-清除算法（Mark-Sweep）过程：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1312.96875 898"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1312.96875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="清除阶段" class="cluster"><rect height="416" width="1194.4375" y="474" x="8" style=""></rect><g transform="translate(573.1640625, 474)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>清除阶段</p></span></div></foreignObject></g></g><g data-look="classic" id="标记阶段" class="cluster"><rect height="416" width="1288.9609375" y="8" x="16.0078125" style=""></rect><g transform="translate(628.43359375, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记阶段</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M129.086,87L129.086,91.167C129.086,95.333,129.086,103.667,129.086,109.917C129.086,116.167,129.086,120.333,129.086,123.833C129.086,127.333,129.086,130.167,129.086,131.583L129.086,133"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M129.086,191L129.086,195.167C129.086,199.333,129.086,207.667,129.086,213.917C129.086,220.167,129.086,224.333,129.086,227.833C129.086,231.333,129.086,234.167,129.086,235.583L129.086,237"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M129.086,295L129.086,299.167C129.086,303.333,129.086,311.667,129.086,317.917C129.086,324.167,129.086,328.333,129.086,331.833C129.086,335.333,129.086,338.167,129.086,339.583L129.086,341"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_K_3" d="M129.086,553L129.086,557.167C129.086,561.333,129.086,569.667,129.086,575.917C129.086,582.167,129.086,586.333,129.086,589.833C129.086,593.333,129.086,596.167,129.086,597.583L129.086,599"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_L_4" d="M129.086,657L129.086,661.167C129.086,665.333,129.086,673.667,129.086,679.917C129.086,686.167,129.086,690.333,129.086,693.833C129.086,697.333,129.086,700.167,129.086,701.583L129.086,703"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_M_5" d="M129.086,761L129.086,765.167C129.086,769.333,129.086,777.667,129.086,783.917C129.086,790.167,129.086,794.333,129.086,797.833C129.086,801.333,129.086,804.167,129.086,805.583L129.086,807"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_J_6" d="M129.086,399L129.086,403.167C129.086,407.333,129.086,415.667,129.086,424C129.086,432.333,129.086,440.667,129.086,449C129.086,457.333,129.086,465.667,129.086,471.917C129.086,478.167,129.086,482.333,129.086,485.833C129.086,489.333,129.086,492.167,129.086,493.583L129.086,495"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(129.0859375, 60)" id="flowchart-A-4250" class="node default"><rect height="54" width="124.0625" y="-27" x="-62.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC Roots</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 164)" id="flowchart-B-4251" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>遍历对象图</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 268)" id="flowchart-C-4253" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记可达对象</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 372)" id="flowchart-D-4255" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记完成</p></span></div></foreignObject></g></g><g transform="translate(320.8203125, 372)" id="flowchart-E-4256" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象1 ✅标记</p></span></div></foreignObject></g></g><g transform="translate(538.1875, 372)" id="flowchart-F-4257" class="node default"><rect height="54" width="175.375" y="-27" x="-87.6875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-57.6875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="115.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象2 ❌未标记</p></span></div></foreignObject></g></g><g transform="translate(755.5546875, 372)" id="flowchart-G-4258" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象3 ✅标记</p></span></div></foreignObject></g></g><g transform="translate(972.921875, 372)" id="flowchart-H-4259" class="node default"><rect height="54" width="175.375" y="-27" x="-87.6875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-57.6875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="115.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象4 ❌未标记</p></span></div></foreignObject></g></g><g transform="translate(1190.2890625, 372)" id="flowchart-I-4260" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象5 ✅标记</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 526)" id="flowchart-J-4261" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>扫描堆内存</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 630)" id="flowchart-K-4262" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>清除未标记对象</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 734)" id="flowchart-L-4264" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>释放内存空间</p></span></div></foreignObject></g></g><g transform="translate(129.0859375, 838)" id="flowchart-M-4266" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>清除完成</p></span></div></foreignObject></g></g><g transform="translate(320.8203125, 838)" id="flowchart-N-4267" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象1 ✅保留</p></span></div></foreignObject></g></g><g transform="translate(512.5546875, 838)" id="flowchart-O-4268" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>空闲空间</p></span></div></foreignObject></g></g><g transform="translate(704.2890625, 838)" id="flowchart-P-4269" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象3 ✅保留</p></span></div></foreignObject></g></g><g transform="translate(896.0234375, 838)" id="flowchart-Q-4270" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>空闲空间</p></span></div></foreignObject></g></g><g transform="translate(1087.7578125, 838)" id="flowchart-R-4271" class="node default"><rect height="54" width="159.359375" y="-27" x="-79.6796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-49.6796875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="99.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象5 ✅保留</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-54auas_83"><span class="control" id="-54auas_89">算法特点分析：</span></p><div class="table-wrapper"><table class="wide" id="-54auas_84"><thead><tr class="ijRowHead" id="-54auas_90"><th id="-54auas_96"><p>方面</p></th><th id="-54auas_97"><p>特点</p></th><th id="-54auas_98"><p>说明</p></th></tr></thead><tbody><tr id="-54auas_91"><td id="-54auas_99"><p><span class="control" id="-54auas_102">优点</span></p></td><td id="-54auas_100"><p>实现简单</p></td><td id="-54auas_101"><p>思路直观，容易理解</p></td></tr><tr id="-54auas_92"><td id="-54auas_103"></td><td id="-54auas_104"><p>不需要移动对象</p></td><td id="-54auas_105"><p>对象位置不变</p></td></tr><tr id="-54auas_93"><td id="-54auas_106"><p><span class="control" id="-54auas_109">缺点</span></p></td><td id="-54auas_107"><p>效率问题</p></td><td id="-54auas_108"><p>标记和清除都需要遍历</p></td></tr><tr id="-54auas_94"><td id="-54auas_110"></td><td id="-54auas_111"><p>空间问题</p></td><td id="-54auas_112"><p>产生大量内存碎片</p></td></tr><tr id="-54auas_95"><td id="-54auas_113"></td><td id="-54auas_114"><p>停顿时间</p></td><td id="-54auas_115"><p>需要停止用户线程</p></td></tr></tbody></table></div><p id="-54auas_85"><span class="control" id="-54auas_116">内存碎片问题：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 306.25 1301"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="306.25" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="问题" class="cluster"><rect height="153" width="290.25" y="8" x="8" style=""></rect><g transform="translate(137.09375, 8)" class="cluster-label"><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(153.125, 84.5)" id="flowchart-I-4420" class="node default"><rect height="78" width="220.25" y="-39" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>需要连续空间的大对象<br>无法分配</p></span></div></foreignObject></g></g></g></g><g transform="translate(59.296875, 203)" class="root"><g class="clusters"><g data-look="classic" id="GC后" class="cluster"><rect height="516" width="171.65625" y="8" x="8" style=""></rect><g transform="translate(75.59375, 8)" class="cluster-label"><foreignObject height="24" width="36.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC后</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_3" d="M93.828,99.5L93.828,105.75C93.828,112,93.828,124.5,93.828,133.875C93.828,143.25,93.828,149.5,93.828,155.083C93.828,160.667,93.828,165.583,93.828,168.042L93.828,170.5"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_4" d="M93.828,228.5L93.828,234.75C93.828,241,93.828,253.5,93.828,262.875C93.828,272.25,93.828,278.5,93.828,284.083C93.828,289.667,93.828,294.583,93.828,297.042L93.828,299.5"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_5" d="M93.828,357.5L93.828,363.75C93.828,370,93.828,382.5,93.828,391.875C93.828,401.25,93.828,407.5,93.828,413.083C93.828,418.667,93.828,423.583,93.828,426.042L93.828,428.5"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(93.828125, 72.5)" id="flowchart-E-4416" class="node default"><rect height="54" width="101.515625" y="-27" x="-50.7578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.7578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象A</p></span></div></foreignObject></g></g><g transform="translate(93.828125, 201.5)" id="flowchart-F-4417" class="node default"><rect height="54" width="92.0625" y="-27" x="-46.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>空闲</p></span></div></foreignObject></g></g><g transform="translate(93.828125, 330.5)" id="flowchart-G-4418" class="node default"><rect height="54" width="101.65625" y="-27" x="-50.828125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.828125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象C</p></span></div></foreignObject></g></g><g transform="translate(93.828125, 459.5)" id="flowchart-H-4419" class="node default"><rect height="54" width="92.0625" y="-27" x="-46.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-16.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="32.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>空闲</p></span></div></foreignObject></g></g></g></g><g transform="translate(59.1796875, 769)" class="root"><g class="clusters"><g data-look="classic" id="GC前" class="cluster"><rect height="516" width="171.890625" y="8" x="8" style=""></rect><g transform="translate(75.7109375, 8)" class="cluster-label"><foreignObject height="24" width="36.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC前</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M93.945,99.5L93.945,105.75C93.945,112,93.945,124.5,93.945,133.875C93.945,143.25,93.945,149.5,93.945,155.083C93.945,160.667,93.945,165.583,93.945,168.042L93.945,170.5"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M93.945,228.5L93.945,234.75C93.945,241,93.945,253.5,93.945,262.875C93.945,272.25,93.945,278.5,93.945,284.083C93.945,289.667,93.945,294.583,93.945,297.042L93.945,299.5"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M93.945,357.5L93.945,363.75C93.945,370,93.945,382.5,93.945,391.875C93.945,401.25,93.945,407.5,93.945,413.083C93.945,418.667,93.945,423.583,93.945,426.042L93.945,428.5"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(93.9453125, 72.5)" id="flowchart-A-4412" class="node default"><rect height="54" width="101.515625" y="-27" x="-50.7578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.7578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象A</p></span></div></foreignObject></g></g><g transform="translate(93.9453125, 201.5)" id="flowchart-B-4413" class="node default"><rect height="54" width="101.140625" y="-27" x="-50.5703125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.5703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象B</p></span></div></foreignObject></g></g><g transform="translate(93.9453125, 330.5)" id="flowchart-C-4414" class="node default"><rect height="54" width="101.65625" y="-27" x="-50.828125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.828125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象C</p></span></div></foreignObject></g></g><g transform="translate(93.9453125, 459.5)" id="flowchart-D-4415" class="node default"><rect height="54" width="101.890625" y="-27" x="-50.9453125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.9453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="41.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象D</p></span></div></foreignObject></g></g></g></g></g></g></g></svg></section><section class="chapter"><h3 id="q4" data-toc="q4">Q4: 复制算法是如何工作的？为什么新生代使用复制算法？</h3><p id="-54auas_117"><span class="control" id="-54auas_126">答案：</span></p><p id="-54auas_118"><span class="control" id="-54auas_127">复制算法（Copying）原理：</span></p><p id="-54auas_120"><span class="control" id="-54auas_128">新生代复制算法详细过程：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 850 747" style="max-width: 850px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Old" height="65" width="150" stroke="#666" fill="#eaeaea" y="661" x="600"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="693.5" x="675"><tspan dy="0" x="675">老年代</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="S1" height="65" width="150" stroke="#666" fill="#eaeaea" y="661" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="693.5" x="475"><tspan dy="0" x="475">Survivor1</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="S0" height="65" width="150" stroke="#666" fill="#eaeaea" y="661" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="693.5" x="275"><tspan dy="0" x="275">Survivor0</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Eden" height="65" width="150" stroke="#666" fill="#eaeaea" y="661" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="693.5" x="75"><tspan dy="0" x="75">Eden区</tspan></text></g><g><line name="Old" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="661" x2="675" y1="5" x1="675" id="actor221"></line><g id="root-221"><rect class="actor actor-top" ry="3" rx="3" name="Old" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="600"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="675"><tspan dy="0" x="675">老年代</tspan></text></g></g><g><line name="S1" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="661" x2="475" y1="5" x1="475" id="actor220"></line><g id="root-220"><rect class="actor actor-top" ry="3" rx="3" name="S1" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="400"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="475"><tspan dy="0" x="475">Survivor1</tspan></text></g></g><g><line name="S0" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="661" x2="275" y1="5" x1="275" id="actor219"></line><g id="root-219"><rect class="actor actor-top" ry="3" rx="3" name="S0" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="275"><tspan dy="0" x="275">Survivor0</tspan></text></g></g><g><line name="Eden" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="661" x2="75" y1="5" x1="75" id="actor218"></line><g id="root-218"><rect class="actor actor-top" ry="3" rx="3" name="Eden" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">Eden区</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="39" width="650" stroke="#666" fill="#EDF2AE" y="75" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="375"><tspan x="375">Minor GC触发</tspan></text></g><g><line class="loopLine" y2="220" x2="686" y1="220" x1="391"></line><line class="loopLine" y2="436" x2="686" y1="220" x1="686"></line><line class="loopLine" y2="436" x2="686" y1="436" x1="391"></line><line class="loopLine" y2="436" x2="391" y1="220" x1="391"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="348" x2="686" y1="348" x1="391"></line><polygon class="labelBox" points="391,220 441,220 441,233 432.6,240 391,240"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="233" x="416">alt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="238" x="563.5"><tspan x="563.5">[对象年龄 &lt; 阈值]</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="366" x="538.5">[对象年龄 &gt;= 阈值]</text></g><g><rect class="note" height="39" width="250" stroke="#666" fill="#EDF2AE" y="602" x="250"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="607" x="375"><tspan x="375">S0和S1角色互换</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="129" x="274">复制存活对象</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="162" x2="471" y1="162" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="177" x="374">复制存活对象</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="210" x2="471" y1="210" x1="276"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="270" x="476">存储对象，年龄+1</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 476,303 C 536,293 536,333 476,323"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="393" x="574">晋升到老年代</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="426" x2="671" y1="426" x1="476"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="451" x="76">清空Eden区</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,484 C 136,474 136,514 76,504"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="529" x="276">清空S0区</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,562 C 336,552 336,592 276,582"></path></svg><p id="-54auas_122"><span class="control" id="-54auas_129">复制算法优势：</span></p><ol class="list _decimal" id="-54auas_123" type="1"><li class="list__item" id="-54auas_130"><p id="-54auas_133"><span class="control" id="-54auas_134">效率高</span> ：只需遍历存活对象</p></li><li class="list__item" id="-54auas_131"><p id="-54auas_135"><span class="control" id="-54auas_136">无内存碎片</span> ：复制后内存连续</p></li><li class="list__item" id="-54auas_132"><p id="-54auas_137"><span class="control" id="-54auas_138">分配简单</span> ：使用指针碰撞分配</p></li></ol><p id="-54auas_124"><span class="control" id="-54auas_139">为什么新生代使用复制算法：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1064.71875 164"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1064.71875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="算法匹配" class="cluster"><rect height="148" width="428.328125" y="8" x="628.390625" style=""></rect><g transform="translate(810.5, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>算法匹配</p></span></div></foreignObject></g></g><g data-look="classic" id="新生代特点" class="cluster"><rect height="148" width="570.390625" y="8" x="8" style=""></rect><g transform="translate(253.1328125, 8)" class="cluster-label"><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>新生代特点</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M189.156,82L193.323,82C197.49,82,205.823,82,212.073,82C218.323,82,222.49,82,225.99,82C229.49,82,232.323,82,233.74,82L235.156,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M363.266,82L367.432,82C371.599,82,379.932,82,386.182,82C392.432,82,396.599,82,400.099,82C403.599,82,406.432,82,407.849,82L409.266,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_2" d="M809.547,82L813.714,82C817.88,82,826.214,82,832.464,82C838.714,82,842.88,82,846.38,82C849.88,82,852.714,82,854.13,82L855.547,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_3" d="M553.391,82L557.557,82C561.724,82,570.057,82,578.391,82C586.724,82,595.057,82,603.391,82C611.724,82,620.057,82,626.307,82C632.557,82,636.724,82,640.224,82C643.724,82,646.557,82,647.974,82L649.391,82"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(111.078125, 82)" id="flowchart-A-4881" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象朝生夕死</p></span></div></foreignObject></g></g><g transform="translate(301.2109375, 82)" id="flowchart-B-4882" class="node default"><rect height="78" width="124.109375" y="-39" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>存活率低<br>约10%</p></span></div></foreignObject></g></g><g transform="translate(483.328125, 82)" id="flowchart-C-4884" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>复制开销小</p></span></div></foreignObject></g></g><g transform="translate(731.46875, 82)" id="flowchart-D-4885" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>复制算法适合<br>低存活率场景</p></span></div></foreignObject></g></g><g transform="translate(945.6328125, 82)" id="flowchart-E-4886" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>新生代完美匹配</p></span></div></foreignObject></g></g></g></g></g></svg></section><section class="chapter"><h3 id="q5" data-toc="q5">Q5: 标记-整理算法解决了什么问题？它的工作原理是什么？</h3><p id="-54auas_140"><span class="control" id="-54auas_149">答案：</span></p><p id="-54auas_141"><span class="control" id="-54auas_150">标记-整理算法（Mark-Compact）原理：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1338.078125 690"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1338.078125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="整理阶段" class="cluster"><rect height="416" width="867.6875" y="266" x="16.015625" style=""></rect><g transform="translate(417.8046875, 266)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>整理阶段</p></span></div></foreignObject></g></g><g data-look="classic" id="标记阶段" class="cluster"><rect height="208" width="1322.078125" y="8" x="8" style=""></rect><g transform="translate(636.984375, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记阶段</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M137.102,87L137.102,91.167C137.102,95.333,137.102,103.667,137.102,109.917C137.102,116.167,137.102,120.333,137.102,123.833C137.102,127.333,137.102,130.167,137.102,131.583L137.102,133"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_J_1" d="M137.102,345L137.102,349.167C137.102,353.333,137.102,361.667,137.102,367.917C137.102,374.167,137.102,378.333,137.102,381.833C137.102,385.333,137.102,388.167,137.102,389.583L137.102,391"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_K_2" d="M137.102,449L137.102,453.167C137.102,457.333,137.102,465.667,137.102,471.917C137.102,478.167,137.102,482.333,137.102,485.833C137.102,489.333,137.102,492.167,137.102,493.583L137.102,495"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_L_3" d="M137.102,553L137.102,557.167C137.102,561.333,137.102,569.667,137.102,575.917C137.102,582.167,137.102,586.333,137.102,589.833C137.102,593.333,137.102,596.167,137.102,597.583L137.102,599"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_I_4" d="M137.102,191L137.102,195.167C137.102,199.333,137.102,207.667,137.102,216C137.102,224.333,137.102,232.667,137.102,241C137.102,249.333,137.102,257.667,137.102,263.917C137.102,270.167,137.102,274.333,137.102,277.833C137.102,281.333,137.102,284.167,137.102,285.583L137.102,287"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(137.1015625, 60)" id="flowchart-A-5013" class="node default"><rect height="54" width="172.140625" y="-27" x="-86.0703125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>从GC Roots开始</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 164)" id="flowchart-B-5014" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记所有可达对象</p></span></div></foreignObject></g></g><g transform="translate(344.859375, 164)" id="flowchart-C-5015" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象1 ✅</p></span></div></foreignObject></g></g><g transform="translate(522.171875, 164)" id="flowchart-D-5016" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象2 ❌</p></span></div></foreignObject></g></g><g transform="translate(699.484375, 164)" id="flowchart-E-5017" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象3 ✅</p></span></div></foreignObject></g></g><g transform="translate(876.796875, 164)" id="flowchart-F-5018" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象4 ❌</p></span></div></foreignObject></g></g><g transform="translate(1054.109375, 164)" id="flowchart-G-5019" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象5 ✅</p></span></div></foreignObject></g></g><g transform="translate(1231.421875, 164)" id="flowchart-H-5020" class="node default"><rect height="54" width="127.3125" y="-27" x="-63.65625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-33.65625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象6 ❌</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 318)" id="flowchart-I-5021" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>移动存活对象</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 422)" id="flowchart-J-5022" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>向内存一端集中</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 526)" id="flowchart-K-5024" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>更新对象引用</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 630)" id="flowchart-L-5026" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>清理边界外内存</p></span></div></foreignObject></g></g><g transform="translate(323.421875, 630)" id="flowchart-M-5027" class="node default"><rect height="54" width="100.46875" y="-27" x="-50.234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="40.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象1</p></span></div></foreignObject></g></g><g transform="translate(473.890625, 630)" id="flowchart-N-5028" class="node default"><rect height="54" width="100.46875" y="-27" x="-50.234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="40.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象3</p></span></div></foreignObject></g></g><g transform="translate(624.359375, 630)" id="flowchart-O-5029" class="node default"><rect height="54" width="100.46875" y="-27" x="-50.234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-20.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="40.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>对象5</p></span></div></foreignObject></g></g><g transform="translate(786.6484375, 630)" id="flowchart-P-5030" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可用空间</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-54auas_143"><span class="control" id="-54auas_151">解决的问题：</span></p><ol class="list _decimal" id="-54auas_144" type="1"><li class="list__item" id="-54auas_152"><p id="-54auas_155"><span class="control" id="-54auas_156">内存碎片</span> ：消除标记-清除算法的碎片问题</p></li><li class="list__item" id="-54auas_153"><p id="-54auas_157"><span class="control" id="-54auas_158">空间利用率</span> ：提高内存使用效率</p></li><li class="list__item" id="-54auas_154"><p id="-54auas_159"><span class="control" id="-54auas_160">老年代适用</span> ：适合存活率高的场景</p></li></ol><p id="-54auas_145"><span class="control" id="-54auas_161">与其他算法对比：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 595.7265625 426"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="595.7265625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="适用场景" class="cluster"><rect height="128" width="568.7734375" y="8" x="10.9453125" style=""></rect><g transform="translate(263.27734375, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>适用场景</p></span></div></foreignObject></g></g><g data-look="classic" id="算法对比" class="cluster"><rect height="232" width="579.7265625" y="186" x="8" style=""></rect><g transform="translate(265.80859375, 186)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>算法对比</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M108,265L108,269.167C108,273.333,108,281.667,108,287.917C108,294.167,108,298.333,108,301.833C108,305.333,108,308.167,108,309.583L108,311"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M287.32,265L287.32,269.167C287.32,273.333,287.32,281.667,287.32,287.917C287.32,294.167,287.32,298.333,287.32,301.833C287.32,305.333,287.32,308.167,287.32,309.583L287.32,311"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M482.664,265L482.664,269.167C482.664,273.333,482.664,281.667,482.664,287.917C482.664,294.167,482.664,298.333,482.664,301.833C482.664,305.333,482.664,308.167,482.664,309.583L482.664,311"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_E_3" d="M482.664,111L482.664,115.167C482.664,119.333,482.664,127.667,482.664,136C482.664,144.333,482.664,152.667,482.664,161C482.664,169.333,482.664,177.667,482.664,183.917C482.664,190.167,482.664,194.333,482.664,197.833C482.664,201.333,482.664,204.167,482.664,205.583L482.664,207"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_C_4" d="M287.32,111L287.32,115.167C287.32,119.333,287.32,127.667,287.32,136C287.32,144.333,287.32,152.667,287.32,161C287.32,169.333,287.32,177.667,287.32,183.917C287.32,190.167,287.32,194.333,287.32,197.833C287.32,201.333,287.32,204.167,287.32,205.583L287.32,207"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_A_5" d="M108,111L108,115.167C108,119.333,108,127.667,108,136C108,144.333,108,152.667,108,161C108,169.333,108,177.667,108,183.917C108,190.167,108,194.333,108,197.833C108,201.333,108,204.167,108,205.583L108,207"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(108, 238)" id="flowchart-A-5148" class="node default"><rect height="54" width="130" y="-27" x="-65" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-35, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="70"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记-清除</p></span></div></foreignObject></g></g><g transform="translate(108, 354)" id="flowchart-B-5149" class="node default"><rect height="78" width="108.078125" y="-39" x="-54.0390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-24.0390625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="48.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>速度快<br>有碎片</p></span></div></foreignObject></g></g><g transform="translate(287.3203125, 238)" id="flowchart-C-5150" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>复制算法</p></span></div></foreignObject></g></g><g transform="translate(287.3203125, 354)" id="flowchart-D-5151" class="node default"><rect height="78" width="150.5625" y="-39" x="-75.28125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-45.28125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="90.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>无碎片<br>空间浪费50%</p></span></div></foreignObject></g></g><g transform="translate(482.6640625, 238)" id="flowchart-E-5152" class="node default"><rect height="54" width="130" y="-27" x="-65" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-35, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="70"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记-整理</p></span></div></foreignObject></g></g><g transform="translate(482.6640625, 354)" id="flowchart-F-5153" class="node default"><rect height="78" width="140.125" y="-39" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>无碎片<br>速度相对慢</p></span></div></foreignObject></g></g><g transform="translate(482.6640625, 72)" id="flowchart-G-5154" class="node default"><rect height="78" width="124.109375" y="-39" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>老年代<br>存活率高</p></span></div></foreignObject></g></g><g transform="translate(287.3203125, 72)" id="flowchart-H-5156" class="node default"><rect height="78" width="124.109375" y="-39" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>新生代<br>存活率低</p></span></div></foreignObject></g></g><g transform="translate(108, 72)" id="flowchart-I-5158" class="node default"><rect height="78" width="124.109375" y="-39" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>特殊场景<br>简单实现</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-54auas_147"><span class="control" id="-54auas_162">工作步骤详解：</span></p><ol class="list _decimal" id="-54auas_148" type="1"><li class="list__item" id="-54auas_163"><p id="-54auas_166"><span class="control" id="-54auas_167">标记阶段</span> ：标记所有存活对象</p></li><li class="list__item" id="-54auas_164"><p id="-54auas_168"><span class="control" id="-54auas_169">整理阶段</span> ：移动存活对象到内存一端</p></li><li class="list__item" id="-54auas_165"><p id="-54auas_170"><span class="control" id="-54auas_171">清除阶段</span> ：清理边界外的所有内存</p></li></ol></section></section><section class="chapter"><h2 id="-54auas_7" data-toc="-54auas_7">🛠️ 垃圾收集器详解</h2><section class="chapter"><h3 id="q6" data-toc="q6">Q6: 有哪些垃圾收集器？它们各自的特点和适用场景是什么？</h3><p id="-54auas_175"><span class="control" id="-54auas_180">答案：</span></p><p id="-54auas_176"><span class="control" id="-54auas_181">垃圾收集器演进图：</span></p><svg aria-roledescription="timeline" role="graphics-document document" viewBox="0 -61 1190 630" style="max-width: 1190px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g></g><defs><marker orient="auto" markerHeight="4" markerWidth="6" refY="2" refX="5" id="arrowhead"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><g transform="translate(100, 50)"><g class="timeline-node section--1"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line--1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">JDK早期</tspan></text></g></g></g><g transform="translate(100, 167.8)" class="taskWrapper"><g class="timeline-node section--1"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line--1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">Serial</tspan></text></g></g></g><g class="lineWrapper"><line stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke="black" stroke-width="2" y2="519" x2="195" y1="235.60000000000002" x1="195"></line></g><g transform="translate(100, 367.8)" class="eventWrapper"><g class="timeline-node section--1"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line--1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">单线程收集器</tspan></text></g></g></g><g transform="translate(100, 427.8)" class="eventWrapper"><g class="timeline-node section--1"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line--1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">适合单CPU环境</tspan></text></g></g></g><g transform="translate(300, 50)"><g class="timeline-node section-0"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-0"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">JDK1.3+</tspan></text></g></g></g><g transform="translate(300, 167.8)" class="taskWrapper"><g class="timeline-node section-0"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-0"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">Parallel</tspan></text></g></g></g><g class="lineWrapper"><line stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke="black" stroke-width="2" y2="519" x2="395" y1="235.60000000000002" x1="395"></line></g><g transform="translate(300, 367.8)" class="eventWrapper"><g class="timeline-node section-0"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-0"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">多线程并行收集</tspan></text></g></g></g><g transform="translate(300, 427.8)" class="eventWrapper"><g class="timeline-node section-0"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-0"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">吞吐量优先</tspan></text></g></g></g><g transform="translate(500, 50)"><g class="timeline-node section-1"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">JDK1.5+</tspan></text></g></g></g><g transform="translate(500, 167.8)" class="taskWrapper"><g class="timeline-node section-1"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">CMS</tspan></text></g></g></g><g class="lineWrapper"><line stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke="black" stroke-width="2" y2="519" x2="595" y1="235.60000000000002" x1="595"></line></g><g transform="translate(500, 367.8)" class="eventWrapper"><g class="timeline-node section-1"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">并发标记清除</tspan></text></g></g></g><g transform="translate(500, 427.8)" class="eventWrapper"><g class="timeline-node section-1"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-1"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">低延迟优先</tspan></text></g></g></g><g transform="translate(700, 50)"><g class="timeline-node section-2"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-2"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">JDK1.7+</tspan></text></g></g></g><g transform="translate(700, 167.8)" class="taskWrapper"><g class="timeline-node section-2"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-2"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">G1</tspan></text></g></g></g><g class="lineWrapper"><line stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke="black" stroke-width="2" y2="519" x2="795" y1="235.60000000000002" x1="795"></line></g><g transform="translate(700, 367.8)" class="eventWrapper"><g class="timeline-node section-2"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-2"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">分区域收集</tspan></text></g></g></g><g transform="translate(700, 427.8)" class="eventWrapper"><g class="timeline-node section-2"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-2"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">平衡吞吐量和延迟</tspan></text></g></g></g><g transform="translate(900, 50)"><g class="timeline-node section-3"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-3"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">JDK11+</tspan></text></g></g></g><g transform="translate(900, 167.8)" class="taskWrapper"><g class="timeline-node section-3"><g><path d="M0 62.8 v-57.8 q0,-5 5,-5 h180 q5,0 5,5 v62.8 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="67.8" x2="190" y1="67.8" x1="0" class="node-line-3"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">ZGC</tspan></text></g></g></g><g class="lineWrapper"><line stroke-dasharray="5,5" marker-end="url(#arrowhead)" stroke="black" stroke-width="2" y2="519" x2="995" y1="235.60000000000002" x1="995"></line></g><g transform="translate(900, 367.8)" class="eventWrapper"><g class="timeline-node section-3"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-3"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">超低延迟收集器</tspan></text></g></g></g><g transform="translate(900, 427.8)" class="eventWrapper"><g class="timeline-node section-3"><g><path d="M0 45 v-40 q0,-5 5,-5 h180 q5,0 5,5 v45 H0 Z" class="node-bkg node-undefined" id="node-undefined"></path><line y2="50" x2="190" y1="50" x1="0" class="node-line-3"></line></g><g transform="translate(95, 10)"><text text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><tspan dy="1em" x="0">毫秒级停顿</tspan></text></g></g></g><text y="20" font-weight="bold" font-size="4ex" x="445">垃圾收集器发展历程</text><g class="lineWrapper"><line marker-end="url(#arrowhead)" stroke="black" stroke-width="4" y2="285.6" x2="1140" y1="285.6" x1="50"></line></g></svg><p id="-54auas_178"><span class="control" id="-54auas_182">收集器详细对比：</span></p><div class="table-wrapper"><table class="wide" id="-54auas_179"><thead><tr class="ijRowHead" id="-54auas_183"><th id="-54auas_190"><p>收集器</p></th><th id="-54auas_191"><p>类型</p></th><th id="-54auas_192"><p>目标</p></th><th id="-54auas_193"><p>停顿时间</p></th><th id="-54auas_194"><p>吞吐量</p></th><th id="-54auas_195"><p>适用场景</p></th></tr></thead><tbody><tr id="-54auas_184"><td id="-54auas_196"><p><span class="control" id="-54auas_202">Serial</span></p></td><td id="-54auas_197"><p>单线程</p></td><td id="-54auas_198"><p>简单可靠</p></td><td id="-54auas_199"><p>较长</p></td><td id="-54auas_200"><p>低</p></td><td id="-54auas_201"><p>客户端应用</p></td></tr><tr id="-54auas_185"><td id="-54auas_203"><p><span class="control" id="-54auas_209">ParNew</span></p></td><td id="-54auas_204"><p>多线程</p></td><td id="-54auas_205"><p>配合CMS</p></td><td id="-54auas_206"><p>较长</p></td><td id="-54auas_207"><p>中等</p></td><td id="-54auas_208"><p>服务端新生代</p></td></tr><tr id="-54auas_186"><td id="-54auas_210"><p><span class="control" id="-54auas_216">Parallel</span></p></td><td id="-54auas_211"><p>多线程</p></td><td id="-54auas_212"><p>高吞吐量</p></td><td id="-54auas_213"><p>较长</p></td><td id="-54auas_214"><p>高</p></td><td id="-54auas_215"><p>后台计算</p></td></tr><tr id="-54auas_187"><td id="-54auas_217"><p><span class="control" id="-54auas_223">CMS</span></p></td><td id="-54auas_218"><p>并发</p></td><td id="-54auas_219"><p>低延迟</p></td><td id="-54auas_220"><p>短</p></td><td id="-54auas_221"><p>中等</p></td><td id="-54auas_222"><p>响应敏感应用</p></td></tr><tr id="-54auas_188"><td id="-54auas_224"><p><span class="control" id="-54auas_230">G1</span></p></td><td id="-54auas_225"><p>分区</p></td><td id="-54auas_226"><p>平衡</p></td><td id="-54auas_227"><p>可控</p></td><td id="-54auas_228"><p>高</p></td><td id="-54auas_229"><p>大堆内存应用</p></td></tr><tr id="-54auas_189"><td id="-54auas_231"><p><span class="control" id="-54auas_237">ZGC</span></p></td><td id="-54auas_232"><p>并发</p></td><td id="-54auas_233"><p>超低延迟</p></td><td id="-54auas_234"><p>极短</p></td><td id="-54auas_235"><p>高</p></td><td id="-54auas_236"><p>延迟敏感应用</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="q7-cms" data-toc="q7-cms">Q7: CMS垃圾收集器的工作原理是什么？有哪些缺点？</h3><p id="-54auas_238"><span class="control" id="-54auas_247">答案：</span></p><p id="-54auas_239"><span class="control" id="-54auas_248">CMS（Concurrent Mark Sweep）工作流程：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-59 -10 490 1367" style="max-width: 490px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="GC" height="65" width="150" stroke="#666" fill="#eaeaea" y="1281" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1313.5" x="275"><tspan dy="0" x="275">GC线程</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="1281" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1313.5" x="75"><tspan dy="0" x="75">应用线程</tspan></text></g><g><line name="GC" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1281" x2="275" y1="5" x1="275" id="actor223"></line><g id="root-223"><rect class="actor actor-top" ry="3" rx="3" name="GC" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="200"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="275"><tspan dy="0" x="275">GC线程</tspan></text></g></g><g><line name="App" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1281" x2="75" y1="5" x1="75" id="actor222"></line><g id="root-222"><rect class="actor actor-top" ry="3" rx="3" name="App" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">应用线程</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="39" width="250" stroke="#666" fill="#EDF2AE" y="75" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="175"><tspan x="175">1. 初始标记 (STW)</tspan></text></g><g><rect class="note" height="39" width="250" stroke="#666" fill="#EDF2AE" y="358" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="363" x="175"><tspan x="175">2. 并发标记</tspan></text></g><g><line class="loopLine" y2="407" x2="361" y1="407" x1="-9"></line><line class="loopLine" y2="663" x2="361" y1="407" x1="361"></line><line class="loopLine" y2="663" x2="361" y1="663" x1="-9"></line><line class="loopLine" y2="663" x2="-9" y1="407" x1="-9"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="535" x2="361" y1="535" x1="-9"></line><polygon class="labelBox" points="-9,407 41,407 41,420 32.6,427 -9,427"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="420" x="16">par</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="425" x="201"><tspan x="201">[并发执行]</tspan></text></g><g><rect class="note" height="39" width="250" stroke="#666" fill="#EDF2AE" y="673" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="678" x="175"><tspan x="175">3. 重新标记 (STW)</tspan></text></g><g><rect class="note" height="39" width="250" stroke="#666" fill="#EDF2AE" y="956" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="961" x="175"><tspan x="175">4. 并发清除</tspan></text></g><g><line class="loopLine" y2="1005" x2="361" y1="1005" x1="-9"></line><line class="loopLine" y2="1261" x2="361" y1="1005" x1="361"></line><line class="loopLine" y2="1261" x2="361" y1="1261" x1="-9"></line><line class="loopLine" y2="1261" x2="-9" y1="1005" x1="-9"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="1133" x2="361" y1="1133" x1="-9"></line><polygon class="labelBox" points="-9,1005 41,1005 41,1018 32.6,1025 -9,1025"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1018" x="16">par</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="1023" x="201"><tspan x="201">[并发执行]</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="129" x="76">停止应用线程</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,162 C 136,152 136,192 76,182"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="207" x="276">标记GC Roots直接关联对象</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,240 C 336,230 336,270 276,260"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="285" x="76">恢复应用线程</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,318 C 136,308 136,348 76,338"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="457" x="76">继续运行</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,490 C 136,480 136,520 76,510"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="560" x="276">标记所有可达对象</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,593 C 336,583 336,623 276,613"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="727" x="76">停止应用线程</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,760 C 136,750 136,790 76,780"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="805" x="276">修正并发标记期间变化的对象</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,838 C 336,828 336,868 276,858"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="883" x="76">恢复应用线程</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,916 C 136,906 136,946 76,936"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1055" x="76">继续运行</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,1088 C 136,1078 136,1118 76,1108"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1158" x="276">清除未标记对象</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 276,1191 C 336,1181 336,1221 276,1211"></path></svg><p id="-54auas_241"><span class="control" id="-54auas_249">CMS的优点：</span></p><ol class="list _decimal" id="-54auas_242" type="1"><li class="list__item" id="-54auas_250"><p id="-54auas_253"><span class="control" id="-54auas_254">并发收集</span> ：大部分时间与应用程序并发执行</p></li><li class="list__item" id="-54auas_251"><p id="-54auas_255"><span class="control" id="-54auas_256">低停顿</span> ：只在初始标记和重新标记时停止应用</p></li><li class="list__item" id="-54auas_252"><p id="-54auas_257"><span class="control" id="-54auas_258">响应快</span> ：适合对响应时间敏感的应用</p></li></ol><p id="-54auas_243"><span class="control" id="-54auas_259">CMS的缺点：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 574.453125 548"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="574.453125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="CMS缺点" class="cluster"><rect height="532" width="558.453125" y="8" x="8" style=""></rect><g transform="translate(256.8515625, 8)" class="cluster-label"><foreignObject height="24" width="60.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CMS缺点</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M216.125,82L225.305,82C234.484,82,252.844,82,266.613,82C280.383,82,289.563,82,298.076,82C306.589,82,314.435,82,318.358,82L322.281,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M233.703,210L239.953,210C246.203,210,258.703,210,268.078,210C277.453,210,283.703,210,289.286,210C294.87,210,299.786,210,302.245,210L304.703,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M217.68,338L226.6,338C235.521,338,253.362,338,267.833,338C282.303,338,293.404,338,303.837,338C314.271,338,324.038,338,328.921,338L333.805,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M217.68,466L226.6,466C235.521,466,253.362,466,267.173,466C280.984,466,290.766,466,299.88,466C308.995,466,317.443,466,321.667,466L325.891,466"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(139.6015625, 82)" id="flowchart-A-5350" class="node default"><rect height="54" width="153.046875" y="-27" x="-76.5234375" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-46.5234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="93.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CPU资源敏感</p></span></div></foreignObject></g></g><g transform="translate(418.828125, 82)" id="flowchart-B-5351" class="node default"><rect height="78" width="185.09375" y="-39" x="-92.546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-62.546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="125.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并发阶段占用CPU<br>影响应用性能</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 210)" id="flowchart-C-5352" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>无法处理浮动垃圾</p></span></div></foreignObject></g></g><g transform="translate(418.828125, 210)" id="flowchart-D-5353" class="node default"><rect height="78" width="220.25" y="-39" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并发清除时产生新垃圾<br>只能下次GC处理</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 338)" id="flowchart-E-5354" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>空间碎片问题</p></span></div></foreignObject></g></g><g transform="translate(418.828125, 338)" id="flowchart-F-5355" class="node default"><rect height="78" width="162.046875" y="-39" x="-81.0234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-51.0234375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="102.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>标记-清除算法<br>产生内存碎片</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 466)" id="flowchart-G-5356" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并发失败风险</p></span></div></foreignObject></g></g><g transform="translate(418.828125, 466)" id="flowchart-H-5357" class="node default"><rect height="78" width="177.875" y="-39" x="-88.9375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-58.9375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="117.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>预留空间不足<br>退化为Serial Old</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_245"><span class="control" id="-54auas_260">CMS相关参数：</span></p><div class="code-block" data-lang="bash">
# 启用CMS收集器
-XX:+UseConcMarkSweepGC

# 老年代使用率达到多少时触发CMS
-XX:CMSInitiatingOccupancyFraction=75

# 多少次Full GC后进行压缩
-XX:CMSFullGCsBeforeCompaction=5

# CMS并发线程数
-XX:ConcGCThreads=4
</div></section><section class="chapter"><h3 id="q8-g1" data-toc="q8-g1">Q8: G1垃圾收集器有什么特点？它是如何实现低延迟的？</h3><p id="-54auas_261"><span class="control" id="-54auas_270">答案：</span></p><p id="-54auas_262"><span class="control" id="-54auas_271">G1（Garbage-First）设计理念：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1039.671875 988"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1039.671875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 296)" class="root"><g class="clusters"><g data-look="classic" id="G1特点" class="cluster"><rect height="380" width="510.375" y="8" x="8" style=""></rect><g transform="translate(237.53125, 8)" class="cluster-label"><foreignObject height="24" width="51.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>G1特点</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_K_6" d="M177.617,82L185.202,82C192.786,82,207.956,82,219.359,82C230.762,82,238.398,82,245.368,82C252.339,82,258.642,82,261.794,82L264.945,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_M_7" d="M185.625,210L191.875,210C198.125,210,210.625,210,221.335,210C232.046,210,240.966,210,249.22,210C257.474,210,265.061,210,268.855,210L272.648,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_N_O_8" d="M177.617,326L185.202,326C192.786,326,207.956,326,218.665,326C229.375,326,235.625,326,241.208,326C246.792,326,251.708,326,254.167,326L256.625,326"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(115.5625, 82)" id="flowchart-J-5449" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>分区收集</p></span></div></foreignObject></g></g><g transform="translate(370.75, 82)" id="flowchart-K-5450" class="node default"><rect height="78" width="203.609375" y="-39" x="-101.8046875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-71.8046875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="143.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可以选择性回收<br>价值高的Region优先</p></span></div></foreignObject></g></g><g transform="translate(115.5625, 210)" id="flowchart-L-5451" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>可预测停顿</p></span></div></foreignObject></g></g><g transform="translate(370.75, 210)" id="flowchart-M-5452" class="node default"><rect height="78" width="188.203125" y="-39" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>通过停顿时间目标<br>控制收集范围</p></span></div></foreignObject></g></g><g transform="translate(115.5625, 326)" id="flowchart-N-5453" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并发标记</p></span></div></foreignObject></g></g><g transform="translate(370.75, 326)" id="flowchart-O-5454" class="node default"><rect height="54" width="220.25" y="-27" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>大部分工作与应用并发</p></span></div></foreignObject></g></g></g></g><g transform="translate(560.375, 0)" class="root"><g class="clusters"><g data-look="classic" id="G1内存布局" class="cluster"><rect height="972" width="463.296875" y="8" x="8" style=""></rect><g transform="translate(197.96875, 8)" class="cluster-label"><foreignObject height="24" width="83.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>G1内存布局</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M107.263,375L121.232,326.167C135.201,277.333,163.14,179.667,183.755,130.833C204.37,82,217.661,82,230.286,82C242.911,82,254.87,82,260.849,82L266.828,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_1" d="M112.412,375L125.523,347.5C138.634,320,164.856,265,184.613,237.5C204.37,210,217.661,210,230.286,210C242.911,210,254.87,210,260.849,210L266.828,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_2" d="M138.157,375L146.977,368.833C155.797,362.667,173.438,350.333,188.904,344.167C204.37,338,217.661,338,230.286,338C242.911,338,254.87,338,260.849,338L266.828,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_E_3" d="M138.157,429L146.977,435.167C155.797,441.333,173.438,453.667,188.904,459.833C204.37,466,217.661,466,230.286,466C242.911,466,254.87,466,260.849,466L266.828,466"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_F_4" d="M112.412,429L125.523,456.5C138.634,484,164.856,539,183.731,566.5C202.607,594,214.135,594,224.997,594C235.859,594,246.055,594,251.152,594L256.25,594"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_G_5" d="M107.564,429L121.483,475.833C135.402,522.667,163.24,616.333,185.597,663.167C207.954,710,224.831,710,241.04,710C257.25,710,272.793,710,280.564,710L288.336,710"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(99.5390625, 402)" id="flowchart-A-5435" class="node default"><rect height="54" width="108.078125" y="-27" x="-54.0390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-24.0390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="48.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>堆内存</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 82)" id="flowchart-B-5436" class="node default"><rect height="78" width="120.71875" y="-39" x="-60.359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-30.359375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="60.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Region 1<br>Eden</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 210)" id="flowchart-C-5438" class="node default"><rect height="78" width="120.71875" y="-39" x="-60.359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-30.359375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="60.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Region 2<br>Survivor</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 338)" id="flowchart-D-5440" class="node default"><rect height="78" width="120.71875" y="-39" x="-60.359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-30.359375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="60.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Region 3<br>Old</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 466)" id="flowchart-E-5442" class="node default"><rect height="78" width="120.71875" y="-39" x="-60.359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-30.359375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="60.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Region 4<br>Eden</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 594)" id="flowchart-F-5444" class="node default"><rect height="78" width="141.875" y="-39" x="-70.9375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.9375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="81.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Region 5<br>Humongous</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 710)" id="flowchart-G-5446" class="node default"><rect height="54" width="77.703125" y="-27" x="-38.8515625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-8.8515625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="17.703125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>...</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 814)" id="flowchart-H-5447" class="node default"><rect height="54" width="201.859375" y="-27" x="-100.9296875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-70.9296875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="141.859375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>每个Region: 1-32MB</p></span></div></foreignObject></g></g><g transform="translate(331.1875, 918)" id="flowchart-I-5448" class="node default"><rect height="54" width="205.21875" y="-27" x="-102.609375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-72.609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="145.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>总共约2048个Region</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_264"><span class="control" id="-54auas_272">G1工作流程：</span></p><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 1057 872" style="max-width: 1057px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Full" height="65" width="150" stroke="#666" fill="#eaeaea" y="786" x="707"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="818.5" x="782"><tspan dy="0" x="782">Full GC</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Mixed" height="65" width="150" stroke="#666" fill="#eaeaea" y="786" x="467"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="818.5" x="542"><tspan dy="0" x="542">混合收集</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Concurrent" height="65" width="150" stroke="#666" fill="#eaeaea" y="786" x="235"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="818.5" x="310"><tspan dy="0" x="310">并发标记</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Young" height="65" width="150" stroke="#666" fill="#eaeaea" y="786" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="818.5" x="75"><tspan dy="0" x="75">新生代收集</tspan></text></g><g><line name="Full" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="786" x2="782" y1="5" x1="782" id="actor227"></line><g id="root-227"><rect class="actor actor-top" ry="3" rx="3" name="Full" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="707"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="782"><tspan dy="0" x="782">Full GC</tspan></text></g></g><g><line name="Mixed" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="786" x2="542" y1="5" x1="542" id="actor226"></line><g id="root-226"><rect class="actor actor-top" ry="3" rx="3" name="Mixed" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="467"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="542"><tspan dy="0" x="542">混合收集</tspan></text></g></g><g><line name="Concurrent" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="786" x2="310" y1="5" x1="310" id="actor225"></line><g id="root-225"><rect class="actor actor-top" ry="3" rx="3" name="Concurrent" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="235"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="310"><tspan dy="0" x="310">并发标记</tspan></text></g></g><g><line name="Young" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="786" x2="75" y1="5" x1="75" id="actor224"></line><g id="root-224"><rect class="actor actor-top" ry="3" rx="3" name="Young" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">新生代收集</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="39" width="757" stroke="#666" fill="#EDF2AE" y="75" x="50"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="429"><tspan x="429">G1收集周期</tspan></text></g><g><rect class="note" height="39" width="185" stroke="#666" fill="#EDF2AE" y="202" x="100"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="207" x="193"><tspan x="193">回收Eden和Survivor区</tspan></text></g><g><rect class="note" height="39" width="182" stroke="#666" fill="#EDF2AE" y="377" x="335"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="382" x="426"><tspan x="426">标记整个堆的存活对象</tspan></text></g><g><rect class="note" height="39" width="190" stroke="#666" fill="#EDF2AE" y="552" x="567"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="557" x="662"><tspan x="662">收集新生代+部分老年代</tspan></text></g><g><rect class="note" height="39" width="150" stroke="#666" fill="#EDF2AE" y="727" x="807"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="732" x="882"><tspan x="882">回退到Serial Old</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="129" x="76">Young GC</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 76,162 C 136,152 136,192 76,182"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="256" x="191">堆使用率达到阈值</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="289" x2="306" y1="289" x1="76"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="304" x="311">并发标记周期</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 311,337 C 371,327 371,367 311,357"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="431" x="425">标记完成</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="464" x2="538" y1="464" x1="311"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="479" x="543">混合收集</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 543,512 C 603,502 603,542 543,532"></path><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="606" x="661">分配失败或并发失败</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="639" x2="778" y1="639" x1="543"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="654" x="783">Full GC</text><path style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" d="M 783,687 C 843,677 843,717 783,707"></path></svg><p id="-54auas_266"><span class="control" id="-54auas_273">G1低延迟实现机制：</span></p><ol class="list _decimal" id="-54auas_267" type="1"><li class="list__item" id="-54auas_274"><p id="-54auas_277"><span class="control" id="-54auas_279">增量收集</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 807.5625 70"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="807.5625" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M243.656,35L247.823,35C251.99,35,260.323,35,266.573,35C272.823,35,276.99,35,280.49,35C283.99,35,286.823,35,288.24,35L289.656,35"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M497.266,35L501.432,35C505.599,35,513.932,35,520.182,35C526.432,35,530.599,35,534.099,35C537.599,35,540.432,35,541.849,35L543.266,35"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(125.828125, 35)" id="flowchart-A-5534" class="node default"><rect height="54" width="235.65625" y="-27" x="-117.828125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-87.828125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="175.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>选择收集价值高的Region</p></span></div></foreignObject></g></g><g transform="translate(395.4609375, 35)" id="flowchart-B-5535" class="node default"><rect height="54" width="203.609375" y="-27" x="-101.8046875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-71.8046875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="143.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>垃圾多的Region优先</p></span></div></foreignObject></g></g><g transform="translate(673.4140625, 35)" id="flowchart-C-5537" class="node default"><rect height="54" width="252.296875" y="-27" x="-126.1484375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-96.1484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>在停顿时间内尽可能多收集</p></span></div></foreignObject></g></g></g></g></g></svg></li><li class="list__item" id="-54auas_275"><p id="-54auas_280"><span class="control" id="-54auas_282">停顿时间目标</span></p><div class="code-block" data-lang="bash">
# 设置期望的停顿时间目标
-XX:MaxGCPauseMillis=200  # 目标200ms
</div></li><li class="list__item" id="-54auas_276"><p id="-54auas_283"><span class="control" id="-54auas_285">并发处理</span></p><ul class="list _bullet" id="-54auas_284"><li class="list__item" id="-54auas_286"><p id="-54auas_288">并发标记：与应用程序并发执行</p></li><li class="list__item" id="-54auas_287"><p id="-54auas_289">并发筛选：在后台筛选收集价值</p></li></ul></li></ol><p id="-54auas_268"><span class="control" id="-54auas_290">G1适用场景：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 644.8125 524"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="644.8125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 24)" class="root"><g class="clusters"><g data-look="classic" id="G1参数配置" class="cluster"><rect height="460" width="335" y="8" x="8" style=""></rect><g transform="translate(133.8203125, 8)" class="cluster-label"><foreignObject height="24" width="83.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>G1参数配置</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(175.5, 70)" id="flowchart-E-5604" class="node default"><rect height="54" width="163.421875" y="-27" x="-81.7109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-51.7109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="103.421875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>-XX:+UseG1GC</p></span></div></foreignObject></g></g><g transform="translate(175.5, 174)" id="flowchart-F-5605" class="node default"><rect height="54" width="248.78125" y="-27" x="-124.390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-94.390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="188.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>-XX:MaxGCPauseMillis=200</p></span></div></foreignObject></g></g><g transform="translate(175.5, 290)" id="flowchart-G-5606" class="node default"><rect height="78" width="260" y="-39" x="-130" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>-XX:G1HeapRegionSize=16m</p></span></div></foreignObject></g></g><g transform="translate(175.5, 406)" id="flowchart-H-5607" class="node default"><rect height="54" width="248.78125" y="-27" x="-124.390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-94.390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="188.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>-XX:G1NewSizePercent=30</p></span></div></foreignObject></g></g></g></g><g transform="translate(385, 0)" class="root"><g class="clusters"><g data-look="classic" id="G1适合的应用" class="cluster"><rect height="508" width="243.8125" y="8" x="8" style=""></rect><g transform="translate(80.2109375, 8)" class="cluster-label"><foreignObject height="24" width="99.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>G1适合的应用</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(129.90625, 82)" id="flowchart-A-5600" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>大堆内存应用<br>&gt; 6GB</p></span></div></foreignObject></g></g><g transform="translate(129.90625, 210)" id="flowchart-B-5601" class="node default"><rect height="78" width="150.359375" y="-39" x="-75.1796875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-45.1796875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="90.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>低延迟要求<br>&lt; 500ms停顿</p></span></div></foreignObject></g></g><g transform="translate(129.90625, 338)" id="flowchart-C-5602" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>垃圾产生速率<br>适中的应用</p></span></div></foreignObject></g></g><g transform="translate(129.90625, 454)" id="flowchart-D-5603" class="node default"><rect height="54" width="168.8125" y="-27" x="-84.40625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-54.40625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="108.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>替换CMS的场景</p></span></div></foreignObject></g></g></g></g></g></g></g></svg></section></section><section class="chapter"><h2 id="gc" data-toc="gc">🔧 GC调优实践</h2><section class="chapter"><h3 id="q9-gc" data-toc="q9-gc">Q9: 如何进行GC调优？有哪些关键指标和调优策略？</h3><p id="-54auas_293"><span class="control" id="-54auas_300">答案：</span></p><p id="-54auas_294"><span class="control" id="-54auas_301">GC调优流程：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1114.53125 895.046875" height="895.046875" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1114.53125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M957.422,99.5L957.422,109.917C957.422,120.333,957.422,141.167,957.422,153.667C957.422,166.167,957.422,170.333,957.422,173.833C957.422,177.333,957.422,180.167,957.422,181.583L957.422,183"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M957.422,241L957.422,245.167C957.422,249.333,957.422,257.667,957.422,263.917C957.422,270.167,957.422,274.333,957.422,277.833C957.422,281.333,957.422,284.167,957.422,285.583L957.422,287"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M957.422,345L957.422,349.167C957.422,353.333,957.422,361.667,957.422,367.917C957.422,374.167,957.422,378.333,957.422,381.833C957.422,385.333,957.422,388.167,957.422,389.583L957.422,391"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M993.269,449L998.801,453.167C1004.333,457.333,1015.397,465.667,1020.929,471.917C1026.461,478.167,1026.461,482.333,1026.461,485.833C1026.461,489.333,1026.461,492.167,1026.461,493.583L1026.461,495"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_4" d="M1026.461,553L1026.461,557.167C1026.461,561.333,1026.461,569.667,1026.503,575.958C1026.544,582.25,1026.628,586.5,1026.698,590.083C1026.768,593.667,1026.825,596.584,1026.854,598.042L1026.883,599.501"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_5" d="M993.349,725.935L984.358,737.62C975.368,749.305,957.387,772.676,945.071,787.445C932.754,802.214,926.102,808.38,919.939,814.094C913.775,819.807,908.101,825.067,905.264,827.697L902.426,830.328"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_H_6" d="M1037.527,748.981L1038.685,756.826C1039.843,764.67,1042.16,780.358,1043.318,791.286C1044.477,802.214,1044.477,808.38,1044.477,813.88C1044.477,819.38,1044.477,824.214,1044.477,826.63L1044.477,829.047"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_D_7" d="M864.458,833.047L863.108,826.88C861.758,820.714,859.059,808.38,857.709,783.043C856.359,757.706,856.359,719.365,856.359,683.023C856.359,646.682,856.359,612.341,856.359,586.504C856.359,560.667,856.359,543.333,856.359,526C856.359,508.667,856.359,491.333,860.408,480.583C864.457,469.833,872.555,465.667,880.06,461.805C887.566,457.943,894.478,454.387,897.934,452.608L901.39,450.83"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(939.40625, 796.046875)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>否</p></span></div></foreignObject></g></g><g transform="translate(1044.4765625, 796.046875)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="关键指标" class="cluster"><rect height="129" width="821.34375" y="8" x="8" style=""></rect><g transform="translate(386.6171875, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>关键指标</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(140.7578125, 72.5)" id="flowchart-I-5646" class="node default"><rect height="54" width="195.515625" y="-27" x="-97.7578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-67.7578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="135.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>吞吐量 Throughput</p></span></div></foreignObject></g></g><g transform="translate(365.1171875, 72.5)" id="flowchart-J-5647" class="node default"><rect height="54" width="153.203125" y="-27" x="-76.6015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-46.6015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="93.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>延迟 Latency</p></span></div></foreignObject></g></g><g transform="translate(561.78125, 72.5)" id="flowchart-K-5648" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>内存使用率</p></span></div></foreignObject></g></g><g transform="translate(738.09375, 72.5)" id="flowchart-L-5649" class="node default"><rect height="54" width="112.5" y="-27" x="-56.25" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-26.25, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="52.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC频率</p></span></div></foreignObject></g></g></g></g><g transform="translate(957.421875, 72.5)" id="flowchart-A-5630" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>性能需求分析</p></span></div></foreignObject></g></g><g transform="translate(957.421875, 214)" id="flowchart-B-5631" class="node default"><rect height="54" width="160.5625" y="-27" x="-80.28125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-50.28125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="100.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>选择GC收集器</p></span></div></foreignObject></g></g><g transform="translate(957.421875, 318)" id="flowchart-C-5633" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>配置基础参数</p></span></div></foreignObject></g></g><g transform="translate(957.421875, 422)" id="flowchart-D-5635" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>压力测试</p></span></div></foreignObject></g></g><g transform="translate(1026.4609375, 526)" id="flowchart-E-5637" class="node default"><rect height="54" width="144.546875" y="-27" x="-72.2734375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-42.2734375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="84.546875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>分析GC日志</p></span></div></foreignObject></g></g><g transform="translate(1026.4609375, 681.0234375)" id="flowchart-F-5639" class="node default"><polygon transform="translate(-78.0234375,78.0234375)" class="label-container" points="78.0234375,0 156.046875,-78.0234375 78.0234375,-156.046875 0,-78.0234375"></polygon><g transform="translate(-51.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="102.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>满足性能要求?</p></span></div></foreignObject></g></g><g transform="translate(870.3671875, 860.046875)" id="flowchart-G-5641" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>调整参数</p></span></div></foreignObject></g></g><g transform="translate(1044.4765625, 860.046875)" id="flowchart-H-5643" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>部署上线</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-54auas_296"><span class="control" id="-54auas_302">重要性能指标：</span></p><div class="table-wrapper"><table class="wide" id="-54auas_297"><thead><tr class="ijRowHead" id="-54auas_303"><th id="-54auas_308"><p>指标</p></th><th id="-54auas_309"><p>定义</p></th><th id="-54auas_310"><p>目标值</p></th><th id="-54auas_311"><p>影响因素</p></th></tr></thead><tbody><tr id="-54auas_304"><td id="-54auas_312"><p><span class="control" id="-54auas_316">吞吐量</span></p></td><td id="-54auas_313"><p>应用时间/(应用时间+GC时间)</p></td><td id="-54auas_314"><p>&gt; 95%</p></td><td id="-54auas_315"><p>堆大小、收集器选择</p></td></tr><tr id="-54auas_305"><td id="-54auas_317"><p><span class="control" id="-54auas_321">停顿时间</span></p></td><td id="-54auas_318"><p>GC导致的应用暂停时间</p></td><td id="-54auas_319"><p>&lt; 200ms</p></td><td id="-54auas_320"><p>收集器算法、堆大小</p></td></tr><tr id="-54auas_306"><td id="-54auas_322"><p><span class="control" id="-54auas_326">分配速率</span></p></td><td id="-54auas_323"><p>单位时间内分配的内存量</p></td><td id="-54auas_324"><p>稳定</p></td><td id="-54auas_325"><p>应用特性</p></td></tr><tr id="-54auas_307"><td id="-54auas_327"><p><span class="control" id="-54auas_331">晋升速率</span></p></td><td id="-54auas_328"><p>新生代到老年代的晋升速度</p></td><td id="-54auas_329"><p>较低</p></td><td id="-54auas_330"><p>对象生命周期</p></td></tr></tbody></table></div><p id="-54auas_298"><span class="control" id="-54auas_332">GC调优参数配置：</span></p><div class="code-block" data-lang="bash">
# 基础堆内存配置
-Xms4g -Xmx4g                    # 堆大小
-Xmn1g                           # 新生代大小
-XX:SurvivorRatio=8              # Eden:Survivor = 8:1

# G1收集器配置
-XX:+UseG1GC                     # 启用G1
-XX:MaxGCPauseMillis=200         # 最大停顿时间
-XX:G1HeapRegionSize=16m         # Region大小
-XX:G1NewSizePercent=30          # 新生代占堆的百分比
-XX:G1MaxNewSizePercent=40       # 新生代最大占比

# GC日志配置
-XX:+PrintGCDetails              # 打印GC详细信息
-XX:+PrintGCTimeStamps           # 打印时间戳
-Xloggc:/path/to/gc.log          # GC日志文件路径
</div></section><section class="chapter"><h3 id="q10-gc-gc" data-toc="q10-gc-gc">Q10: 如何分析GC日志？常见的GC问题有哪些？</h3><p id="-54auas_333"><span class="control" id="-54auas_342">答案：</span></p><p id="-54auas_334"><span class="control" id="-54auas_343">GC日志分析示例：</span></p><div class="code-block" data-lang="bash">
# G1 GC日志示例
2023-01-01T10:00:00.000+0800: [GC pause (G1 Evacuation Pause) (young)
  (initial-mark), 0.0234567 secs]
   [Parallel Time: 18.3 ms, GC Workers: 8]
   [GC Worker Start (ms): Min: 12.0, Avg: 12.1, Max: 12.3, Diff: 0.3]
   [Eden: 512.0M(512.0M)-&gt;0.0B(480.0M) Survivors: 32.0M-&gt;64.0M Heap: 1.2G(4.0G)-&gt;0.7G(4.0G)]
 [Times: user=0.12 sys=0.01, real=0.02 secs]
</div><p id="-54auas_336"><span class="control" id="-54auas_344">日志关键信息解读：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 528.546875 548"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="528.546875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="GC日志分析要点" class="cluster"><rect height="532" width="512.546875" y="8" x="8" style=""></rect><g transform="translate(205.9765625, 8)" class="cluster-label"><foreignObject height="24" width="116.59375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC日志分析要点</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M242.055,82L249.944,82C257.833,82,273.612,82,284.626,82C295.641,82,301.891,82,307.474,82C313.057,82,317.974,82,320.432,82L322.891,82"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M251.891,210L258.141,210C264.391,210,276.891,210,286.266,210C295.641,210,301.891,210,307.474,210C313.057,210,317.974,210,320.432,210L322.891,210"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M232.797,338L242.229,338C251.661,338,270.526,338,283.213,338C295.9,338,302.409,338,308.251,338C314.094,338,319.27,338,321.857,338L324.445,338"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M250.234,466L256.76,466C263.286,466,276.339,466,285.99,466C295.641,466,301.891,466,307.474,466C313.057,466,317.974,466,320.432,466L322.891,466"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(148.6953125, 82)" id="flowchart-A-5651" class="node default"><rect height="78" width="186.71875" y="-39" x="-93.359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-63.359375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="126.71875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>GC类型<br>Young/Mixed/Full</p></span></div></foreignObject></g></g><g transform="translate(404.96875, 82)" id="flowchart-B-5652" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>停顿时间<br>是否超过目标</p></span></div></foreignObject></g></g><g transform="translate(148.6953125, 210)" id="flowchart-C-5653" class="node default"><rect height="78" width="206.390625" y="-39" x="-103.1953125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-73.1953125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="146.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>内存变化<br>Eden/Survivor/Heap</p></span></div></foreignObject></g></g><g transform="translate(404.96875, 210)" id="flowchart-D-5654" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>回收效果<br>内存释放情况</p></span></div></foreignObject></g></g><g transform="translate(148.6953125, 338)" id="flowchart-E-5655" class="node default"><rect height="78" width="168.203125" y="-39" x="-84.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-54.1015625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="108.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并行度<br>GC Worker数量</p></span></div></foreignObject></g></g><g transform="translate(404.96875, 338)" id="flowchart-F-5656" class="node default"><rect height="78" width="153.046875" y="-39" x="-76.5234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-46.5234375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="93.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>资源利用<br>CPU使用情况</p></span></div></foreignObject></g></g><g transform="translate(148.6953125, 466)" id="flowchart-G-5657" class="node default"><rect height="78" width="203.078125" y="-39" x="-101.5390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-71.5390625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="143.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>触发原因<br>Allocation Failure等</p></span></div></foreignObject></g></g><g transform="translate(404.96875, 466)" id="flowchart-H-5658" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题根源<br>内存分配模式</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_338"><span class="control" id="-54auas_345">常见GC问题及解决方案：</span></p><ol class="list _decimal" id="-54auas_339" type="1"><li class="list__item" id="-54auas_346"><p id="-54auas_349"><span class="control" id="-54auas_351">频繁Young GC</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 731.375 94"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="731.375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M214.922,47L219.089,47C223.255,47,231.589,47,237.839,47C244.089,47,248.255,47,251.755,47C255.255,47,258.089,47,259.505,47L260.922,47"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M453.125,47L457.292,47C461.458,47,469.792,47,476.042,47C482.292,47,486.458,47,489.958,47C493.458,47,496.292,47,497.708,47L499.125,47"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(111.4609375, 47)" id="flowchart-A-5677" class="node default"><rect height="54" width="206.921875" y="-27" x="-103.4609375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-73.4609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="146.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题：Young GC频繁</p></span></div></foreignObject></g></g><g transform="translate(359.0234375, 47)" id="flowchart-B-5678" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>原因：新生代过小</p></span></div></foreignObject></g></g><g transform="translate(613.25, 47)" id="flowchart-C-5680" class="node default"><rect height="78" width="220.25" y="-39" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>解决：增加新生代大小<br>-Xmn参数调整</p></span></div></foreignObject></g></g></g></g></g></svg></li><li class="list__item" id="-54auas_347"><p id="-54auas_352"><span class="control" id="-54auas_354">长时间GC停顿</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 813.203125 94"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="813.203125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_0" d="M216.641,47L220.807,47C224.974,47,233.307,47,239.557,47C245.807,47,249.974,47,253.474,47C256.974,47,259.807,47,261.224,47L262.641,47"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_1" d="M518.938,47L523.104,47C527.271,47,535.604,47,541.854,47C548.104,47,552.271,47,555.771,47C559.271,47,562.104,47,563.521,47L564.938,47"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(112.3203125, 47)" id="flowchart-D-5698" class="node default"><rect height="54" width="208.640625" y="-27" x="-104.3203125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-74.3203125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="148.640625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题：GC停顿时间长</p></span></div></foreignObject></g></g><g transform="translate(392.7890625, 47)" id="flowchart-E-5699" class="node default"><rect height="54" width="252.296875" y="-27" x="-126.1484375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-96.1484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>原因：老年代过大或碎片化</p></span></div></foreignObject></g></g><g transform="translate(687.0703125, 47)" id="flowchart-F-5701" class="node default"><rect height="78" width="236.265625" y="-39" x="-118.1328125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-88.1328125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>解决：选择低延迟收集器<br>如G1或ZGC</p></span></div></foreignObject></g></g></g></g></g></svg></li><li class="list__item" id="-54auas_348"><p id="-54auas_355"><span class="control" id="-54auas_357">内存泄漏导致频繁Full GC</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 732.546875 94"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="732.546875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_0" d="M200.078,47L204.245,47C208.411,47,216.745,47,222.995,47C229.245,47,233.411,47,236.911,47C240.411,47,243.245,47,244.661,47L246.078,47"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_I_1" d="M470.328,47L474.495,47C478.661,47,486.995,47,493.245,47C499.495,47,503.661,47,507.161,47C510.661,47,513.495,47,514.911,47L516.328,47"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(104.0390625, 47)" id="flowchart-G-5742" class="node default"><rect height="54" width="192.078125" y="-27" x="-96.0390625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-66.0390625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132.078125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>问题：Full GC频繁</p></span></div></foreignObject></g></g><g transform="translate(360.203125, 47)" id="flowchart-H-5743" class="node default"><rect height="54" width="220.25" y="-27" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>原因：老年代持续增长</p></span></div></foreignObject></g></g><g transform="translate(622.4375, 47)" id="flowchart-I-5745" class="node default"><rect height="78" width="204.21875" y="-39" x="-102.109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-72.109375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>解决：分析内存泄漏<br>使用MAT等工具</p></span></div></foreignObject></g></g></g></g></g></svg></li></ol><p id="-54auas_340"><span class="control" id="-54auas_358">GC调优最佳实践：</span></p><div class="code-block" data-lang="bash">
# 1. 监控和分析
-XX:+PrintGCApplicationStoppedTime  # 打印应用停顿时间
-XX:+PrintStringDeduplicationStatistics  # 字符串去重统计

# 2. 内存分配优化
-XX:+UseTLAB                        # 启用TLAB
-XX:TLABSize=256k                   # TLAB大小

# 3. 并发控制
-XX:ConcGCThreads=4                 # 并发GC线程数
-XX:ParallelGCThreads=8             # 并行GC线程数

# 4. 触发条件调整
-XX:G1MixedGCCountTarget=8          # 混合GC目标次数
-XX:G1OldCSetRegionThreshold=10     # 老年代Region收集阈值
</div></section></section><section class="chapter"><h2 id="-54auas_9" data-toc="-54auas_9">💧 内存泄漏分析</h2><section class="chapter"><h3 id="q11-java" data-toc="q11-java">Q11: 什么是内存泄漏？Java中常见的内存泄漏场景有哪些？</h3><p id="-54auas_360"><span class="control" id="-54auas_368">答案：</span></p><p id="-54auas_361"><span class="control" id="-54auas_369">内存泄漏定义：</span> 程序中已动态分配的堆内存由于某种原因未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃。</p><p id="-54auas_362"><span class="control" id="-54auas_370">Java内存泄漏的表现：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 581.078125 452"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="581.078125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="内存泄漏症状" class="cluster"><rect height="436" width="565.078125" y="8" x="8" style=""></rect><g transform="translate(242.4609375, 8)" class="cluster-label"><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>内存泄漏症状</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M217.68,70L226.6,70C235.521,70,253.362,70,268.354,70C283.346,70,295.49,70,306.966,70C318.443,70,329.253,70,334.658,70L340.063,70"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_1" d="M195.852,174L208.41,174C220.969,174,246.086,174,263.887,174C281.688,174,292.172,174,301.99,174C311.807,174,320.958,174,325.534,174L330.109,174"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_2" d="M233.703,278L239.953,278C246.203,278,258.703,278,268.078,278C277.453,278,283.703,278,289.286,278C294.87,278,299.786,278,302.245,278L304.703,278"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_H_3" d="M216.125,382L225.305,382C234.484,382,252.844,382,266.576,382C280.309,382,289.414,382,297.853,382C306.292,382,314.064,382,317.95,382L321.836,382"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(139.6015625, 70)" id="flowchart-A-5756" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>应用性能下降</p></span></div></foreignObject></g></g><g transform="translate(422.140625, 70)" id="flowchart-B-5757" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>响应时间变长</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 174)" id="flowchart-C-5758" class="node default"><rect height="54" width="112.5" y="-27" x="-56.25" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-26.25, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="52.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>频繁GC</p></span></div></foreignObject></g></g><g transform="translate(422.140625, 174)" id="flowchart-D-5759" class="node default"><rect height="54" width="176.0625" y="-27" x="-88.03125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-58.03125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="116.0625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Full GC次数增加</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 278)" id="flowchart-E-5760" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>内存使用持续增长</p></span></div></foreignObject></g></g><g transform="translate(422.140625, 278)" id="flowchart-F-5761" class="node default"><rect height="54" width="226.875" y="-27" x="-113.4375" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-83.4375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="166.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>最终OutOfMemoryError</p></span></div></foreignObject></g></g><g transform="translate(139.6015625, 382)" id="flowchart-G-5762" class="node default"><rect height="54" width="153.046875" y="-27" x="-76.5234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-46.5234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="93.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CPU使用率高</p></span></div></foreignObject></g></g><g transform="translate(422.140625, 382)" id="flowchart-H-5763" class="node default"><rect height="54" width="192.609375" y="-27" x="-96.3046875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-66.3046875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>大量时间花在GC上</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-54auas_364"><span class="control" id="-54auas_371">常见内存泄漏场景：</span></p><ol class="list _decimal" id="-54auas_365" type="1"><li class="list__item" id="-54auas_372"><p id="-54auas_376"><span class="control" id="-54auas_378">集合类泄漏</span></p><div class="code-block" data-lang="java">
public class CollectionLeak {
    private static List&lt;Object&gt; list = new ArrayList&lt;&gt;();

    public void addObject(Object obj) {
        list.add(obj);  // 只添加不移除，导致内存泄漏
    }
}
</div></li><li class="list__item" id="-54auas_373"><p id="-54auas_379"><span class="control" id="-54auas_381">监听器未移除</span></p><div class="code-block" data-lang="java">
public class ListenerLeak {
    public void registerListener() {
        SomeEventSource.addListener(new MyListener());
        // 忘记在适当时机removeListener，导致监听器对象无法回收
    }
}
</div></li><li class="list__item" id="-54auas_374"><p id="-54auas_382"><span class="control" id="-54auas_384">内部类持有外部类引用</span></p><div class="code-block" data-lang="java">
public class OuterClass {
    private String data = &quot;large data&quot;;

    public class InnerClass {
        // 内部类默认持有外部类引用
        // 如果InnerClass被长期持有，OuterClass也无法回收
    }
}
</div></li><li class="list__item" id="-54auas_375"><p id="-54auas_385"><span class="control" id="-54auas_387">ThreadLocal使用不当</span></p><div class="code-block" data-lang="java">
public class ThreadLocalLeak {
    private static ThreadLocal&lt;Object&gt; threadLocal = new ThreadLocal&lt;&gt;();

    public void setData(Object data) {
        threadLocal.set(data);
        // 线程结束前未调用remove()，可能导致内存泄漏
    }
}
</div></li></ol><p id="-54auas_366"><span class="control" id="-54auas_388">内存泄漏检测方法：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1767.609375 302"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1767.609375" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M872.664,41.399L779.93,48.999C687.195,56.599,501.727,71.8,408.992,81.483C316.258,91.167,316.258,95.333,316.258,98.833C316.258,102.333,316.258,105.167,316.258,106.583L316.258,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_C_1" d="M950.742,62L950.742,66.167C950.742,70.333,950.742,78.667,950.742,84.917C950.742,91.167,950.742,95.333,950.742,98.833C950.742,102.333,950.742,105.167,950.742,106.583L950.742,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_D_2" d="M1028.82,41.77L1115.753,49.309C1202.685,56.847,1376.549,71.923,1463.482,81.545C1550.414,91.167,1550.414,95.333,1550.414,98.833C1550.414,102.333,1550.414,105.167,1550.414,106.583L1550.414,108"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_E_3" d="M254.203,153.524L227.517,159.77C200.831,166.016,147.458,178.508,120.772,186.837C94.086,195.167,94.086,199.333,94.086,202.833C94.086,206.333,94.086,209.167,94.086,210.583L94.086,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_F_4" d="M316.258,166L316.258,170.167C316.258,174.333,316.258,182.667,316.258,188.917C316.258,195.167,316.258,199.333,316.258,202.833C316.258,206.333,316.258,209.167,316.258,210.583L316.258,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_G_5" d="M378.313,154.067L403.664,160.223C429.016,166.378,479.719,178.689,505.07,186.928C530.422,195.167,530.422,199.333,530.422,202.833C530.422,206.333,530.422,209.167,530.422,210.583L530.422,212"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_H_6" d="M888.688,154.067L863.336,160.223C837.984,166.378,787.281,178.689,761.93,187.928C736.578,197.167,736.578,203.333,736.578,208.833C736.578,214.333,736.578,219.167,736.578,221.583L736.578,224"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_I_7" d="M950.742,166L950.742,170.167C950.742,174.333,950.742,182.667,950.742,189.917C950.742,197.167,950.742,203.333,950.742,208.833C950.742,214.333,950.742,219.167,950.742,221.583L950.742,224"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_J_8" d="M1012.797,152.318L1042.836,158.765C1072.875,165.212,1132.953,178.106,1162.992,187.636C1193.031,197.167,1193.031,203.333,1193.031,208.833C1193.031,214.333,1193.031,219.167,1193.031,221.583L1193.031,224"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_K_9" d="M1490.654,166L1481.432,170.167C1472.209,174.333,1453.765,182.667,1444.543,189.917C1435.32,197.167,1435.32,203.333,1435.32,208.833C1435.32,214.333,1435.32,219.167,1435.32,221.583L1435.32,224"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_L_10" d="M1610.174,166L1619.397,170.167C1628.619,174.333,1647.063,182.667,1656.286,189.917C1665.508,197.167,1665.508,203.333,1665.508,208.833C1665.508,214.333,1665.508,219.167,1665.508,221.583L1665.508,224"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(950.7421875, 35)" id="flowchart-A-5789" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>内存泄漏检测</p></span></div></foreignObject></g></g><g transform="translate(316.2578125, 139)" id="flowchart-B-5790" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>监控工具</p></span></div></foreignObject></g></g><g transform="translate(950.7421875, 139)" id="flowchart-C-5792" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>代码审查</p></span></div></foreignObject></g></g><g transform="translate(1550.4140625, 139)" id="flowchart-D-5794" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>压力测试</p></span></div></foreignObject></g></g><g transform="translate(94.0859375, 255)" id="flowchart-E-5796" class="node default"><rect height="78" width="172.171875" y="-39" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JVisualVM<br>观察堆内存趋势</p></span></div></foreignObject></g></g><g transform="translate(316.2578125, 255)" id="flowchart-F-5798" class="node default"><rect height="78" width="172.171875" y="-39" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>MAT<br>分析堆转储文件</p></span></div></foreignObject></g></g><g transform="translate(530.421875, 255)" id="flowchart-G-5800" class="node default"><rect height="78" width="156.15625" y="-39" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>JProfiler<br>实时内存分析</p></span></div></foreignObject></g></g><g transform="translate(736.578125, 255)" id="flowchart-H-5802" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>检查集合使用</p></span></div></foreignObject></g></g><g transform="translate(950.7421875, 255)" id="flowchart-I-5804" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>审查监听器注册</p></span></div></foreignObject></g></g><g transform="translate(1193.03125, 255)" id="flowchart-J-5806" class="node default"><rect height="54" width="212.40625" y="-27" x="-106.203125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-76.203125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="152.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>检查ThreadLocal使用</p></span></div></foreignObject></g></g><g transform="translate(1435.3203125, 255)" id="flowchart-K-5808" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>长时间运行测试</p></span></div></foreignObject></g></g><g transform="translate(1665.5078125, 255)" id="flowchart-L-5810" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>观察内存增长趋势</p></span></div></foreignObject></g></g></g></g></g></svg></section></section><section class="chapter"><h2 id="-54auas_10" data-toc="-54auas_10">💡 面试技巧</h2><section class="chapter"><h3 id="-54auas_389" data-toc="-54auas_389">高频考点</h3><ol class="list _decimal" id="-54auas_391" type="1"><li class="list__item" id="-54auas_392"><p id="-54auas_397"><span class="control" id="-54auas_398">GC算法原理</span> ：标记-清除、复制、标记-整理的工作原理</p></li><li class="list__item" id="-54auas_393"><p id="-54auas_399"><span class="control" id="-54auas_400">垃圾收集器特点</span> ：Serial、Parallel、CMS、G1的区别和适用场景</p></li><li class="list__item" id="-54auas_394"><p id="-54auas_401"><span class="control" id="-54auas_402">GC调优实践</span> ：如何选择收集器、配置参数、分析日志</p></li><li class="list__item" id="-54auas_395"><p id="-54auas_403"><span class="control" id="-54auas_404">内存泄漏分析</span> ：常见泄漏场景和检测方法</p></li><li class="list__item" id="-54auas_396"><p id="-54auas_405"><span class="control" id="-54auas_406">分代收集理论</span> ：为什么要分代、各代的特点</p></li></ol></section><section class="chapter"><h3 id="-54auas_390" data-toc="-54auas_390">回答策略</h3><ol class="list _decimal" id="-54auas_407" type="1"><li class="list__item" id="-54auas_410"><p id="-54auas_414"><span class="control" id="-54auas_415">原理图解</span> ：画图说明GC算法的工作过程</p></li><li class="list__item" id="-54auas_411"><p id="-54auas_416"><span class="control" id="-54auas_417">参数配置</span> ：结合实际参数说明调优方法</p></li><li class="list__item" id="-54auas_412"><p id="-54auas_418"><span class="control" id="-54auas_419">性能对比</span> ：比较不同收集器的性能特点</p></li><li class="list__item" id="-54auas_413"><p id="-54auas_420"><span class="control" id="-54auas_421">实际案例</span> ：分享GC调优的实际经验</p></li></ol><p id="-54auas_409"><span class="control" id="-54auas_422">学习建议</span> ：垃圾回收是JVM的核心机制，建议通过实际配置不同的垃圾收集器、分析GC日志、使用内存分析工具来加深理解，特别要重视新一代收集器如G1和ZGC的特性。</p></section></section><div class="last-modified">09 六月 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="jvm内存管理qa.html" class="navigation-links__prev">JVM内存管理QA</a><a href="jvm类加载机制qa.html" class="navigation-links__next">JVM类加载机制QA</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>