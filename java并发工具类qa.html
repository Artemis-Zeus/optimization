<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-06-10T01:07:30.6430593"><title>Java并发工具类QA | 技术知识库</title><script type="application/json" id="virtual-toc-data">[{"id":"-zgltbw_4","level":0,"title":"📋 知识结构","anchor":"#-zgltbw_4"},{"id":"-zgltbw_5","level":0,"title":"🏊‍♀️ 线程池框架","anchor":"#-zgltbw_5"},{"id":"-zgltbw_6","level":0,"title":"💡 面试技巧","anchor":"#-zgltbw_6"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Java并发工具类QA | 技术知识库"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="技术知识库 Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/java并发工具类qa.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Java并发工具类QA | 技术知识库"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/java并发工具类qa.html#webpage",
    "url": "writerside-documentation/java并发工具类qa.html",
    "name": "Java并发工具类QA | 技术知识库",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "技术知识库 Help"
}</script><!-- End Schema.org --></head><body data-id="Java并发工具类QA" data-main-title="Java并发工具类QA" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Java并发面试大纲.md|Java并发面试大纲"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>技术知识库  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Java并发工具类QA" id="Java并发工具类QA.md">Java并发工具类QA</h1><p id="-zgltbw_3">Java提供了丰富的并发工具类来简化多线程编程。本文档深入解析线程池框架、同步工具类、并发集合等核心工具的使用和原理。</p><section class="chapter"><h2 id="-zgltbw_4" data-toc="-zgltbw_4">📋 知识结构</h2><svg aria-roledescription="mindmap" role="graphics-document document" viewBox="5 5 940.1585693359375 436.6495361328125" style="max-width: 940.1585693359375px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g></g><g class="mindmap-edges"><path class="edge section-edge-0 edge-depth-1" d="M 684.2184905444732,262.037122796018 L 683.6616020848744,233.68453611240255 L683.1047136252756,205.3319494287871"></path><path class="edge section-edge-0 edge-depth-1" d="M 699.1088246847173,273.5753921612954 L 775.1194322096896,255.56274741654607 L851.130039734662,237.5501026717968"></path><path class="edge section-edge-0 edge-depth-1" d="M 699.1158260229588,280.46338925791287 L 769.0265243396021,296.88047430812856 L838.9372226562455,313.29755935834424"></path><path class="edge section-edge-0 edge-depth-1" d="M 691.3915576540074,290.3641299205649 L 706.8943194638076,320.40705139210377 L722.3970812736078,350.44997286364264"></path><path class="edge section-edge-0 edge-depth-0" d="M 515.8310718207733,226.156213991723 L 592.9915785213891,249.42943733553864 L670.1520852220049,272.70266067935427"></path><path class="edge section-edge-1 edge-depth-1" d="M 609.7632031427936,130.29525192225108 L 686.7592571773283,132.70668982349267 L763.755311211863,135.11812772473425"></path><path class="edge section-edge-1 edge-depth-1" d="M 581.4034390524752,123.01980079149929 L 530.9243468043072,97.31825799662275 L480.4452545561393,71.6167152017462"></path><path class="edge section-edge-1 edge-depth-1" d="M 608.2807992117918,123.30854446020243 L 661.1577109232178,97.80146253369352 L714.0346226346438,72.29438060718462"></path><path class="edge section-edge-1 edge-depth-1" d="M 595.7087210977459,114.85506476004522 L 597.7762490047014,81.86284872445796 L599.843776911657,48.8706326888707"></path><path class="edge section-edge-1 edge-depth-0" d="M 512.1509371894308,211.29280124649952 L 548.1203272702669,175.82517095634702 L584.089717351103,140.35754066619452"></path><path class="edge section-edge-2 edge-depth-1" d="M 324.82441549650457,191.7745823448312 L 372.5704112653168,170.06849863446664 L420.31640703412893,148.36241492410207"></path><path class="edge section-edge-2 edge-depth-1" d="M 296.9055287748388,202.6241243340956 L 231.97712160149223,223.75308946135206 L167.04871442814564,244.88205458860853"></path><path class="edge section-edge-2 edge-depth-1" d="M 302.7114559711831,185.59431492047287 L 282.048290895897,155.32914201802865 L261.38512582061094,125.06396911558441"></path><path class="edge section-edge-2 edge-depth-1" d="M 296.378237725153,195.48741487945927 L 211.44292790169652,181.16021335131143 L126.50761807824009,166.83301182316353"></path><path class="edge section-edge-2 edge-depth-0" d="M 486.5864584259018,219.9599173912009 L 406.3196901985657,209.9035334866658 L326.0529219712296,199.8471495821307"></path><path class="edge section-edge-3 edge-depth-1" d="M 467.7533605349805,335.3773139876831 L 447.03545051757254,367.74654308833294 L426.31754050016457,400.11577218898276"></path><path class="edge section-edge-3 edge-depth-1" d="M 488.19096289476875,331.2549359427452 L 525.8002124003286,357.1717483875028 L563.4094619058885,383.08856083226044"></path><path class="edge section-edge-3 edge-depth-1" d="M 461.59014562176765,318.0581491525932 L 403.87439519238586,299.0805862429635 L346.1586447630041,280.10302333333374"></path><path class="edge section-edge-3 edge-depth-1" d="M 461.2275472961846,326.1328670798434 L 408.50020642455206,338.3632337110362 L355.77286555291954,350.59360034222897"></path><path class="edge section-edge-3 edge-depth-0" d="M 497.7777522143716,236.36309576481696 L 488.6548550770523,272.2840857923395 L479.53195793973293,308.2050758198621"></path></g><g class="mindmap-nodes"><g transform="translate(434.73737698021296, 202.92464446377812)" class="mindmap-node section--1 section-root"><g transform="translate(66.73272323608398, 18.9)"><circle r="66.73272323608398" class="node-bkg node-circle" id="node-0"></circle></g><g transform="translate(66.73272323608398, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Java并发工具类</tspan></tspan></text></g></g></g><g transform="translate(633.4650564907879, 258.1342302072992)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h92.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-1"></path><line y2="37.8" x2="102.09600067138672" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(51.04800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">线程池框架</tspan></tspan></text></g></g></g><g transform="translate(544.2225539885435, 110.92569744891591)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h91.09600067138672 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-6"></path><line y2="37.8" x2="101.09600067138672" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(50.54800033569336, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">同步工具类</tspan></tspan></text></g></g></g><g transform="translate(268.13328088273875, 179.08242250955345)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-11"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">并发集合</tspan></tspan></text></g></g></g><g transform="translate(433.3036106397119, 303.84352712090094)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h75.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-16"></path><line y2="37.8" x2="85.0719985961914" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(42.5359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">异步编程</tspan></tspan></text></g></g></g><g transform="translate(599.9733248335019, 171.43484201750596)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h155.67364501953125 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-2"></path><line y2="37.8" x2="165.67364501953125" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(82.83682250976562, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ThreadPoolExecutor</tspan></tspan></text></g></g></g><g transform="translate(796.2930225587183, 215.191264625793)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h128.86557006835938 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-3"></path><line y2="37.8" x2="138.86557006835938" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(69.43278503417969, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Executors工厂类</tspan></tspan></text></g></g></g><g transform="translate(794.479990479432, 297.82671840895796)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h108.12000274658203 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-4"></path><line y2="37.8" x2="118.12000274658203" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(59.060001373291016, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">核心参数配置</tspan></tspan></text></g></g></g><g transform="translate(686.2395828030383, 344.8798725769084)" class="mindmap-node section-0"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h76.0719985961914 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-5"></path><line y2="37.8" x2="86.0719985961914" y1="37.8" x1="0" class="node-line-0"></line></g><g transform="translate(43.0359992980957, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">拒绝策略</tspan></tspan></text></g></g></g><g transform="translate(708.1896066063475, 116.68768219806941)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h131.11670684814453 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-7"></path><line y2="37.8" x2="141.11670684814453" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(70.55835342407227, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">CountDownLatch</tspan></tspan></text></g></g></g><g transform="translate(410.547411897903, 45.91081854432958)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h103.06145477294922 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-8"></path><line y2="37.8" x2="113.06145477294922" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(56.53072738647461, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">CyclicBarrier</tspan></tspan></text></g></g></g><g transform="translate(677.6637067861147, 46.87722761847113)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h89.76232147216797 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-9"></path><line y2="37.8" x2="99.76232147216797" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(49.881160736083984, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Semaphore</tspan></tspan></text></g></g></g><g transform="translate(553.607814199082, 15)" class="mindmap-node section-1"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h84.34825897216797 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-10"></path><line y2="37.8" x2="94.34825897216797" y1="37.8" x1="0" class="node-line-1"></line></g><g transform="translate(47.174129486083984, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Exchanger</tspan></tspan></text></g></g></g><g transform="translate(352.4475021276311, 123.2545747593798)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h153.04808044433594 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-12"></path><line y2="37.8" x2="163.04808044433594" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(81.52404022216797, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ConcurrentHashMap</tspan></tspan></text></g></g></g><g transform="translate(63.81866968718907, 230.62375641315066)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h167.93258666992188 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-13"></path><line y2="37.8" x2="177.93258666992188" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(88.96629333496094, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">CopyOnWriteArrayList</tspan></tspan></text></g></g></g><g transform="translate(189.927824224485, 93.77586152650383)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h115.99895477294922 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-14"></path><line y2="37.8" x2="125.99895477294922" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(62.99947738647461, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">BlockingQueue</tspan></tspan></text></g></g></g><g transform="translate(15, 145.43800419306933)" class="mindmap-node section-2"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h183.4331512451172 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-15"></path><line y2="37.8" x2="193.4331512451172" y1="37.8" x1="0" class="node-line-2"></line></g><g transform="translate(96.7165756225586, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ConcurrentLinkedQueue</tspan></tspan></text></g></g></g><g transform="translate(368.5437910973375, 393.849559055765)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h89.375 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-17"></path><line y2="37.8" x2="99.375" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(49.6875, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">Future接口</tspan></tspan></text></g></g></g><g transform="translate(496.3930246406817, 372.69996965410473)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h148.73558044433594 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-18"></path><line y2="37.8" x2="158.73558044433594" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(79.36779022216797, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">CompletableFuture</tspan></tspan></text></g></g></g><g transform="translate(276.21076659808716, 256.51764536502606)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h101.3968276977539 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-19"></path><line y2="37.8" x2="111.3968276977539" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(55.69841384887695, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">ForkJoinPool</tspan></tspan></text></g></g></g><g transform="translate(306.13680274344983, 335.08294030117145)" class="mindmap-node section-3"><g><path d="M0 32.8 v-27.799999999999997 q0,-5 5,-5 h60.04800033569336 q5,0 5,5 v32.8 H0 Z" class="node-bkg node-no-border" id="node-20"></path><line y2="37.8" x2="70.04800033569336" y1="37.8" x1="0" class="node-line-3"></line></g><g transform="translate(35.02400016784668, 5)" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" dy="1em"><g><rect style="stroke: none" class="background"></rect><text style="" y="-10.1"><tspan dy="1.1em" y="-0.1em" x="0" class="text-outer-tspan"><tspan font-weight="normal" class="text-inner-tspan" font-style="normal">并行流</tspan></tspan></text></g></g></g></g></svg></section><section class="chapter"><h2 id="-zgltbw_5" data-toc="-zgltbw_5">🏊&zwj;♀️ 线程池框架</h2><section class="chapter"><h3 id="q1" data-toc="q1">Q1: 线程池的核心参数有哪些？如何合理配置？</h3><p id="-zgltbw_11"><span class="control" id="-zgltbw_16">答案：</span></p><p id="-zgltbw_12"><span class="control" id="-zgltbw_17">ThreadPoolExecutor核心参数：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 606.875 948"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="606.875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="线程池核心参数" class="cluster"><rect height="932" width="590.875" y="8" x="8" style=""></rect><g transform="translate(247.3515625, 8)" class="cluster-label"><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>线程池核心参数</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_A1_0" d="M214.984,94L224.417,94C233.849,94,252.714,94,267.274,94C281.835,94,292.091,94,301.681,94C311.271,94,320.194,94,324.656,94L329.117,94"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_B1_1" d="M234.078,246L240.328,246C246.578,246,259.078,246,268.453,246C277.828,246,284.078,246,289.661,246C295.245,246,300.161,246,302.62,246L305.078,246"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_C1_2" d="M222.406,398L230.602,398C238.797,398,255.188,398,268.511,398C281.835,398,292.091,398,301.681,398C311.271,398,320.194,398,324.656,398L329.117,398"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_D1_3" d="M210.164,550L220.4,550C230.635,550,251.107,550,266.471,550C281.835,550,292.091,550,301.681,550C311.271,550,320.194,550,324.656,550L329.117,550"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_E1_4" d="M220.508,702L229.02,702C237.531,702,254.555,702,268.862,702C283.169,702,294.76,702,305.685,702C316.609,702,326.867,702,331.996,702L337.125,702"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_F1_5" d="M201.844,854L213.466,854C225.089,854,248.333,854,264.416,854C280.499,854,289.419,854,297.673,854C305.927,854,313.514,854,317.308,854L321.102,854"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(139.7890625, 94)" id="flowchart-A-4639" class="node default"><rect height="78" width="150.390625" y="-39" x="-75.1953125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-45.1953125, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="90.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>corePoolSize<br>核心线程数</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 94)" id="flowchart-A1-4640" class="node default"><rect height="102" width="204.21875" y="-51" x="-102.109375" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-72.109375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>始终保持的线程数<br>即使空闲也不会回收<br>默认情况下预先创建</p></span></div></foreignObject></g></g><g transform="translate(139.7890625, 246)" id="flowchart-B-4641" class="node default"><rect height="78" width="188.578125" y="-39" x="-94.2890625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.2890625, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="128.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>maximumPoolSize<br>最大线程数</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 246)" id="flowchart-B1-4642" class="node default"><rect height="102" width="252.296875" y="-51" x="-126.1484375" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-96.1484375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="192.296875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>池中允许的最大线程数<br>包括核心线程和非核心线程<br>超过则执行拒绝策略</p></span></div></foreignObject></g></g><g transform="translate(139.7890625, 398)" id="flowchart-C-4643" class="node default"><rect height="78" width="165.234375" y="-39" x="-82.6171875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-52.6171875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="105.234375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>keepAliveTime<br>存活时间</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 398)" id="flowchart-C1-4644" class="node default"><rect height="102" width="204.21875" y="-51" x="-102.109375" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-72.109375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>非核心线程空闲时间<br>超过时间会被回收<br>配合TimeUnit使用</p></span></div></foreignObject></g></g><g transform="translate(139.7890625, 550)" id="flowchart-D-4645" class="node default"><rect height="78" width="140.75" y="-39" x="-70.375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.375, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="80.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>workQueue<br>任务队列</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 550)" id="flowchart-D1-4646" class="node default"><rect height="102" width="204.21875" y="-51" x="-102.109375" data-et="node" data-id="abc" style="fill:#f3e5f5 !important" class="basic label-container"></rect><g transform="translate(-72.109375, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>存储等待执行的任务<br>影响线程创建策略<br>不同类型有不同特性</p></span></div></foreignObject></g></g><g transform="translate(139.7890625, 702)" id="flowchart-E-4647" class="node default"><rect height="78" width="161.4375" y="-39" x="-80.71875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-50.71875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="101.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>threadFactory<br>线程工厂</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 702)" id="flowchart-E1-4648" class="node default"><rect height="102" width="188.203125" y="-51" x="-94.1015625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-64.1015625, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>创建新线程的工厂<br>可自定义线程名称<br>设置守护线程属性</p></span></div></foreignObject></g></g><g transform="translate(139.7890625, 854)" id="flowchart-F-4649" class="node default"><rect height="78" width="124.109375" y="-39" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>handler<br>拒绝策略</p></span></div></foreignObject></g></g><g transform="translate(435.2265625, 854)" id="flowchart-F1-4650" class="node default"><rect height="102" width="220.25" y="-51" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>任务无法执行时的处理<br>四种内置策略<br>可自定义策略</p></span></div></foreignObject></g></g></g></g></g></g></g></svg><p id="-zgltbw_14"><span class="control" id="-zgltbw_18">线程池工作流程：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 934.828125 1351.3125" height="1351.3125" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="934.828125" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M463.41,62L463.41,66.167C463.41,70.333,463.41,78.667,463.452,84.958C463.493,91.25,463.577,95.5,463.647,99.083C463.717,102.667,463.775,105.584,463.803,107.042L463.832,108.501"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M404.728,209.364L354.29,225.311C303.852,241.259,202.977,273.153,152.539,306.936C102.102,340.719,102.102,376.391,102.102,412.063C102.102,447.734,102.102,483.406,102.102,520.413C102.102,557.419,102.102,595.76,102.102,634.102C102.102,672.443,102.102,710.784,102.102,733.038C102.102,755.292,102.102,761.458,102.102,766.958C102.102,772.458,102.102,777.292,102.102,779.708L102.102,782.125"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_D_2" d="M504.87,227.587L519.145,240.497C533.421,253.407,561.972,279.227,576.289,295.262C590.607,311.297,590.69,317.547,590.765,323.13C590.839,328.714,590.905,333.63,590.937,336.089L590.97,338.547"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_3" d="M542.967,434.522L511.861,448.615C480.754,462.707,418.541,490.893,387.435,512.321C356.328,533.749,356.328,548.419,356.328,562.423C356.328,576.427,356.328,589.764,356.328,596.433L356.328,603.102"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_F_4" d="M627.902,445.699L641.523,457.929C655.143,470.159,682.384,494.618,696.046,509.973C709.708,525.328,709.792,531.578,709.866,537.162C709.941,542.745,710.006,547.662,710.039,550.12L710.072,552.578"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_5" d="M749.149,673.601L761.744,686.189C774.339,698.776,799.529,723.95,812.124,739.621C824.719,755.292,824.719,761.458,824.719,766.958C824.719,772.458,824.719,777.292,824.719,779.708L824.719,782.125"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_H_6" d="M671.101,673.601L658.34,686.189C645.578,698.776,620.055,723.95,607.293,739.621C594.531,755.292,594.531,761.458,594.531,766.958C594.531,772.458,594.531,777.292,594.531,779.708L594.531,782.125"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_I_7" d="M102.102,840.125L102.102,844.292C102.102,848.458,102.102,856.792,107.194,863.042C112.287,869.292,122.472,873.458,132.041,877.373C141.609,881.287,150.56,884.949,155.036,886.78L159.512,888.61"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_J_8" d="M356.328,661.102L356.328,675.772C356.328,690.443,356.328,719.784,356.328,737.538C356.328,755.292,356.328,761.458,356.328,766.958C356.328,772.458,356.328,777.292,356.328,779.708L356.328,782.125"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_K_9" d="M824.719,840.125L824.719,844.292C824.719,848.458,824.719,856.792,824.719,863.042C824.719,869.292,824.719,873.458,824.719,876.958C824.719,880.458,824.719,883.292,824.719,884.708L824.719,886.125"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_I_10" d="M356.328,840.125L356.328,844.292C356.328,848.458,356.328,856.792,351.235,863.042C346.143,869.292,335.957,873.458,326.389,877.373C316.821,881.287,307.869,884.949,303.394,886.78L298.918,888.61"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_L_11" d="M818.809,944.125L817.459,950.292C816.11,956.458,813.41,968.792,812.5,978.853C811.59,988.914,812.47,996.702,813.274,1003.828C814.079,1010.955,814.808,1017.418,815.173,1020.65L815.538,1023.882"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_M_12" d="M825.219,1215.813L825.135,1221.896C825.052,1227.979,824.885,1240.146,824.802,1249.313C824.719,1258.479,824.719,1264.646,824.719,1270.146C824.719,1275.646,824.719,1280.479,824.719,1282.896L824.719,1285.313"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_K_13" d="M834.45,1027.857L835.163,1020.068C835.876,1012.279,837.301,996.702,837.339,985.83C837.377,974.958,836.027,968.792,834.82,963.276C833.613,957.761,832.548,952.897,832.016,950.465L831.484,948.033"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(102.1015625, 519.078125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>否</p></span></div></foreignObject></g></g><g transform="translate(590.5234375, 305.046875)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>是</p></span></div></foreignObject></g></g><g transform="translate(356.328125, 519.078125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>否</p></span></div></foreignObject></g></g><g transform="translate(709.625, 519.078125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>是</p></span></div></foreignObject></g></g><g transform="translate(824.71875, 749.125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>否</p></span></div></foreignObject></g></g><g transform="translate(594.53125, 749.125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>是</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(824.71875, 1252.3125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>是</p></span></div></foreignObject></g></g><g transform="translate(838.7265625, 981.125)" class="edgeLabel"><g transform="translate(-8.015625, -12)" class="label"><foreignObject height="24" width="16.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>否</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(463.41015625, 35)" id="flowchart-A-4831" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>提交任务</p></span></div></foreignObject></g></g><g transform="translate(463.41015625, 190.0234375)" id="flowchart-B-4832" class="node default"><polygon transform="translate(-78.0234375,78.0234375)" class="label-container" points="78.0234375,0 156.046875,-78.0234375 78.0234375,-156.046875 0,-78.0234375"></polygon><g transform="translate(-51.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="102.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>核心线程池满?</p></span></div></foreignObject></g></g><g transform="translate(102.1015625, 813.125)" id="flowchart-C-4834" class="node default"><rect height="54" width="188.203125" y="-27" x="-94.1015625" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>创建核心线程执行</p></span></div></foreignObject></g></g><g transform="translate(590.5234375, 412.0625)" id="flowchart-D-4836" class="node default"><polygon transform="translate(-70.015625,70.015625)" class="label-container" points="70.015625,0 140.03125,-70.015625 70.015625,-140.03125 0,-70.015625"></polygon><g transform="translate(-43.015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="86.03125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>任务队列满?</p></span></div></foreignObject></g></g><g transform="translate(356.328125, 634.1015625)" id="flowchart-E-4838" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>任务入队等待</p></span></div></foreignObject></g></g><g transform="translate(709.625, 634.1015625)" id="flowchart-F-4840" class="node default"><polygon transform="translate(-78.0234375,78.0234375)" class="label-container" points="78.0234375,0 156.046875,-78.0234375 78.0234375,-156.046875 0,-78.0234375"></polygon><g transform="translate(-51.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="102.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>最大线程池满?</p></span></div></foreignObject></g></g><g transform="translate(824.71875, 813.125)" id="flowchart-G-4842" class="node default"><rect height="54" width="204.21875" y="-27" x="-102.109375" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-72.109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>创建非核心线程执行</p></span></div></foreignObject></g></g><g transform="translate(594.53125, 813.125)" id="flowchart-H-4844" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="fill:#ffcdd2 !important" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>执行拒绝策略</p></span></div></foreignObject></g></g><g transform="translate(229.21484375, 917.125)" id="flowchart-I-4846" class="node default"><rect height="54" width="156.15625" y="-27" x="-78.078125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-48.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>任务执行完成</p></span></div></foreignObject></g></g><g transform="translate(356.328125, 813.125)" id="flowchart-J-4848" class="node default"><rect height="54" width="220.25" y="-27" x="-110.125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-80.125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="160.25"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>核心线程从队列取任务</p></span></div></foreignObject></g></g><g transform="translate(824.71875, 917.125)" id="flowchart-K-4850" class="node default"><rect height="54" width="204.21875" y="-27" x="-102.109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-72.109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="144.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>非核心线程执行任务</p></span></div></foreignObject></g></g><g transform="translate(824.71875, 1116.71875)" id="flowchart-L-4854" class="node default"><polygon transform="translate(-98.59375,98.59375)" class="label-container" points="98.59375,0 197.1875,-98.59375 98.59375,-197.1875 0,-98.59375"></polygon><g transform="translate(-71.59375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="143.1875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>超过keepAliveTime?</p></span></div></foreignObject></g></g><g transform="translate(824.71875, 1316.3125)" id="flowchart-M-4856" class="node default"><rect height="54" width="172.171875" y="-27" x="-86.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-56.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>回收非核心线程</p></span></div></foreignObject></g></g></g></g></g></svg></section><section class="chapter"><h3 id="q2-countdownlatch-cyclicbarrier-semaphore" data-toc="q2-countdownlatch-cyclicbarrier-semaphore">Q2: CountDownLatch、CyclicBarrier和Semaphore的区别和使用场景？</h3><p id="-zgltbw_19"><span class="control" id="-zgltbw_28">答案：</span></p><p id="-zgltbw_20"><span class="control" id="-zgltbw_29">三种同步工具类对比：</span></p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 798.671875 450"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="798.671875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="适用场景" class="cluster"><rect height="104" width="726.5859375" y="8" x="40.046875" style=""></rect><g transform="translate(371.28515625, 8)" class="cluster-label"><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>适用场景</p></span></div></foreignObject></g></g><g data-look="classic" id="同步工具类对比" class="cluster"><rect height="280" width="782.671875" y="162" x="8" style=""></rect><g transform="translate(343.25, 162)" class="cluster-label"><foreignObject height="24" width="112.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>同步工具类对比</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_A1_0" d="M137.102,241L137.102,245.167C137.102,249.333,137.102,257.667,137.102,263.917C137.102,270.167,137.102,274.333,137.102,277.833C137.102,281.333,137.102,284.167,137.102,285.583L137.102,287"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_B1_1" d="M399.336,241L399.336,245.167C399.336,249.333,399.336,257.667,399.336,263.917C399.336,270.167,399.336,274.333,399.336,277.833C399.336,281.333,399.336,284.167,399.336,285.583L399.336,287"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_C1_2" d="M661.57,241L661.57,245.167C661.57,249.333,661.57,257.667,661.57,263.917C661.57,270.167,661.57,274.333,661.57,277.833C661.57,281.333,661.57,284.167,661.57,285.583L661.57,287"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_A_3" d="M137.102,87L137.102,91.167C137.102,95.333,137.102,103.667,137.102,112C137.102,120.333,137.102,128.667,137.102,137C137.102,145.333,137.102,153.667,137.102,159.917C137.102,166.167,137.102,170.333,137.102,173.833C137.102,177.333,137.102,180.167,137.102,181.583L137.102,183"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_B_4" d="M399.336,87L399.336,91.167C399.336,95.333,399.336,103.667,399.336,112C399.336,120.333,399.336,128.667,399.336,137C399.336,145.333,399.336,153.667,399.336,159.917C399.336,166.167,399.336,170.333,399.336,173.833C399.336,177.333,399.336,180.167,399.336,181.583L399.336,183"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_C_5" d="M661.57,87L661.57,91.167C661.57,95.333,661.57,103.667,661.57,112C661.57,120.333,661.57,128.667,661.57,137C661.57,145.333,661.57,153.667,661.57,159.917C661.57,166.167,661.57,170.333,661.57,173.833C661.57,177.333,661.57,180.167,661.57,181.583L661.57,183"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(137.1015625, 214)" id="flowchart-A-4998" class="node default"><rect height="54" width="180.890625" y="-27" x="-90.4453125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-60.4453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="120.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CountDownLatch</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 354)" id="flowchart-A1-4999" class="node default"><rect height="126" width="188.203125" y="-63" x="-94.1015625" data-et="node" data-id="abc" style="fill:#e1f5fe !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>一次性同步屏障<br>等待多个任务完成<br>不可重用<br>减法计数器</p></span></div></foreignObject></g></g><g transform="translate(399.3359375, 214)" id="flowchart-B-5000" class="node default"><rect height="54" width="152.3125" y="-27" x="-76.15625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-46.15625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="92.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CyclicBarrier</p></span></div></foreignObject></g></g><g transform="translate(399.3359375, 354)" id="flowchart-B1-5001" class="node default"><rect height="126" width="236.265625" y="-63" x="-118.1328125" data-et="node" data-id="abc" style="fill:#c8e6c9 !important" class="basic label-container"></rect><g transform="translate(-88.1328125, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="176.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>循环同步屏障<br>等待所有线程到达屏障点<br>可重用<br>多轮次同步</p></span></div></foreignObject></g></g><g transform="translate(661.5703125, 214)" id="flowchart-C-5002" class="node default"><rect height="54" width="139.515625" y="-27" x="-69.7578125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-39.7578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="79.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Semaphore</p></span></div></foreignObject></g></g><g transform="translate(661.5703125, 354)" id="flowchart-C1-5003" class="node default"><rect height="126" width="188.203125" y="-63" x="-94.1015625" data-et="node" data-id="abc" style="fill:#fff3e0 !important" class="basic label-container"></rect><g transform="translate(-64.1015625, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="128.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>信号量<br>控制资源访问数量<br>可重用<br>资源许可证管理</p></span></div></foreignObject></g></g><g transform="translate(137.1015625, 60)" id="flowchart-D-5004" class="node default"><rect height="54" width="124.109375" y="-27" x="-62.0546875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-32.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="64.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>并行计算</p></span></div></foreignObject></g></g><g transform="translate(399.3359375, 60)" id="flowchart-E-5006" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>分阶段任务</p></span></div></foreignObject></g></g><g transform="translate(661.5703125, 60)" id="flowchart-F-5008" class="node default"><rect height="54" width="140.125" y="-27" x="-70.0625" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-40.0625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>资源池管理</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-zgltbw_22"><span class="control" id="-zgltbw_30">CountDownLatch使用示例：</span></p><div class="code-block" data-lang="java">
// CountDownLatch - 倒计时门闩
public class CountDownLatchExample {
    
    // 场景：等待多个服务启动完成
    public static void serviceStartupExample() throws InterruptedException {
        int serviceCount = 3;
        CountDownLatch startupLatch = new CountDownLatch(serviceCount);
        
        // 启动多个服务
        String[] services = {&quot;数据库服务&quot;, &quot;缓存服务&quot;, &quot;消息队列服务&quot;};
        for (String service : services) {
            new Thread(() -&gt; {
                try {
                    System.out.println(service + &quot; 正在启动...&quot;);
                    Thread.sleep(2000 + (int)(Math.random() * 3000));
                    System.out.println(service + &quot; 启动完成&quot;);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                } finally {
                    startupLatch.countDown(); // 完成一个服务启动
                }
            }).start();
        }
        
        System.out.println(&quot;等待所有服务启动...&quot;);
        startupLatch.await(); // 等待所有服务启动完成
        System.out.println(&quot;所有服务启动完成，应用程序开始运行&quot;);
    }
}
</div><p id="-zgltbw_24"><span class="control" id="-zgltbw_31">CyclicBarrier使用示例：</span></p><div class="code-block" data-lang="java">
// CyclicBarrier - 循环屏障
public class CyclicBarrierExample {
    
    // 场景：多线程分阶段计算
    public static void multiPhaseCalculation() {
        int threadCount = 4;
        CyclicBarrier barrier = new CyclicBarrier(threadCount, () -&gt; {
            System.out.println(&quot;阶段完成，所有线程继续下一阶段&quot;);
        });
        
        for (int i = 0; i &lt; threadCount; i++) {
            final int threadId = i;
            new Thread(() -&gt; {
                try {
                    for (int phase = 1; phase &lt;= 3; phase++) {
                        System.out.println(&quot;线程 &quot; + threadId + &quot; 完成第 &quot; + phase + &quot; 阶段&quot;);
                        Thread.sleep(1000 + (int)(Math.random() * 2000));
                        
                        barrier.await(); // 等待所有线程完成当前阶段
                        System.out.println(&quot;线程 &quot; + threadId + &quot; 开始第 &quot; + (phase + 1) + &quot; 阶段&quot;);
                    }
                } catch (InterruptedException | BrokenBarrierException e) {
                    Thread.currentThread().interrupt();
                }
            }).start();
        }
    }
}
</div><p id="-zgltbw_26"><span class="control" id="-zgltbw_32">Semaphore使用示例：</span></p><div class="code-block" data-lang="java">
// Semaphore - 信号量
public class SemaphoreExample {
    
    // 场景：数据库连接池
    public static void databaseConnectionPool() {
        // 模拟只有3个数据库连接
        Semaphore connectionPool = new Semaphore(3);
        
        for (int i = 0; i &lt; 10; i++) {
            final int clientId = i;
            new Thread(() -&gt; {
                try {
                    System.out.println(&quot;客户端 &quot; + clientId + &quot; 请求数据库连接&quot;);
                    connectionPool.acquire(); // 获取连接许可
                    
                    System.out.println(&quot;客户端 &quot; + clientId + &quot; 获得数据库连接，开始查询&quot;);
                    Thread.sleep(2000); // 模拟查询时间
                    System.out.println(&quot;客户端 &quot; + clientId + &quot; 查询完成，释放连接&quot;);
                    
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                } finally {
                    connectionPool.release(); // 释放连接许可
                }
            }).start();
        }
    }
}
</div></section><section class="chapter"><h3 id="q3-future-completablefuture" data-toc="q3-future-completablefuture">Q3: Future和CompletableFuture有什么区别？如何使用？</h3><p id="-zgltbw_33"><span class="control" id="-zgltbw_38">答案：</span></p><p id="-zgltbw_34"><span class="control" id="-zgltbw_39">Future vs CompletableFuture对比：</span></p><p id="-zgltbw_36"><span class="control" id="-zgltbw_40">CompletableFuture高级使用：</span></p><div class="code-block" data-lang="java">
// CompletableFuture高级使用示例
public class CompletableFutureExample {
    
    // 链式异步处理
    public static void chainedAsyncProcessing() {
        CompletableFuture&lt;Integer&gt; future = CompletableFuture
            .supplyAsync(() -&gt; {
                System.out.println(&quot;第一步：获取初始值&quot;);
                return 10;
            })
            .thenApply(value -&gt; {
                System.out.println(&quot;第二步：值乘以2&quot;);
                return value * 2;
            })
            .thenApply(value -&gt; {
                System.out.println(&quot;第三步：值加5&quot;);
                return value + 5;
            })
            .whenComplete((result, exception) -&gt; {
                if (exception == null) {
                    System.out.println(&quot;最终结果: &quot; + result);
                } else {
                    System.err.println(&quot;处理异常: &quot; + exception.getMessage());
                }
            });
        
        future.join(); // 等待完成
    }
    
    // 多个Future组合
    public static void multipleFutureCombination() {
        CompletableFuture&lt;String&gt; userFuture = CompletableFuture.supplyAsync(() -&gt; {
            return &quot;用户信息&quot;;
        });
        
        CompletableFuture&lt;String&gt; orderFuture = CompletableFuture.supplyAsync(() -&gt; {
            return &quot;订单信息&quot;;
        });
        
        // 等待所有完成
        CompletableFuture&lt;Void&gt; allFutures = CompletableFuture.allOf(
            userFuture, orderFuture);
        
        CompletableFuture&lt;String&gt; result = allFutures.thenApply(v -&gt; {
            try {
                return String.format(&quot;聚合结果: %s, %s&quot;, 
                    userFuture.get(), orderFuture.get());
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        });
        
        System.out.println(result.join());
    }
}
</div></section></section><section class="chapter"><h2 id="-zgltbw_6" data-toc="-zgltbw_6">💡 面试技巧</h2><section class="chapter"><h3 id="-zgltbw_41" data-toc="-zgltbw_41">高频考点</h3><ol class="list _decimal" id="-zgltbw_43" type="1"><li class="list__item" id="-zgltbw_44"><p id="-zgltbw_49"><span class="control" id="-zgltbw_50">线程池配置</span> ：核心参数的含义和配置原则、拒绝策略选择</p></li><li class="list__item" id="-zgltbw_45"><p id="-zgltbw_51"><span class="control" id="-zgltbw_52">同步工具类应用</span> ：CountDownLatch、CyclicBarrier、Semaphore的使用场景</p></li><li class="list__item" id="-zgltbw_46"><p id="-zgltbw_53"><span class="control" id="-zgltbw_54">异步编程</span> ：Future与CompletableFuture的区别和应用</p></li><li class="list__item" id="-zgltbw_47"><p id="-zgltbw_55"><span class="control" id="-zgltbw_56">并发集合</span> ：ConcurrentHashMap、BlockingQueue等的原理和使用</p></li><li class="list__item" id="-zgltbw_48"><p id="-zgltbw_57"><span class="control" id="-zgltbw_58">性能优化</span> ：线程池调优、工具类性能对比</p></li></ol></section><section class="chapter"><h3 id="-zgltbw_42" data-toc="-zgltbw_42">回答策略</h3><ol class="list _decimal" id="-zgltbw_59" type="1"><li class="list__item" id="-zgltbw_62"><p id="-zgltbw_66"><span class="control" id="-zgltbw_67">原理说明</span> ：解释工具类的实现原理和核心机制</p></li><li class="list__item" id="-zgltbw_63"><p id="-zgltbw_68"><span class="control" id="-zgltbw_69">场景化应用</span> ：结合具体业务场景说明工具选择</p></li><li class="list__item" id="-zgltbw_64"><p id="-zgltbw_70"><span class="control" id="-zgltbw_71">性能考量</span> ：分析不同工具在不同场景下的性能表现</p></li><li class="list__item" id="-zgltbw_65"><p id="-zgltbw_72"><span class="control" id="-zgltbw_73">最佳实践</span> ：总结使用经验和避坑指南</p></li></ol><p id="-zgltbw_61"><span class="control" id="-zgltbw_74">学习建议</span> ：Java并发工具类是实际开发中的重要工具，建议通过实际项目练习这些工具类的使用。重点掌握线程池的配置原则和各种同步工具类的适用场景，理解异步编程模式的优势和使用技巧。</p></section></section><div class="last-modified">09 六月 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="java锁机制详解qa.html" class="navigation-links__prev">Java锁机制详解QA</a><a href="java原子操作与casqa.html" class="navigation-links__next">Java原子操作与CASQA</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>